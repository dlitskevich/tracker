<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>â€¢</title>
    <link rel="stylesheet" href="vendor/spectre.min.css" />
    <link rel="stylesheet" href="vendor/spectre-icons.min.css" />
    <link rel="stylesheet" href="vendor/spectre-exp.min.css" />
    <link rel="stylesheet" href="index.css?v=2" />
    <link rel="preconnect" href="https://script.googleusercontent.com" />
    <link rel="preconnect" href="https://script.google.com" />
    <script src="vendor/three.min.js"></script>
    <script src="js/applyWebGlBg.js"></script>
  </head>
  <body></body>
  <script src="index.js" type="module"></script>
  <script src="vendor/arrmatura.js"></script>
  <script type="module">
    var lib = arrmatura.lib;
    var params = lib.urlParse(window.location.search).params;
    var key =
      "AKfycbwoWyFt17GjKCPHXX5a27dwq7pXyQQxKllQ5Gf8BtJgLd-g-rAr7V4DlrDS3bpcq4XCcw";
    var apiBaseUrl = "https://script.google.com/macros/s/" + key + "/exec";
    var metaUrl = apiBaseUrl + "?action=meta";
    const resources = {
      apiBaseUrl,
      params,
    };

    const functions = {
      applyWebGlBg () { 
        setTimeout(()=>{
          applyWebGlBg(this.$impl.$element)
        },20);
      }
    }

    const xmls = ['inbox','index','references','tasks','standup','user'].map(x=>`xml/${x}.xml`);

    window.fetchTexts(xmls, (texts) => {
      // console.log(texts);
      const types = [...texts, window.TimeReportFieldController];

      arrmatura(`<App metaUrl="${metaUrl}"/>`, { types, resources, functions });
    });
  </script>
</html>
