!function webpackUniversalModuleDefinition(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var r=n();for(var i in r)("object"==typeof exports?exports:e)[i]=r[i]}}(this,(function(){return function(e){var n={};function __webpack_require__(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,__webpack_require__),i.l=!0,i.exports}return __webpack_require__.m=e,__webpack_require__.c=n,__webpack_require__.d=function(e,n,r){__webpack_require__.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,n){if(1&n&&(e=__webpack_require__(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)__webpack_require__.d(r,i,function(n){return e[n]}.bind(null,i));return r},__webpack_require__.n=function(e){var n=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(n,"a",n),n},__webpack_require__.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=37)}([function(e,n){e.exports=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){function _defineProperties(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function _createClass(e,n,r){return n&&_defineProperties(e.prototype,n),r&&_defineProperties(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){function _extends(){return e.exports=_extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,_extends.apply(this,arguments)}e.exports=_extends,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){function _getPrototypeOf(n){return e.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,_getPrototypeOf(n)}e.exports=_getPrototypeOf,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){var i=r(43);e.exports=function _inherits(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&i(e,n)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){var i=r(44).default,o=r(45);e.exports=function _possibleConstructorReturn(e,n){if(n&&("object"===i(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return o(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(47);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===i[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return i[e]}}))}));var o=r(52);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===o[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return o[e]}}))}));var a=r(55);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return a[e]}}))}));var u=r(27);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===u[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return u[e]}}))}));var l=r(56);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===l[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return l[e]}}))}));var c=r(57);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===c[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return c[e]}}))}));var s=r(58);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===s[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return s[e]}}))}));var f=r(59);Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===f[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return f[e]}}))}));var p=r(60);Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===p[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return p[e]}}))}));var v=r(26);Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===v[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return v[e]}}))}));var m=r(61);Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===m[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return m[e]}}))}));var y=r(19);Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===y[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return y[e]}}))}));var g=r(62);Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===g[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return g[e]}}))}));var b=r(63);Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===b[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return b[e]}}))}));var k=r(64);Object.keys(k).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===k[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return k[e]}}))}));var _=r(28);Object.keys(_).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===_[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return _[e]}}))}));var S=r(29);Object.keys(S).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===S[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return S[e]}}))}))},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.Service=void 0;var o=i(r(1)),a=i(r(2)),u=i(r(20)),l=(0,i(r(21)).default)("$"),c=function(){function Service(e,n){(0,o.default)(this,Service),Object.defineProperty(this,l,{writable:!0,value:void 0}),this.state=e,(0,u.default)(this,l)[l]=n}return(0,a.default)(Service,[{key:"lookupService",value:function lookupService(e){return(0,u.default)(this,l)[l].getByRef(e)}},{key:"up",value:function up(e){return(0,u.default)(this,l)[l].up(e)}},{key:"defer",value:function defer(e){return(0,u.default)(this,l)[l].defer(e)}},{key:"emit",value:function emit(e,n){var r;return null==(r=(0,u.default)(this,l)[l])?void 0:r.emit(e,n)}},{key:"createEmitter",value:function createEmitter(e){var n=this;return function(r){return n.emit(e,r)}}},{key:"res",value:function res(e){return(0,u.default)(this,l)[l].res(e)}},{key:"log",value:function log(e){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return(n=(0,u.default)(this,l)[l]).log.apply(n,[e].concat(i))}},{key:"handleError",value:function handleError(e){var n=e.message,r=void 0===n?"":n,i=e.code,o=void 0===i?"":i,a=this.lookupService("errorHandler");a?a.handleError({message:r,code:o,source:(0,u.default)(this,l)[l]}):(0,u.default)(this,l)[l].logError(r,o)}},{key:"toast",value:function toast(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ok";this.emit("toasters.send","string"==typeof e?{message:e}:e)}}]),Service}();n.Service=c},function(e,n,r){var i=r(39),o=r(23),a=r(17),u=r(40);e.exports=function _toConsumableArray(e){return i(e)||o(e)||a(e)||u()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){var i=r(24),o=r(46),a=r(17),u=r(25);e.exports=function _slicedToArray(e,n){return i(e)||o(e,n)||a(e,n)||u()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function _defineProperty(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.compileNodes=n.compileNode=void 0;var i=r(65),o=r(66),a=r(67),u=r(68),l=r(71),c=function compileNode(e){var n=e.tag,r=e.attrs,c=null==r?void 0:r["ui:for"];if(c)return delete r["ui:for"],new u.CForNode(e,String(c).trim().split(" "));var s=null==r?void 0:r["ui:if"];if(s)return delete r["ui:if"],new l.CIfNode(e,String(s));if("ui:tag"===n){var f=(null==r?void 0:r.tag)||n;return null==r||delete r.tag,new o.CDynamicTagNode(e,String(f))}return"ui:slot"===n?new i.CSlotNode(e):"ui:fragment"===n?new i.CFragmentNode(e):"#text"===n?new a.CTextElementNode(e):n[0].match(/[A-Z]/)?new i.CCompositeNode(e):new a.CElementNode(e)};n.compileNode=c;n.compileNodes=function compileNodes(e){return new Map((null==e?void 0:e.map(c).map((function(e){return[e.uid,e]})))||[])}},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.EFactory=void 0;var o=i(r(9)),a=i(r(11)),u=i(r(3)),l=i(r(10)),c=i(r(1)),s=i(r(2)),f=r(7),p=r(30),v=function(){function EFactory(){(0,c.default)(this,EFactory),this.uid=(0,f.nextId)("N"),this.propertyResolvers=[],this.initializers=[]}return(0,s.default)(EFactory,[{key:"createEntity",value:function createEntity(e,n){return new this.EntityConstructor(this,e,n)}},{key:"addInitialState",value:function addInitialState(e){return this.initialState=Object.entries(e).reduce((function(e,n){var r=(0,l.default)(n,2),i=r[0],o=r[1];return e[i]=o,e}),this.initialState||{}),this}},{key:"addPropertyResolver",value:function addPropertyResolver(e,n){return this.propertyResolvers.push((function(r,i){return i[n]=e(r),i})),this}},{key:"addDataPropertyResolver",value:function addDataPropertyResolver(e,n){return this.propertyResolvers.push((function(r,i){return i.data=(0,u.default)(i.data||{},(0,a.default)({},n,e(r))),i})),this}},{key:"addPropertiesResolver",value:function addPropertiesResolver(e){return this.propertyResolvers.push((function(n,r){var i=e(n);return i&&"object"==typeof i&&Object.entries(i).forEach((function(e){var n=(0,l.default)(e,2),i=n[0],o=n[1];r[i]=o})),r})),this}},{key:"addPropertyConnector",value:function addPropertyConnector(e,n){var r=(0,p.compilePipeExpression)(e),i=r.key,o=r.pipec;this.initializers.push((function(e){return e.connect(i,(function(r){return n(o(e,r))}))}))}},{key:"addEmitter",value:function addEmitter(e,n){var r=(0,p.compilePipeExpression)(e),i=r.key,o=r.hardValue,u=r.pipec;this.initializers.push((function(e){return{payload:(0,a.default)({},n,(function(n){var r;return null==(r=e.$scope)?void 0:r.emit(i,u(e,void 0===o?n:o))}))}}))}},{key:"resolveInitialProps",value:function resolveInitialProps(e){return this.resolveProps(e,(0,u.default)({},this.initialState))}},{key:"resolveProps",value:function resolveProps(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.propertyResolvers.reduce((function(n,r){return r(e,n)}),n)}},{key:"compileAttribute",value:function compileAttribute(e,n){if("id"===e)this.addInitialState((0,a.default)({},e,n));else if(e.startsWith("data-"))this.addDataPropertyResolver((0,p.compileExpression)(n),e.slice(5));else if(e.startsWith("ui:")){var r=String(n);"ui:ref"===e?this.refId=r:"ui:props"===e&&("<"===r[0]&&"-"===r[1]?this.addPropertyConnector(r.slice(2),f.identity):this.addPropertiesResolver((0,p.compileExpression)(n)))}else"string"!=typeof n?this.addInitialState((0,a.default)({},e,n)):"<"===n[0]&&"-"===n[1]?this.addPropertyConnector(n.slice(2),(function(n){return(0,a.default)({},e,n)})):"-"===n[0]&&">"===n[1]?this.addEmitter(n.slice(2),e):n.includes("{")||":"===n[0]?this.addPropertyResolver((0,p.compileExpression)(n),e):this.addInitialState((0,a.default)({},e,n));return this}},{key:"compileAttributes",value:function compileAttributes(e){var n=this;e&&Object.entries(e).forEach((function(e){return n.compileAttribute.apply(n,(0,o.default)(e))}))}}]),EFactory}();n.EFactory=v},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.Entity=void 0;var o=i(r(9)),a=i(r(18)),u=i(r(11)),l=i(r(10)),c=i(r(3)),s=i(r(1)),f=i(r(2)),p=i(r(20)),v=i(r(21)),m=r(31),y=r(7),g=r(29),b=(0,v.default)("parent"),k=(0,v.default)("isInited"),_=(0,v.default)("isDone"),S=(0,v.default)("listeners"),x=(0,v.default)("defered"),C=(0,v.default)("weak"),I=(0,v.default)("refs"),O=(0,v.default)("propFnMap"),P=function(){function Entity(e,n,r){(0,s.default)(this,Entity),this._node=e,Object.defineProperty(this,b,{writable:!0,value:void 0}),Object.defineProperty(this,k,{writable:!0,value:!1}),Object.defineProperty(this,_,{writable:!0,value:!1}),Object.defineProperty(this,S,{writable:!0,value:void 0}),Object.defineProperty(this,x,{writable:!0,value:[]}),Object.defineProperty(this,C,{writable:!0,value:void 0}),Object.defineProperty(this,I,{writable:!0,value:void 0}),Object.defineProperty(this,O,{writable:!0,value:void 0}),this.$scope=r||this,(0,p.default)(this,b)[b]=n,this.arrmatura=(null==n?void 0:n.arrmatura)||this,this.$impl=this.createImplementation(this.getInitialState()),this.refId&&this.$scope.addEntityReference(this.refId,this)}return(0,f.default)(Entity,[{key:"node",get:function get(){return this._node}},{key:"parent",get:function get(){return(0,p.default)(this,b)[b]}},{key:"displayName",get:function get(){return"🔹"}},{key:"uid",get:function get(){return this.node.uid}},{key:"createImplementation",value:function createImplementation(e){return(0,c.default)({},e)}},{key:"getInitialState",value:function getInitialState(){return this.node.resolveInitialProps(this)}},{key:"up",value:function up(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||(0,p.default)(this,_)[_])return null;if(e.then&&e.catch)return this.upAsync(e);var i=null,o=new Map;return Object.entries(e).forEach((function(e){var r=(0,l.default)(e,2),a=r[0],u=r[1];if(u&&u.then&&u.catch){var c=u;(i||(i=[])).push(n.upAsync(c,a))}else a&&void 0!==u&&u!==n.$impl[a]&&o.set(a,u)})),(o.size||r)&&(this.stateChanged(o),this.recontent(),this.refId&&this.notify()),i?Promise.all(i).then((function(e){return e.reduce((function(e,n){return(0,c.default)({},e,n)}),{})})):null}},{key:"upAsync",value:function upAsync(e,n){var r=this,i=this.raceCondition("set:"+n);if(n&&"*"!==n[0]){var o=n.replace("Promise","");e.then((function(e){return i((function(){return r.up((0,u.default)({},o,e))}))}))}else e.then((function(e){return i((function(){return r.up(e)}))}));return e}},{key:"stateChanged",value:function stateChanged(e){var n=this;this.$impl.stateChanged?this.$impl.stateChanged(e):e.forEach((function(e,r){var i=n.$impl[(0,m.methodName)(r,"set")];"function"==typeof i?i.call(n.$impl,e):n.$impl[r]=e}))}},{key:"get",value:function get(e){var n=this,r=(0,p.default)(this,O)[O]||((0,p.default)(this,O)[O]={}),i=r[e];if(i)return i();var o=this.$impl,u=o[e];if(u&&"function"==typeof u){var l=u.bind(o);i=function fn(){return l}}else{var c=e.split("."),s=(0,a.default)(c),f=s[0],v=s.slice(1);if("R"===f)i=function fn(){return n.res(v)};else{var y=o[(0,m.methodName)(f,"get")],g="function"==typeof y?function(){return y.call(o)}:function(){return o[f]};i=v.length?function(){return v.reduce((function(e,n){return e&&n in e?e[n]:void 0}),g())}:g}}return r[e]=i,i()}},{key:"getFromScope",value:function getFromScope(e){return this.$scope.get(e)}},{key:"notify",value:function notify(){var e;null==(e=(0,p.default)(this,S)[S])||e.notify()}},{key:"subscribe",value:function subscribe(e,n){var r=this,i=(0,p.default)(this,S)[S]||((0,p.default)(this,S)[S]=(0,g.createListeners)());return{payload:n(this),cancel:i.add((function(){try{var i=n(r);e.up(i)}catch(e){r.logError("Notify ",e)}}))}}},{key:"connect",value:function connect(e,n){var r=e.split("."),i=(0,l.default)(r,2),o=i[0],a=i[1],u=void 0===a?"*":a,c=this.$scope.getByRef(o);if(c)return c.subscribe(this,(function(e){return(0,m.applyValue)("*"===u?e.$impl:e.get(u),n)}));this.logError("Connect: No such ref: "+o)}},{key:"emit",value:function emit(e,n){if(!e||!e.includes("."))return this.log("update:"+e,n,this.$impl),this.up(e?(0,u.default)({},e,n):n);var r=e.split("."),i=(0,l.default)(r,2),o=i[0],a=i[1];try{var c=this.getByRef(o);if(!c)throw new Error("No such reference: "+o);var s=(0,m.methodName)(a,"on"),f=c.$impl,p=f[s];if(!p||"function"!=typeof p)throw new Error("No such method "+o+"."+s);var v=p.call(f,n,f,c);if(v)return c.up(v)}catch(n){this.logError("emit "+e+":",n)}return null}},{key:"init",value:function init(e){var n=this;if(!(0,p.default)(this,_)[_]&&!(0,p.default)(this,k)[k]){(0,p.default)(this,k)[k]=!0;var r=[],i=this.node.initializers;if(null!=i&&i.length&&i.map((function(e){return e(n)})).forEach((function(i){if(i){var o=i.payload,a=i.cancel;a&&n.defer(a),o&&o.then?r.push(o):(0,c.default)(e,o)}})),r.length)Promise.all(r).then((function(r){if(n.up(r.reduce((function(e,n){return(0,c.default)(e,n)}),e),!0),n.$impl.init){var i=n.$impl.init(n);i&&n.up(i)}}));else if(this.up(e,!0),this.$impl.init){var o=this.$impl.init(this);o&&this.up(o)}return this}}},{key:"done",value:function done(){var e,n,r,i,o,a=this;if(!(0,p.default)(this,_)[_]){(0,p.default)(this,_)[_]=!0,null==(e=(n=this.$impl).done)||e.call(n,this);var u=(0,p.default)(this,b)[b];(0,p.default)(this,b)[b]=void 0,null==(r=this.$children)||r.forEach((function(e){return e.done()})),null==u||null==(i=u.$children)||i.delete(this.uid),null==(o=(0,p.default)(this,x)[x])||o.forEach((function(e){return e(a)})),(0,p.default)(this,x)[x]=void 0,this.$impl.$=null}}},{key:"content",get:function get(){return this.node.content}},{key:"recontentScope",get:function get(){return this.$scope}},{key:"platform",get:function get(){return this.arrmatura.platform}},{key:"setupChildren",value:function setupChildren(e){this.$children=e,e.forEach((function(e){return e.settleAsChild()}))}},{key:"settleAsChild",value:function settleAsChild(){(0,p.default)(this,k)[k]?this.up(this.node.resolveProps(this),!0):this.init(this.node.resolveInitialProps(this))}},{key:"recontent",value:function recontent(){var e,n=this,r=this.recontentScope,i=this.content;this.platform.redraw(this),null==(e=this.$children)||e.forEach((function(e,n){null!=i&&i.get(n)||e.done()}));var o=new Map;null==i||i.forEach((function(e,i){var a,u=(null==(a=n.$children)?void 0:a.get(i))||e.createEntity(n,r);o.set(u.uid,u)})),this.setupChildren(o)}},{key:"refId",get:function get(){return this._node.refId}},{key:"refs",get:function get(){return(0,p.default)(this,I)[I]||((0,p.default)(this,I)[I]={})}},{key:"getByRef",value:function getByRef(e){if("this"===e)return this;var n=this.refs[e]||null;return n||(this===this.$scope?null:this.$scope.getByRef(e))}},{key:"addEntityReference",value:function addEntityReference(e,n){this.refs[e]=n}},{key:"pipe",value:function pipe(e){return this.arrmatura.pipe(e)}},{key:"applyPipe",value:function applyPipe(e,n){var r=this;try{var i=e.split(":"),u=(0,a.default)(i),l=u[0],c=u.slice(1);return this.pipe(l).apply(this,[n].concat((0,o.default)(c.map((function(e){return"@"===e[0]?r.getFromScope(e.slice(1)):(0,y.scalarParse)(e)})))))}catch(r){return this.logError("ERROR: pipe "+e,r),n}}},{key:"raceCondition",value:function raceCondition(e){var n=(0,p.default)(this,C)[C]||((0,p.default)(this,C)[C]=new Map),r=1+(n.get(e)||0);return n.set(e,r),function(i){if(r===n.get(e))return r=0,i()}}},{key:"defer",value:function defer(e){e&&"function"==typeof e&&((0,p.default)(this,x)[x]||((0,p.default)(this,x)[x]=[])).push(e)}},{key:"log",value:function log(e){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return(n=console).log.apply(n,[this.displayName+":"+this.uid,e].concat(i)),e}},{key:"logError",value:function logError(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(e=console).error.apply(e,["⛔ ERROR: "+this.displayName+":"+this.uid].concat(r))}},{key:"res",value:function res(e){return this.arrmatura.res(e)}},{key:"stringify",value:function stringify(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=this.uid,r=this.displayName,i=void 0===r?n:r,a=this.$impl,u=this.$children;if("#text"===i)return""+e+a.text;var l=null!=u&&u.size?(0,o.default)(u.values()).map((function(n){return n.stringify("  "+e)})).join("\n"):"";return e+"<"+i+(0,m.stringifyState)(a)+(l?">\n"+l+"\n"+e+"</"+i+">":"/>")}},{key:"toString",value:function toString(){return this.stringify()}}]),Entity}();n.Entity=P},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.Storage=void 0;var o=i(r(10)),a=i(r(1)),u=i(r(2)),l=i(r(20)),c=i(r(21)),s=(0,c.default)("map"),f=function(){function MemoryStore(){(0,a.default)(this,MemoryStore),Object.defineProperty(this,s,{writable:!0,value:new Map})}return(0,u.default)(MemoryStore,[{key:"clear",value:function clear(){return(0,l.default)(this,s)[s].clear()}},{key:"getItem",value:function getItem(e){return(0,l.default)(this,s)[s].get(e)||null}},{key:"setItem",value:function setItem(e,n){(0,l.default)(this,s)[s].set(e,n)}},{key:"removeItem",value:function removeItem(e){(0,l.default)(this,s)[s].delete(e)}}]),MemoryStore}(),p=function(){function Storage(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(0,a.default)(this,Storage),this.ns=n,this.cache={},this.storage="local"===e?window.localStorage:"session"===e?window.sessionStorage:new f}return(0,u.default)(Storage,[{key:"clear",value:function clear(){return this.cache={},this.storage.clear()}},{key:"get",value:function get(e){return this.cache[e]||(this.cache[e]=function parse(e){return e?JSON.parse(e):void 0}(this.storage.getItem(e+this.ns)))}},{key:"set",value:function set(e,n){this.cache[e]=n,n?this.storage.setItem(e+this.ns,JSON.stringify(n)):this.storage.removeItem(e+this.ns)}},{key:"assign",value:function assign(e){var n=this;Object.entries(e).forEach((function(e){var r=(0,o.default)(e,2),i=r[0],a=r[1],u=void 0===a?null:a;return n.set(i,u)}))}},{key:"transform",value:function transform(e,n){return this.set(e,n(this.get(e)))}}]),Storage}();n.Storage=p},function(e,n,r){var i=r(100);e.exports=function _objectWithoutProperties(e,n){if(null==e)return{};var r,o,a=i(e,n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(o=0;o<u.length;o++)r=u[o],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){var i=r(22);e.exports=function _unsupportedIterableToArray(e,n){if(e){if("string"==typeof e)return i(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,n):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){var i=r(24),o=r(23),a=r(17),u=r(25);e.exports=function _toArray(e){return i(e)||o(e)||a(e)||u()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.scalarParse=void 0;n.scalarParse=function scalarParse(e){if("undefined"!==e){if("null"===e)return null;if("true"===e)return!0;if("false"===e)return!1;if("0"===e)return 0;if(""===e)return"";if(e&&"1234567890+-".includes(e[0])&&e.length<=17){var n=+e;return isNaN(n)?e:n}return e}}},function(e,n){e.exports=function _classPrivateFieldBase(e,n){if(!Object.prototype.hasOwnProperty.call(e,n))throw new TypeError("attempted to use private field on non-instance");return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){var r=0;e.exports=function _classPrivateFieldKey(e){return"__private_"+r+++"_"+e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=e[r];return i},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function _arrayWithHoles(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.valuesOf=n.settus=n.pack=n.keysOf=n.isEmpty=n.gettus=n.dot=n.assignKeyValue=n.assignFirstArgKeyValue=void 0;var o=i(r(9)),a=i(r(11)),u=i(r(3));n.isEmpty=function isEmpty(e){return!e||"object"==typeof e&&(null===e||(Array.isArray(e)?0===e.length:e instanceof Map?0===e.size:0===Object.keys(e).length))};n.dot=function dot(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name";return e?e[n]:null};n.keysOf=function keysOf(e){return e?Object.keys(e):null};n.valuesOf=function valuesOf(e){return e?Object.values(e):null};n.assignKeyValue=function assignKeyValue(e,n,r){return(0,u.default)(e||{},(0,a.default)({},n,r))};n.assignFirstArgKeyValue=function assignFirstArgKeyValue(e,n,r){return function(i){for(var l=arguments.length,c=new Array(l>1?l-1:0),s=1;s<l;s++)c[s-1]=arguments[s];return e.call.apply(e,[null,(0,u.default)(i||{},(0,a.default)({},n,r))].concat((0,o.default)(c.slice(1))))}};n.pack=function pack(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value";return(0,a.default)({},n,e)};n.gettus=function gettus(e,n){if(e&&n&&"object"==typeof e){if("function"==typeof n)return n(e);if("string"==typeof n){if(!n.includes("."))return e[n];n=n.split(".")}return n.reduce((function(e,n){return e?e[n]:void 0}),e)}};n.settus=function settus(e,n,r){if(e&&n&&"object"==typeof e)if("function"==typeof n)n(e,r);else{var i="string"==typeof n?n.split("."):n;if(i.length){var o=i.pop(),a=i.reduce((function(e,n){return e?e[n]:void 0}),e);o&&a&&"object"==typeof e&&(a[o]=r)}}}},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.appendResourceBundle=void 0,n.setLang=function setLang(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";c=e},n.t=void 0;var o=i(r(3)),a=i(r(53)),u=i(r(54));function _createForOfIteratorHelperLoose(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function _unsupportedIterableToArray(e,n){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(e,n)}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=e[r];return i}var l={en:a.default,ru:u.default},c="en";var s=function deep(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c,r=l[n];if(null==e||!e.length)return r;for(var i,o=_createForOfIteratorHelperLoose(e);!(i=o()).done;){var a=i.value;if("object"!=typeof(r=r[a]))return}return"object"==typeof r?r:void 0};n.t=function t(e,n){var r=e?e.split("."):[],i=r.pop();if(i){var o=s(r,n);return o?o[i]:void 0}};n.appendResourceBundle=function appendResourceBundle(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c,i=n?n.split("."):void 0,a=s(i,r);a&&(0,o.default)(a,e)}},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.xmlParse=n.skipQoutes=n.escapeXml=n.decodeXmlEntities=n.attributesToString=void 0,n.xmlStringify=function xmlStringify(e){var n=e.tag,r=e.attrs,i=e.nodes,o=void 0===i?[]:i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("#text"===n)return""+a+S(String((null==r?void 0:r.text)||""));var u=x(r),l=o.map((function(e){return xmlStringify(e,"  "+a)})).join("\n");return a+"<"+n+u+(l?">\n"+l+"\n"+a+"</"+n+">":"/>")};var i=r(19),o=/([a-z][a-zA-Z0-9-:]*)(="[^"]*"|={[^}]*})?/g,a=/^\s*$/,u=/<!--((?!-->)[\s\S])*-->/g,l=/(<)(\/?)([a-z][a-z0-9-:]*)((?:\s+[a-z][a-z0-9-:]*(?:="[^"]*"|={[^}]*})?)*)\s*(\/?)>/gi,c={img:1,input:1,br:1,col:1},s=/&#?[0-9a-z]{2,5};/g,f={amp:"&",gt:">",lt:"<",quot:'"',nbsp:" "},p={34:"&quot;",38:"&amp;",39:"&#39;",60:"&lt;",62:"&gt;"},v=/["'&<>]/g,m=function FN_ESCAPE_XML_ENTITY(e){return p[e.charCodeAt(0)]},y=function FN_XML_ENTITY(e){var n=e.substring(1,e.length-1);return"#"===n[0]?String.fromCharCode(+n.slice(1)):f[n]||" "},g=function skipQoutes(e){return'"'===e[0]&&'"'===e[e.length-1]?e.slice(1,-1):e};n.skipQoutes=g;var b=function decodeXmlEntities(e){return String(e||"").replace(s,y)};n.decodeXmlEntities=b;var k=function addNode(e,n){var r={tag:n};return(e.nodes||(e.nodes=[])).push(r),r},_=function parseAttrs(e,n){if(n){e.attrs={};for(var r=o.exec(n);r;r=o.exec(n)){var a=!r[2]||(0,i.scalarParse)(b(g(r[2].slice(1))));e.attrs[r[1]]=a}}},S=function escapeXml(e){return e?(""+e).replace(v,m):""};n.escapeXml=S;var x=function attributesToString(e){return"object"==typeof e?Array.isArray(e)?e.length?"["+attributesToString(e[0])+" x"+e.length+"]":"[]":"{"+Object.keys(e).toString()+"}":e};n.attributesToString=x;n.xmlParse=function xmlParse(e){for(var n=[{tag:"#root"}],r=String(e).trim().replace(u,""),i=0,o=l.exec(r);o;o=l.exec(r)){var s=o.index&&r.slice(i,o.index);if(s&&!s.match(a))k(n[0],"#text").attrs={text:b(s)};if(o[2]){if(n[0].tag!==o[3])throw new Error(" XML Parse closing tag does not match at: "+o.index+" near "+o.input.slice(Math.max(o.index-150,0),o.index)+"^^^^"+o.input.slice(o.index,Math.min(o.index+150,o.input.length)));n.shift()}else{var f=k(n[0],o[3]);if(_(f,o[4].trim()),!o[5]&&!(o[3]in c)&&(n.unshift(f),1===n.length))throw new Error("Parse error at: "+o[0])}i=l.lastIndex}return n[0].nodes||[]}},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createListeners=function createListeners(){var e=new Set;return{add:function add(n){return e.add(n),function(){return e.delete(n)}},notify:function notify(n){e.forEach((function(e){return e(n)}))}}}},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.compileExpression=function compileExpression(e){if("string"!=typeof e)return function(){return e};if(":"===e[0])return function resourceExpression(e){var n=compilePipeExpression(e),r=n.key,i=n.pipec,o=stringInterpolation(r);return i.length?function(e){return i(e,e.res(o(e)))}:function(e){return e.res(o(e))}}(e.slice(1).trim());if(!e.includes("{")){var n=(0,u.scalarParse)(e);return function(){return n}}if(e.match(l))return placeholder(e.slice(1,-1).trim());return stringInterpolation(e)},n.compilePipeExpression=compilePipeExpression,n.withPipes=withPipes;var o=i(r(10)),a=i(r(18)),u=r(7),l=/^\{([^}]+)\}$/,c=/\{([^}]+)\}/g,s=function withNoPipes(e,n){return n};function withPipes(e){return e.length?function(n,r){return e.reduce((function(e,r){return n.applyPipe(r,e)}),r)}:s}function compilePipeExpression(e){var n=function splitExpression(e){return e.split("|").map((function(e){return e.trim()}))}(e),r=(0,a.default)(n),i=r[0],l=r.slice(1),c=i.split("="),s=(0,o.default)(c,2),f=s[0],p=s[1];return{key:f,hardValue:void 0===p?void 0:(0,u.scalarParse)(p),pipec:withPipes(l)}}function stringInterpolation(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e.trim().replace(c,(function(e,r){return n.push(placeholder(r)),"{{"+(n.length-1)+"}}"}));return n.length?function(e){return r.replace(/\{\{(\d+)\}\}/g,(function(r,i){var o=n[Number(i)](e);return o||0===o?String(o):""})).replace(/\s+/g," ")}:function(e){return r}}function placeholder(e){var n=compilePipeExpression(e),r=n.key,i=n.pipec,o=null;if(":"===r[0]){var a=r.slice(1);o=function fn(e){return e.res(a)}}else if("="===r[0]){var l=(0,u.scalarParse)(r.slice(1));o=function fn(){return l}}else o=function fn(e){return e.getFromScope(r)};return i.length?function(e){return i(e,o(e))}:o}},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.stringifyState=n.methodName=n.fnName=n.applyValue=void 0;var o=i(r(10)),a=r(7);n.applyValue=function applyValue(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.identity;return null!=e&&e.then?e.then(n):n(e)};n.fnName=function fnName(e){return(/^function\s+([\w$]+)\s*\(/.exec(e.toString())||[])[1]||(0,a.nextId)("C")};n.methodName=function methodName(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=""+(e||"");return n+r[0].toUpperCase()+r.slice(1)};n.stringifyState=function stringifyState(e){if(!e)return"";var n=[];return Object.entries(e).forEach((function(e){var r=(0,o.default)(e,2),i=r[0],u=r[1];u&&"$"!==i[0]&&n.push(" "+i+'="'+(0,a.attributesToString)(u)+'"')})),n.length?n.join(""):""}},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.registerTypes=n.getByTag=n.REGISTRY=n.ComponentDefinition=void 0;var o=i(r(1)),a=i(r(2)),u=r(12),l=r(7),c=r(31),s=function(){function ComponentDefinition(e){var n=e.tag,r=e.template,i=e.Ctor,a=e.unknown,u=void 0!==a&&a;(0,o.default)(this,ComponentDefinition),this.unknown=!1,this.tag=n,this.template=r,this.Ctor=i,this.unknown=u}return(0,a.default)(ComponentDefinition,[{key:"content",get:function get(){return this.$templateContent||(this.$templateContent=(0,u.compileNodes)((0,l.xmlParse)(this.template)))}}]),ComponentDefinition}();n.ComponentDefinition=s;var f=new Map;n.REGISTRY=f;var p=function setInfo(e){return f.set(e.tag,new s(e))},v=function registerType(e){"string"==typeof e?e.replace(/<component\s+id="(.+)">([\s\S]*?)<\/component>/gm,(function(e,n,r){return p({tag:n,template:r.trim()}),""})):p("function"==typeof e?{Ctor:e,tag:e.name||(0,c.fnName)(e)}:e)};n.registerTypes=function registerTypes(e){return null==e?void 0:e.forEach(v)};n.getByTag=function getByTag(e){return f.get(e)||function notFound(e){return new s({tag:e,unknown:!0,template:"<b>??"+e+"??</b>"})}(e)}},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i={NavigationService:!0,ServiceWorker:!0,Service:!0,ToastService:!0,Loader:!0,Invoke:!0,ErrorHandlingService:!0,FormController:!0};Object.defineProperty(n,"ErrorHandlingService",{enumerable:!0,get:function get(){return f.ErrorHandlingService}}),Object.defineProperty(n,"FormController",{enumerable:!0,get:function get(){return p.FormController}}),Object.defineProperty(n,"Invoke",{enumerable:!0,get:function get(){return s.Invoke}}),Object.defineProperty(n,"Loader",{enumerable:!0,get:function get(){return c.Loader}}),Object.defineProperty(n,"NavigationService",{enumerable:!0,get:function get(){return o.NavigationService}}),Object.defineProperty(n,"Service",{enumerable:!0,get:function get(){return u.Service}}),Object.defineProperty(n,"ServiceWorker",{enumerable:!0,get:function get(){return a.ServiceWorker}}),Object.defineProperty(n,"ToastService",{enumerable:!0,get:function get(){return l.ToastService}});var o=r(89),a=r(90),u=r(8),l=r(91),c=r(93),s=r(94),f=r(95),p=r(34),v=r(96);Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in n&&n[e]===v[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return v[e]}}))}));var m=r(97);Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in n&&n[e]===m[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return m[e]}}))}));var y=r(99);Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in n&&n[e]===y[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return y[e]}}))}));var g=r(101);Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in n&&n[e]===g[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return g[e]}}))}))},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.FormController=void 0;var o=i(r(11)),a=i(r(10)),u=i(r(1)),l=i(r(2)),c=i(r(5)),s=i(r(6)),f=i(r(4)),p=i(r(3)),v=r(7),m=r(8);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,i=(0,f.default)(e);if(n){var o=(0,f.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,s.default)(this,r)}}var y=function getFieldsGroups(e,n){return Object.values((0,v.arrayGroupBy)(e,"group")).map((function(e){return(0,p.default)({name:(null==n?void 0:n[e.id])||e.id},e)}))},g=function(e){(0,c.default)(FormController,e);var n=_createSuper(FormController);function FormController(){var e;(0,u.default)(this,FormController);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).data={},e}return(0,l.default)(FormController,[{key:"setData",value:function setData(e){var n=(0,p.default)({},e);this.data=n}},{key:"fieldsGroups",get:function get(){return y(this.fieldProps,this.groups)}},{key:"tabsInfo",get:function get(){var e,n=this,r=Object.values((0,v.arrayGroupBy)(this.fieldProps,(function(e){var n=e.tab;return void 0===n?"tab":n}))).map((function(e){var r,i=e.id,o=e.items;return{id:i,name:(null==(r=n.tabs)?void 0:r[i])||i,items:y(o,n.groups)}}));return{enabled:r.length>1,initialTab:null==r||null==(e=r[0])?void 0:e.id,tabs:r}}},{key:"resolveEnum",value:function resolveEnum(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;if("["===e[0])return e.slice(1,e.length-1).split(",").map((function(e){return e.trim().split("=")})).map((function(e){var n=(0,a.default)(e,2),r=n[0],i=n[1];return{id:r,name:void 0===i?r:i}}));if(!e.includes("."))return this.res("enums."+e)||[];var r,i=(0,v.strFormat)(e,n).split("."),o=(0,a.default)(i,3),u=o[0],l=o[1],c=o[2],s=this.res("enums."+u)||[];return c?(null==(r=s.find((function(e){return e.id===l})))?void 0:r[c])||[]:s}},{key:"fieldProps",get:function get(){var e,n=this;return(null==(e=this.meta)||null==e.map?void 0:e.map((function(e){var r=e.id,i=e.visible,a=e.disabled,u=void 0!==a&&a,l=e.caption,c=e.name,s=e.typeSpec,f=n,m=n.data,y=m[r];return(0,p.default)({},e,{error:f.error&&f.error.fields&&f.error.fields[r]||null,get disabled(){return(0,v.getPredicat)(u)(m)},get visible(){return(0,v.getPredicat)(i||"true")(m)},get options(){return f.resolveEnum(s,m)},value:void 0===y?null:y,caption:l||c,data:m,onChange:function onChange(e){var i=e.value,a=e.key;n.data=(0,p.default)({},n.data,(0,o.default)({},a||r,i)),null==n.change||n.change(n.data)}})})))||[]}}]),FormController}(m.Service);n.FormController=g},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.getSuggestions=n.applyNavInfo=n.analyzeDataByTags=n.Item=void 0;var o=i(r(3)),a=i(r(16)),u=i(r(1)),l=i(r(2)),c=i(r(9)),s=i(r(10)),f=r(7),p=["$"],v=["$row","$navInfo","$"];n.analyzeDataByTags=function analyzeDataByTags(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4?arguments[4]:void 0,a=Object.entries(n).filter((function(e){var n=(0,s.default)(e,2);n[0];return n[1]})).map((function(e){return(0,s.default)(e,1)[0]})),u=a.length;if(o){var l=o.split(","),f=l.slice(0,u),p=u?e.filter((function(e){return!f.find((function(n,r){return e[n]!=a[r]}))})):e,v={};return u&&(v["*"]={id:a[u-1],name:a.join(" ➡ "),count:0,selected:u>0}),p.forEach((function(e){var r=String(e[l[u]]||"");if(r){var i=v[r]||(v[r]={id:r,name:r,count:0,selected:n[r]});i.selected||i.count++}})),i.push.apply(i,(0,c.default)(Object.values(v))),p}if(u||!r){var m=e.filter((function(e){return a.reduce((function(n,r){return n&&e.getLabels().has(r)}),!0)})),y={};return a.forEach((function(e){y[e]={id:e,name:e,count:0,selected:!0}})),m.forEach((function(e){e.getLabels().forEach((function(e){var r=y[e]||(y[e]={id:e,name:e,count:0,selected:n[e],nonSelectable:!0});r.selected||(r.nonSelectable=!1,r.count++)}))})),i.push.apply(i,(0,c.default)(Object.values(y))),i.sort((function(e,n){return e.selected===n.selected?e.id>n.id?1:-1:e.selected?-1:1})),m}return i.push.apply(i,(0,c.default)(r.split(",").map((function(e){return{id:e,name:e,count:0,selected:!1}})))),e.forEach((function(e){i.forEach((function(n){e.getLabels().has(n.id)&&n.count++}))})),e};n.getSuggestions=function getSuggestions(e,n){if(!n)return null;var r={};e.forEach((function(e){return e.$searchData.replace(/[a-z0-9а-яёўі]{3,}/g,(function(e){return r[e]=1,""}))}));var i=n.toLowerCase();return(0,f.arraySortBy)(Object.keys(r).filter((function(e){return e.startsWith(i)})).map((function(e){return{name:e,id:e}})),"name")};n.applyNavInfo=function applyNavInfo(e){var n=null;return e?e.map((function(r,i){var o;return r.$navInfo={prev:n,index:i,total:e.length},null!=(o=n)&&o.$navInfo&&(n.$navInfo.next=r),n=r,r})):null};var m=function(){function Item(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(e.$,(0,a.default)(e,p));(0,u.default)(this,Item),this.$={},(0,o.default)(this,n)}return(0,l.default)(Item,[{key:"getLabels",value:function getLabels(){var e="labels";return this.$[e]||(this.$[e]=new Set(String(this[e]||this.labels).split(",").filter(Boolean)))}},{key:"$searchData",get:function get(){return"searchData"in this.$||(this.$.searchData=String(this.searchData||this.name).toLowerCase()),this.$.searchData}},{key:"$dataset",get:function get(){this.$row,this.$navInfo,this.$;return(0,a.default)(this,v)}}]),Item}();n.Item=m},function(e,n,r){e.exports=r(106)},function(e,n,r){e.exports=r(38)},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.arrmatura=arrmatura;var o=i(r(3)),a=i(r(9)),u=r(41),l=r(72),c=_interopRequireWildcard(r(7)),s=i(r(76)),f=_interopRequireWildcard(r(33)),p=i(r(122));function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var n=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?r:n})(e)}function _interopRequireWildcard(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache(n);if(r&&r.has(e))return r.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(i,a,u):i[a]=e[a]}return i.default=e,r&&r.set(e,i),i}function arrmatura(e,n){var r=n.rootElement,i=n.pipes,f=n.functions,v=void 0===f?i:f,m=n.types,y=void 0===m?[]:m,g=n.resources,b={platform:new l.WebPlatform(r),template:e,types:[].concat((0,a.default)(s.default),(0,a.default)(y)),functions:(0,o.default)({},c,(0,p.default)(arrmatura),v),resources:g},k=(0,u.launchArrmatura)(b);window.addEventListener("beforeunload",(function(){return k.done()}))}arrmatura.lib=c,arrmatura.launchArrmatura=u.launchArrmatura,arrmatura.services=f,Object.defineProperty(window,"arrmatura",{value:arrmatura})},function(e,n,r){var i=r(22);e.exports=function _arrayWithoutHoles(e){if(Array.isArray(e))return i(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.launchArrmatura=void 0;var i=r(42);n.launchArrmatura=function launchArrmatura(e){var n=new i.CRootNode(e).createEntity();return n.recontent(),n}},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.CRootNode=void 0;var o=i(r(18)),a=i(r(1)),u=i(r(2)),l=i(r(5)),c=i(r(6)),s=i(r(4)),f=r(13),p=r(12),v=r(14),m=r(28),y=r(32);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,i=(0,s.default)(e);if(n){var o=(0,s.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,c.default)(this,r)}}var g=function(e){(0,l.default)(Root,e);var n=_createSuper(Root);function Root(){return(0,a.default)(this,Root),n.apply(this,arguments)}return(0,u.default)(Root,[{key:"displayName",get:function get(){return"Arrmatura"}},{key:"platform",get:function get(){return this.node.platform}},{key:"children",get:function get(){return this.$children}},{key:"res",value:function res(e){var n="string"==typeof e?e.split("."):e,r=(0,o.default)(n),i=r[0],a=r.slice(1),u=this.node.resources,l=i?null==u?void 0:u[i]:u;return l&&0!==a.length?1===a.length?l[a[0]]:a.reduce((function(e,n){return e?e[n]:null}),l):l}},{key:"pipe",value:function pipe(e){var n=e.split("."),r=(0,o.default)(n),i=r[0],a=r.slice(1),u=this.node.functions[i];return u&&0!==a.length?1===a.length?u[a[0]]:a.reduce((function(e,n){return e?e[n]:null}),u):u}}]),Root}(v.Entity),b=function(e){(0,l.default)(CRootNode,e);var n=_createSuper(CRootNode);function CRootNode(e){var r,i=e.template,o=e.types,u=e.functions,l=e.resources,c=e.platform;return(0,a.default)(this,CRootNode),r=n.call(this),(0,y.registerTypes)(o),r.functions=u||{},r.resources=l||{},r.platform=c,r.content=(0,p.compileNodes)((0,m.xmlParse)(i)),r}return(0,u.default)(CRootNode,[{key:"EntityConstructor",get:function get(){return g}}]),CRootNode}(f.EFactory);n.CRootNode=b},function(e,n){function _setPrototypeOf(n,r){return e.exports=_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,n){return e.__proto__=n,e},e.exports.default=e.exports,e.exports.__esModule=!0,_setPrototypeOf(n,r)}e.exports=_setPrototypeOf,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){function _typeof(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=_typeof=function _typeof(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=_typeof=function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),_typeof(n)}e.exports=_typeof,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function _iterableToArrayLimit(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,a=[],u=!0,l=!1;try{for(r=r.call(e);!(u=(i=r.next()).done)&&(a.push(i.value),!n||a.length!==n);u=!0);}catch(e){l=!0,o=e}finally{try{u||null==r.return||r.return()}finally{if(l)throw o}}return a}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i={arraySortBy:!0};Object.defineProperty(n,"arraySortBy",{enumerable:!0,get:function get(){return a.arraySortBy}});var o=r(48);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in n&&n[e]===o[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return o[e]}}))}));var a=r(49),u=r(50);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in n&&n[e]===u[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return u[e]}}))}));var l=r(51);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in n&&n[e]===l[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return l[e]}}))}))},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.arrayGroupBy=void 0;var i=r(26);n.arrayGroupBy=function arrayGroupBy(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"type",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=function iter(e,n){var i=r[e]||(r[e]={id:e,count:0,items:[]});i.count++,(i.items||(i.items=[])).push(n)};return null==e||e.forEach((function(e){return o((0,i.gettus)(e,n),e)})),r}},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.arraySortBy=n.ComparatorResult=n.ComparatorDirection=void 0;var o,a,u=i(r(9));n.ComparatorDirection=o,function(e){e[e.DESC=-1]="DESC",e[e.ASC=1]="ASC"}(o||(n.ComparatorDirection=o={})),n.ComparatorResult=a,function(e){e[e.EQ=0]="EQ",e[e.LESS=-1]="LESS",e[e.MORE=1]="MORE"}(a||(n.ComparatorResult=a={}));var l=function sortByComparator(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=1===n?1:-1,i=1===n?-1:1;if("string"==typeof e){var o=e;return"-"===o[0]&&(r=-1,i=1,o=e.substr(1)),function(e,n){var a=e[o],u=n[o];return a<u?i:a>u?r:0}}return function(n,o){var a=e(n),u=e(o);return a<u?i:a>u?r:0}};n.arraySortBy=function sortBy(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.ASC;return e?(0,u.default)(e).sort(l(n,r)):[]}},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.arrayToObject=void 0;n.arrayToObject=function arrayToObject(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",r=arguments.length>2?arguments[2]:void 0,i={};if(e){var o="string"==typeof n?function(e){return e[n]}:n,a="string"==typeof r?function(e){return e[r]}:r;e.forEach((function(e){i[o(e)]=a?a(e):e}))}return i}},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.split=n.slice=n.includes=n.find=n.filter=void 0;n.includes=function includes(e,n){return null==e||null==e.includes?void 0:e.includes(n)};n.slice=function slice(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return(null==e||null==e.slice?void 0:e.slice(n,r))||[]};n.split=function split(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return(null==e||null==e.split?void 0:e.split(n))||[]};n.find=function find(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";return null==e||null==e.find?void 0:e.find((function(e){return e[r]==n}))};n.filter=function filter(e,n,r){return null==e||null==e.filter?void 0:e.filter((function(e){return!e[n]||e[n]==r}))}},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.dateFormat=n.date=void 0,n.dateOf=dateOf,n.monthName=n.fractions=n.formatTimezone=n.firstOfWeek=n.daysInMonth=n.dateParseISO8601=void 0,n.setDefaultDateFormat=function setDefaultDateFormat(e){l=e};var i=r(27);function pad(e){var n=String(e);return n.length<2&&(n="0"+n),n}n.daysInMonth=function daysInMonth(e,n){return new Date(n,e+1,0).getDate()};n.firstOfWeek=function firstOfWeek(e){var n=dateOf(e);return n?new Date(n.getFullYear(),n.getMonth(),n.getDate()-n.getDay()):null};var o=function monthName(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,i.t)("monthNames"+n+"."+e)};n.monthName=o;n.fractions=function fractions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()]};var a=function formatTimezone(e){var n=Number(e);return n?n>=0?"+"+pad(n/60)+":"+pad(n%60):"-"+pad(-n/60)+":"+pad(-n%60):""};n.formatTimezone=a;var u={hh:function hh(e){return pad(e.getHours())},ii:function ii(e){return pad(e.getMinutes())},hi:function hi(e){return pad(e.getHours())+":"+pad(e.getMinutes())},dd:function dd(e){return pad(e.getDate())},w:function w(e){return""+(0,i.t)("dayNames."+e.getDay())},ww:function ww(e){return""+(0,i.t)("dayNamesShort."+e.getDay())},d:function d(e){return""+e.getDate()},mmmm:function mmmm(e){return o(e.getMonth()+1,"")},mmm:function mmm(e){return o(e.getMonth()+1,"Short")},mm:function mm(e){return pad(e.getMonth()+1)},MM:function MM(e){return pad(e.getMonth()+1)},yyyy:function yyyy(e){return""+e.getFullYear()},ll:function ll(e){return""+e.getTime()},z:function z(e){return"Z"+a(e.getTimezoneOffset())}},l="yyyy-mm-dd";var c=function dateParseISO8601(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(new Date).getTimezoneOffset();if(!e)return null;10===e.length&&(e+="T12:00");var r=/^([0-9]{4})-([0-9]{2})-([0-9]{2})[ T]([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(Z?)(([+-])([0-9]{2})([0-9]{2}))?/,i=r.exec(e);if(!i)return null;var o=i[8]?i[9]?("+"===i[10]?-1:1)*(60*parseInt(i[11])+parseInt(i[12])):0:n,a=Date.UTC(parseInt(i[1]),parseInt(i[2])-1,parseInt(i[3]),parseInt(i[4]),parseInt(i[5]),i[6]&&parseInt(i[6])||0,i[7]&&parseFloat(i[7])||0);return new Date(a+6e4*o)};n.dateParseISO8601=c;var s=function dateFormat(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;if(!e)return"";var r=dateOf(e);return r?n.replace(/[_]/g,"\n").replace(/[hidwmylz]+/g,(function(e){return e in u?u[e](r):e})):""};function dateOf(e){if(null==e)return null;if("number"==typeof e)return new Date(e);if("object"==typeof e){var n=e;if(n.getTime)return new Date(n.getTime());var r=e;if(r.toDate)return r.toDate()}return"string"==typeof e?c(e):null}n.dateFormat=s;n.date=function date(e){return s(dateOf(e))}},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={monthNames:["","January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]}},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={monthNames:["","Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["","Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],dayNamesShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]}},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hash=n.guid=void 0;var r=function s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};n.guid=function guid(){return""+r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r()};n.hash=function hash(e){var n,r,i=1,o=0;if(e)for(i=0,n=e.length-1;n>=0;n--)i=0!==(o=266338304&(i=(i<<6&268435455)+(r=e.charCodeAt(n))+(r<<14)))?i^o>>21:i;return String(i)}},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.nextId=void 0;var r=1;n.nextId=function nextId(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e+r++}},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.curry=void 0;var o=i(r(9)),a=function _curry(e,n,r){var i=function fx(n){return n.length>=r?e.apply(void 0,(0,o.default)(n)):_curry(e,n,r-n.length)};return function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i([].concat((0,o.default)(n),r))}};n.curry=function curry(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return a(e,r,e.length)}},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.noop=void 0;n.noop=function noop(){}},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.identity=void 0;n.identity=function identity(e){return e}},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.truthy=n.then=n.plus=n.or=n.not=n.multiply=n.minus=n.min=n.max=n.log=n.less=n.isUndefined=n.isTrue=n.isNotANumber=n.isFalse=n.greater=n.fnTick=n.fnSwapArgs=n.fnCompose=n.fnCall=n.fnBindArgs=n.equals=n.assert=n.and=void 0;n.isTrue=function isTrue(e){return!0===e};n.isFalse=function isFalse(e){return!1===e};n.isNotANumber=function isNotANumber(e){return isNaN(e)};n.isUndefined=function isUndefined(e){return void 0===e};n.then=function then(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e?n:r};n.truthy=function truthy(e){return!!e};n.not=function not(e){return!e};n.or=function or(e,n){return e||n};n.and=function and(e,n){return e&&n};n.equals=function equals(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e==n?r:i};n.greater=function greater(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e>n?r:i};n.less=function less(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e<n?r:i};var r=Math.min;n.min=r;var i=Math.max;n.max=i;n.plus=function plus(e,n){return+e+ +n};n.minus=function minus(e,n){return+e-+n};n.multiply=function multiply(e,n){return+e*+n};n.fnBindArgs=function fnBindArgs(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return null==e?void 0:e.bind.apply(e,[null].concat(r))};n.fnCall=function fnCall(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return e.apply(void 0,r)};n.assert=function assert(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Error;if(!e)throw"string"==typeof n?new r(n):n};n.log=function log(e,n){return console.log(n||"pipe",e),e};n.fnTick=function fnTick(e,n){return function(){return setTimeout(e,n)}};n.fnSwapArgs=function fnSwapArgs(e){return function(n,r){return e(r,n)}};n.fnCompose=function fnCompose(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(e){return n.reduceRight((function(e,n){return n(e)}),e)}}},function(e,n){function str(e){return null==e?"":String(e)}function capitalize(e){var n=str(e);return n?n[0].toUpperCase()+n.slice(1):""}function camelize(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_";return str(e).split(n).map((function(e,n){return n?capitalize(e):e})).join("")}Object.defineProperty(n,"__esModule",{value:!0}),n.camelize=camelize,n.capitalize=capitalize,n.mirror=n.lowerCase=n.head=void 0,n.padLeft=function padLeft(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ",i=str(e);for(;i.length<n;)i=""+r+i;return i},n.snakeCase=n.properCase=void 0,n.str=str,n.strEnhance=void 0,n.strFormat=function strFormat(e,n){return str(e).replace(/\{([\S]+)\}/i,(function(e,r){return null!=(n&&n[r])?str(n[r]):""}))},n.upperCase=n.tail=void 0;n.snakeCase=function snakeCase(e){return str(e).replace(/([a-z])([A-Z])/g,"$1_$2")};n.properCase=function properCase(e){return capitalize(camelize(e))};n.upperCase=function upperCase(e){return str(e).toUpperCase()};n.lowerCase=function lowerCase(e){return str(e).toLowerCase()};n.strEnhance=function strEnhance(e,n){return e?(""+(n||"*")).replace("*",e):""};n.tail=function tail(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";if(!e)return"";var r=e.lastIndexOf(n);return-1===r?e:e.slice(r+n.length)};n.head=function head(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";if(!e)return"";var r=e.indexOf(n);return-1===r?e:e.slice(0,r)};n.mirror=function mirror(e){return str(e).split("").reduce((function(e,n){return n+e}),"")}},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.encodus=n.decodus=void 0;var i=r(19);n.decodus=function decodus(e){if(e){var n=decodeURIComponent(e);if("{[".indexOf(n[0])>-1)try{return JSON.parse(n)}catch(e){return}return(0,i.scalarParse)(n)}};n.encodus=function encodus(e){return void 0===e?"":"object"==typeof e?e?encodeURIComponent(JSON.stringify(e)):"null":encodeURIComponent(String(e))}},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.getPredicat=void 0;var o=i(r(10)),a=function compilePredicatChunk(e){var n=e.match(/(\w+)\s*(!?)=\s*([,\wа-яА-Я]+)/);if(!n)return"!"===e[0]?function(n){return!n[e.slice(1)]}:function(n){return!!n[e]};var r=(0,o.default)(n,4),i=(r[0],r[1]),a=r[2],u=r[3],l=function fn(e){return u.includes(String(e[i]))};return a?function(e){return!!e[i]&&!l(e)}:l},u=function compilePredicat(e){if(!e||"FALSE"===e||"false"===e)return function(){return!1};if("ALWAYS"===e||"TRUE"===e||"true"===e||!0===e)return function(){return!0};var n=String(e).split("&&").map((function(e){return e.trim()})).filter(Boolean).map(a);return function(e){return!!n.find((function(n){return n(e)}))}},l={};n.getPredicat=function getPredicat(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return l[""+e]||(l[""+e]=u(e))}},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.urlStringify=n.urlParse=n.urlAppendParams=void 0;var o=i(r(10));n.urlParse=function urlParse(e){var n,r={path:[],params:{},host:""};if(!e)return r;var i=e;(n=i.indexOf(":"))>-1&&(r.protocol=i.slice(0,n),i=i.slice(n+1)),(n=i.indexOf("#"))>-1&&(r.hash=decodeURIComponent(i.slice(n+1)),i=i.slice(0,n)),(n=i.indexOf("?"))>-1&&(i.slice(n+1).replace(/\+/g," ").split("&").forEach((function(e){var n=e.split("="),i=(0,o.default)(n,2),a=i[0],u=i[1];u&&(r.params[decodeURIComponent(a)]=decodeURIComponent(u))})),i=i.slice(0,n)),r.path=i.split("/").map(decodeURIComponent);var a=r.path;return a.length>2&&!a[0]&&!a[1]&&(a.shift(),a.shift(),r.host=a.shift()||""),r};n.urlStringify=function urlStringify(e){var n="";if(!e)return n;e.host&&(e.protocol&&(n+=e.protocol+":"),n+="//"+e.host),null!=e&&e.path.length&&(n+="/"+e.path.map(encodeURIComponent).join("/"));var r=e.params,i=Object.keys(r).filter((function(e){return null!=r[e]}));return i.length&&(n+=("?"+i.map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])})).join("&")).replace(/ /g,"+")),e.hash&&(n+=("#"===e.hash[0]?"":"#")+encodeURIComponent(e.hash)),n};n.urlAppendParams=function urlAppendParams(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null==(e=Object.entries(r))?void 0:e.map((function(e){var n=(0,o.default)(e,2),r=n[0],i=n[1];return r+"="+encodeURIComponent(i)})).join("&");return[n,i].filter(Boolean).join(n.includes("?")?"&":"?")}},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.Slot=n.Composite=n.CSlotNode=n.CFragmentNode=n.CCompositeNode=void 0;var o=i(r(1)),a=i(r(2)),u=i(r(5)),l=i(r(6)),c=i(r(4)),s=i(r(10)),f=r(13),p=r(12),v=r(14),m=r(32);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,i=(0,c.default)(e);if(n){var o=(0,c.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,l.default)(this,r)}}var y=function(e){(0,u.default)(Slot,e);var n=_createSuper(Slot);function Slot(){return(0,o.default)(this,Slot),n.apply(this,arguments)}return(0,a.default)(Slot,[{key:"displayName",get:function get(){return"🔸"}},{key:"compositeScope",get:function get(){return this.$scope}},{key:"content",get:function get(){return this.compositeScope.slotContent(this.node.id)}},{key:"recontentScope",get:function get(){return this.compositeScope.$scope}}]),Slot}(v.Entity);n.Slot=y;var g=function(e){(0,u.default)(CSlotNode,e);var n=_createSuper(CSlotNode);function CSlotNode(e){var r,i;return(0,o.default)(this,CSlotNode),(i=n.call(this)).id=null==(r=e.attrs)?void 0:r.id,i}return(0,a.default)(CSlotNode,[{key:"EntityConstructor",get:function get(){return y}}]),CSlotNode}(f.EFactory);n.CSlotNode=g;var b=function(e){(0,u.default)(Composite,e);var n=_createSuper(Composite);function Composite(){return(0,o.default)(this,Composite),n.apply(this,arguments)}return(0,a.default)(Composite,[{key:"displayName",get:function get(){return"💠"+this.node.definition.tag}},{key:"content",get:function get(){return this.node.definition.content}},{key:"recontentScope",get:function get(){return this}},{key:"slotContent",value:function slotContent(e){return this.node.slotContent[e||"default"]}},{key:"createImplementation",value:function createImplementation(e){return this.platform.createComponent(this.node.definition,e,this)}}]),Composite}(v.Entity);n.Composite=b;var k=function(e){(0,u.default)(CCompositeNode,e);var n=_createSuper(CCompositeNode);function CCompositeNode(e){var r,i=e.tag,a=e.attrs,u=e.nodes;return(0,o.default)(this,CCompositeNode),(r=n.call(this)).definition=(0,m.getByTag)(i),r.compileAttributes(a),r.slotContent=function compileSlots(e,n){var r=(null==n?void 0:n.reduce((function(n,r){var i=r.tag.startsWith(e+":"),o=i?r.tag.split(":")[1]:"default";return n[o]=(n[o]||[]).concat(i?r.nodes||[]:r),n}),{}))||{};return Object.entries(r).reduce((function(e,n){var r=(0,s.default)(n,2),i=r[0],o=r[1];return e[i]=(0,p.compileNodes)(o),e}),{})}(i,u),r}return(0,a.default)(CCompositeNode,[{key:"EntityConstructor",get:function get(){return b}}]),CCompositeNode}(f.EFactory);n.CCompositeNode=k;var _=function(e){(0,u.default)(CFragmentNode,e);var n=_createSuper(CFragmentNode);function CFragmentNode(e){var r,i=e.nodes;return(0,o.default)(this,CFragmentNode),(r=n.call(this)).content=(0,p.compileNodes)(i),r}return(0,a.default)(CFragmentNode,[{key:"EntityConstructor",get:function get(){return v.Entity}}]),CFragmentNode}(f.EFactory);n.CFragmentNode=_},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.DynamicTag=n.CDynamicTagNode=void 0;var o=i(r(3)),a=i(r(1)),u=i(r(2)),l=i(r(5)),c=i(r(6)),s=i(r(4)),f=r(13),p=r(12);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,i=(0,s.default)(e);if(n){var o=(0,s.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,c.default)(this,r)}}var v=function(e){(0,l.default)(DynamicTag,e);var n=_createSuper(DynamicTag);function DynamicTag(){return(0,a.default)(this,DynamicTag),n.apply(this,arguments)}return(0,u.default)(DynamicTag,[{key:"content",get:function get(){var e=this.$impl.tag,n=this.node.uid+":"+e;return new Map([[n,(0,o.default)((0,p.compileNode)((0,o.default)(this.node.xml,{tag:e})),{uid:n})]])}}]),DynamicTag}(r(14).Entity);n.DynamicTag=v;var m=function(e){(0,l.default)(CDynamicTagNode,e);var n=_createSuper(CDynamicTagNode);function CDynamicTagNode(e,r){var i;return(0,a.default)(this,CDynamicTagNode),(i=n.call(this)).compileAttribute("tag",r),i.xml=e,i}return(0,u.default)(CDynamicTagNode,[{key:"EntityConstructor",get:function get(){return v}}]),CDynamicTagNode}(f.EFactory);n.CDynamicTagNode=m},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.TextElement=n.Element=n.CTextElementNode=n.CElementNode=void 0;var o=i(r(1)),a=i(r(2)),u=i(r(5)),l=i(r(6)),c=i(r(4)),s=r(13),f=r(12),p=r(14);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,i=(0,c.default)(e);if(n){var o=(0,c.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,l.default)(this,r)}}var v=function(e){(0,u.default)(Element,e);var n=_createSuper(Element);function Element(){return(0,o.default)(this,Element),n.apply(this,arguments)}return(0,a.default)(Element,[{key:"displayName",get:function get(){return this.node.tag}},{key:"createImplementation",value:function createImplementation(e){return this.platform.createElement(this.node.tag,e,this)}}]),Element}(p.Entity);n.Element=v;var m=function(e){(0,u.default)(TextElement,e);var n=_createSuper(TextElement);function TextElement(){return(0,o.default)(this,TextElement),n.apply(this,arguments)}return(0,a.default)(TextElement,[{key:"createImplementation",value:function createImplementation(e){return this.platform.createTextElement(e,this)}}]),TextElement}(p.Entity);n.TextElement=m;var y=function(e){(0,u.default)(CElementNode,e);var n=_createSuper(CElementNode);function CElementNode(e){var r;return(0,o.default)(this,CElementNode),(r=n.call(this)).tag=e.tag,r.content=(0,f.compileNodes)(e.nodes),r.compileAttributes(e.attrs),r}return(0,a.default)(CElementNode,[{key:"EntityConstructor",get:function get(){return v}}]),CElementNode}(s.EFactory);n.CElementNode=y;var g=function(e){(0,u.default)(CTextElementNode,e);var n=_createSuper(CTextElementNode);function CTextElementNode(e){var r;return(0,o.default)(this,CTextElementNode),(r=n.call(this)).tag=e.tag,r.compileAttributes(e.attrs),r}return(0,a.default)(CTextElementNode,[{key:"EntityConstructor",get:function get(){return m}}]),CTextElementNode}(s.EFactory);n.CTextElementNode=g},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.CItemNode=n.CForNode=void 0;var o=i(r(3)),a=i(r(69)),u=i(r(10)),l=i(r(1)),c=i(r(2)),s=i(r(5)),f=i(r(6)),p=i(r(4)),v=r(13),m=r(12),y=r(14);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,i=(0,p.default)(e);if(n){var o=(0,p.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,f.default)(this,r)}}var g=function(e){(0,s.default)(Iterative,e);var n=_createSuper(Iterative);function Iterative(){var e;(0,l.default)(this,Iterative);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).pkHash={},e}return(0,c.default)(Iterative,[{key:"displayName",get:function get(){return"🔹"}},{key:"content",get:function get(){var e=this,n=this.$impl.each,r=this.node.itemNode,i=new Map;if(this.pkHash={},null!=n&&n.length){if(!n.forEach)throw new Error("[ui:for] Items has no forEach() "+n);n.forEach((function(n){var o=n.id;if(null!=o){var a=String(o);if(e.pkHash[a])console.error("ERROR: duplicate item id: "+a,n);else{e.pkHash[a]=n;var u=r.cloneWithDatum(n).addPropertyResolver((function(){return e.pkHash[a]}),r.itemName);i.set(u.uid,u)}}else console.error("ERROR: empty item id: ",n)}))}return i}}]),Iterative}(y.Entity),b=function(e){(0,s.default)(CForNode,e);var n=_createSuper(CForNode);function CForNode(e,r){var i,o=(0,u.default)(r,3),a=o[0],c=o[1],s=o[2],f=void 0===s?c:s;return(0,l.default)(this,CForNode),(i=n.call(this)).itemNode=new _(a,(0,m.compileNodes)([e])),i.compileAttribute("each","{:<".includes(f[0])?f:"{"+f+"}"),i}return(0,c.default)(CForNode,[{key:"EntityConstructor",get:function get(){return g}}]),CForNode}(v.EFactory);n.CForNode=b;var k=function(e){(0,s.default)(IterativeItem,e);var n=_createSuper(IterativeItem);function IterativeItem(){return(0,l.default)(this,IterativeItem),n.apply(this,arguments)}return(0,c.default)(IterativeItem,[{key:"displayName",get:function get(){return"🔹"}},{key:"recontentScope",get:function get(){return this}},{key:"emit",value:function emit(e,n){return this.$scope.emit(e,n)}},{key:"get",value:function get(e){var n=this.node.itemName;return e.startsWith(n+".")||e===n?(0,a.default)((0,p.default)(IterativeItem.prototype),"get",this).call(this,e):this.$scope.get(e)}}]),IterativeItem}(y.Entity),_=function(e){(0,s.default)(CItemNode,e);var n=_createSuper(CItemNode);function CItemNode(e,r){var i;return(0,l.default)(this,CItemNode),(i=n.call(this)).itemName=e,i.content=r,i}return(0,c.default)(CItemNode,[{key:"cloneWithDatum",value:function cloneWithDatum(e){var n=this.uid+"#"+e.id;return(0,o.default)(new CItemNode(this.itemName,this.content),{uid:n})}},{key:"EntityConstructor",get:function get(){return k}}]),CItemNode}(v.EFactory);n.CItemNode=_},function(e,n,r){var i=r(70);function _get(n,r,o){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=_get=Reflect.get,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=_get=function _get(e,n,r){var o=i(e,n);if(o){var a=Object.getOwnPropertyDescriptor(o,n);return a.get?a.get.call(r):a.value}},e.exports.default=e.exports,e.exports.__esModule=!0),_get(n,r,o||n)}e.exports=_get,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){var i=r(4);e.exports=function _superPropBase(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&null!==(e=i(e)););return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.CIfNode=void 0;var o=i(r(3)),a=i(r(1)),u=i(r(2)),l=i(r(5)),c=i(r(6)),s=i(r(4)),f=r(13),p=r(30),v=r(12);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,i=(0,s.default)(e);if(n){var o=(0,s.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,c.default)(this,r)}}var m=function(e){(0,l.default)(Conditional,e);var n=_createSuper(Conditional);function Conditional(){return(0,a.default)(this,Conditional),n.apply(this,arguments)}return(0,u.default)(Conditional,[{key:"content",get:function get(){return this.$impl.condition?this.node.then:this.node.else}}]),Conditional}(r(14).Entity),y=function(e){(0,l.default)(CIfNode,e);var n=_createSuper(CIfNode);function CIfNode(e,r){var i;return(0,a.default)(this,CIfNode),(i=n.call(this)).compileCondition(r),i.compileBranches(e),i}return(0,u.default)(CIfNode,[{key:"EntityConstructor",get:function get(){return m}},{key:"compileBranches",value:function compileBranches(e){var n=e.nodes,r=[e];if(null!=n&&n.length){var i=n.find((function(e){return"ui:else"===e.tag})),a=n.find((function(e){return"ui:then"===e.tag}));i?(this.else=(0,v.compileNodes)(i.nodes),r=a?a.nodes:[(0,o.default)(e,{nodes:n.filter((function(e){return e!==i}))})]):a&&(r=a.nodes)}this.then=(0,v.compileNodes)(r)}},{key:"compileCondition",value:function compileCondition(e){if("<"===e[0]&&"-"===e[1])this.addPropertyConnector(e.slice(2),(function(e){return{condition:e}}));else if("slot("===e.slice(0,5)){var n=e.slice(5,-1);this.addPropertyResolver((function(e){return null==e.$scope.slotContent?void 0:e.$scope.slotContent(n)}),"condition")}else{var r=(0,p.compileExpression)("{"===e[0]?e:"{"+e+"}");this.addPropertyResolver((function(e){return!!r(e)}),"condition")}}}]),CIfNode}(f.EFactory);n.CIfNode=y},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.WebPlatform=void 0;var o=i(r(3)),a=i(r(1)),u=i(r(2)),l=r(73),c=r(75),s=function(){function WebPlatform(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root";(0,a.default)(this,WebPlatform),"string"==typeof e&&(e=document.getElementById(e)||window.document.body),this.rootElement=e||window.document.body}return(0,u.default)(WebPlatform,[{key:"createComponent",value:function createComponent(e,n,r){var i=e.Ctor;return i?new i(n,r):(0,o.default)({},n)}},{key:"createTextElement",value:function createTextElement(e,n){return new l.DomTextElement(e)}},{key:"createElement",value:function createElement(e,n,r){return new l.DomElement(e,n,r)}},{key:"redraw",value:function redraw(e){var n=this;this.reflowId||(this.reflowId=setTimeout((function(){(0,c.reflow)(e.arrmatura.children,n.rootElement),n.reflowId=void 0}),10))}}]),WebPlatform}();n.WebPlatform=s},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.DomTextElement=n.DomElement=void 0;var o=i(r(1)),a=i(r(2)),u=r(7),l=r(74),c=function(){function DomElement(e,n,r){(0,o.default)(this,DomElement),this.$changes=new Map,this.$=r,this.$element=document.createElement(e),this.$element.impl=this}return(0,a.default)(DomElement,[{key:"done",value:function done(){var e,n;this.applyPipe("detach"),null==(e=this.$element)||null==(n=e.parentElement)||n.removeChild(this.$element)}},{key:"attachToParent",value:function attachToParent(e,n){var r=this.$element;return n?r!==n&&(e.insertBefore(r,n),this.applyPipe("attach")):e!==r.parentElement&&(e.appendChild(r),this.applyPipe("attach")),r}},{key:"stateChanged",value:function stateChanged(e){var n=this,r=this;e.forEach((function(e,i){var o;"$"!==i[0]&&(e!==r[i]&&(null==(o=n.$changes)||o.set(i,e)))}))}},{key:"applyStateChanges",value:function applyStateChanges(){var e=this,n=this,r=this.$element;this.$changes.size&&(this.$changes.forEach((function(i,o){if("$"!==o[0]){if(i!==n[o]){var a=l.ATTR_SETTERS[o];a?a(e,r,i):(0,l.setAttribute)(e,o,i)}n[o]=i}})),this.$changes.clear())}},{key:"applyPipe",value:function applyPipe(e){this[e]&&this.$.applyPipe(this[e],this.$element)}}]),DomElement}();n.DomElement=c;var s=function(){function DomTextElement(e){(0,o.default)(this,DomTextElement),this.$string=null,this.$element=document.createTextNode(String(e.text||""))}return(0,a.default)(DomTextElement,[{key:"done",value:function done(){var e;null==(e=this.$element.parentElement)||e.removeChild(this.$element)}},{key:"attachToParent",value:function attachToParent(e,n){var r=this.$element;return n?r!==n&&e.insertBefore(r,n):e!==r.parentElement&&e.appendChild(r),r}},{key:"stateChanged",value:function stateChanged(e){e.has("text")&&(this.$string=(0,u.decodeXmlEntities)(e.get("text")))}},{key:"applyStateChanges",value:function applyStateChanges(){this.$element.textContent!=this.$string&&(this.$element.textContent=this.$string)}}]),DomTextElement}();n.DomTextElement=s},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.ATTR_SETTERS=void 0,n.setAttribute=setAttribute;var o=i(r(3)),a=i(r(10)),u=function camelize(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";return(""+e).split(n).map((function(e,n){return n?e[0].toUpperCase()+e.slice(1):e})).join(r)};function setAttribute(e,n,r){var i;if(null!=r)if("function"==typeof r){if(e.$listeners||(e.$listeners=new Map),!e.$listeners.has(n)){var o=n.split(":"),u=(0,a.default)(o,2),l=u[0],c=u[1],s=void 0===c?l:c;e.$element.addEventListener(s,r,!1),e.$listeners.set(n,r)}}else e.$element.setAttribute(n,r);else if(null!=(i=e.$listeners)&&i.has(n)){var f=n.split(":"),p=(0,a.default)(f,2),v=p[0],m=p[1],y=void 0===m?v:m;e.$element.removeEventListener(y,e.$listeners.get(n)),e.$listeners.delete(n)}else e.$element.removeAttribute(n)}var l={disabled:function disabled(e,n,r){return n.disabled=!!r||null},class:function _class(e,n,r){n.className=String(r||"")},selected:function selected(e,n,r){return n.selected=!!r||null},value:function value(e,n,r){return n.value=null==r?"":r},checked:function checked(e,n,r){return n.checked=!!r},attached:function attached(){return!0},data:function data(e,n,r){var i=r;i&&n.$dataset?(Object.keys(n.$dataset).forEach((function(e){null==i[e]&&(n.dataset[u(e,"-","")]=null)})),n.$dataset=(0,o.default)({},n.$dataset,i)):n.$dataset=i?(0,o.default)({},i):n.$dataset||{},i&&Object.keys(i).forEach((function(e){n.dataset[u(e,"-","")]=i[e]}))},click:function click(e,n){return setAttribute(e,"click",(function(r){return null==e.click||e.click((0,o.default)({},n.$dataset),r),!1}))},click2:function click2(e,n){return setAttribute(e,"click2:click",(function(r){return null==e.click2||e.click2((0,o.default)({},n.$dataset),r),!1}))},blur:function blur(e,n){return setAttribute(e,"blur",(function(r){return null==e.blur||e.blur((0,o.default)({},n.$dataset),r),!1}))},focus:function focus(e,n){return setAttribute(e,"focus",(function(r){return null==e.focus||e.focus((0,o.default)({},n.$dataset),r),!1}))},dblclick:function dblclick(e,n){return setAttribute(e,"dblclick",(function(r){return null==e.dblclick||e.dblclick((0,o.default)({},n.$dataset),r),!1}))},keypress:function keypress(e,n){return setAttribute(e,"keypress:keyup",(function(r){return 13!==r.keyCode&&27!==r.keyCode&&(null==e.keypress||e.keypress((0,o.default)({value:n.value},n.$dataset),r),setTimeout((function(){return n.focus()}),0)),!1}))},enter:function enter(e,n){return setAttribute(e,"enter:keyup",(function(r){return 13===r.keyCode&&(null==e.enter||e.enter((0,o.default)({value:n.value},n.$dataset),r)),13!==r.keyCode&&27!==r.keyCode||n.blur(),!1}))},change:function change(e,n){return setAttribute(e,"change",(function(r){return null==e.change||e.change((0,o.default)({value:n.value},n.$dataset),r),!1}))},toggle:function toggle(e,n){return setAttribute(e,"toggle:change",(function(r){return null==e.toggle||e.toggle((0,o.default)({value:n.checked},n.$dataset),r),!1}))},scroll:function scroll(e,n){return setAttribute(e,"scroll",(function(r){null==e.scroll||e.scroll((0,o.default)(r,{value:n.scrollTop}))}))},scrolledDown:function scrolledDown(e,n){return setAttribute(e,"scrolledDown:scroll",(function(r){var i=e.scrolledDownGap||10,o=n.clientHeight+n.scrollTop;Math.abs(n.scrollHeight-o)<i&&o>(e._maxScrolledDownOffset||0)&&(e._maxScrolledDownOffset=o,null==e.scrolledDown||e.scrolledDown({offset:o},r))}))},touch:function touch(e,n){var r=(0,o.default)({},n.$dataset),i=function h(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(i){var o,a,u,l;return r.active=!n,r.event=i,r.xx=i.layerX||i.pageX||(null==(o=i.changedTouches)||null==(a=o[0])?void 0:a.screenX)||0,r.yy=i.layerY||i.pageY||(null==(u=i.changedTouches)||null==(l=u[0])?void 0:l.screenY)||0,r.dx=r.xx-(r.x||0),r.dy=r.yy-(r.y||0),null==e.touch||e.touch(r),!1}};setAttribute(e,"touch:touchstart",i(!1)),setAttribute(e,"touch:mousedown",i(!1)),setAttribute(e,"touch:touchcancel",i(!0)),setAttribute(e,"touch:touchend",i(!0)),setAttribute(e,"touch:mouseup",i(!0)),setAttribute(e,"touch:touchmove",i(!1)),setAttribute(e,"touch:mousemove",i(!1))}};n.ATTR_SETTERS=l},function(e,n){function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=e[r];return i}Object.defineProperty(n,"__esModule",{value:!0}),n.reflow=function reflow(e,n,r){if(e)for(var i,o=function _createForOfIteratorHelperLoose(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function _unsupportedIterableToArray(e,n){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(e,n)}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e.values());!(i=o()).done;){var a=i.value,u=a.$impl.$element;if(u){reflow(a.$children,u);var l=a.$impl;l.applyStateChanges(),r=l.attachToParent(n,r?r.nextSibling:n.firstChild)}else r=reflow(a.$children,n,r)}return r}},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(r(9)),a=i(r(77)),u=_interopRequireWildcard(r(33)),l=i(r(103)),c=_interopRequireWildcard(r(118));function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var n=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?r:n})(e)}function _interopRequireWildcard(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache(n);if(r&&r.has(e))return r.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=o?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(i,a,u):i[a]=e[a]}return i.default=e,r&&r.set(e,i),i}var s=[].concat((0,o.default)(a.default),(0,o.default)(l.default),(0,o.default)(Object.values(c)),(0,o.default)(Object.values(u)));n.default=s},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(r(78)),a=i(r(79)),u=i(r(80)),l=i(r(81)),c=i(r(82)),s=i(r(83)),f=i(r(84)),p=i(r(85)),v=i(r(86)),m=i(r(87)),y=i(r(88)),g=[o.default,l.default,a.default,c.default,s.default,v.default,p.default,f.default,u.default,m.default,y.default];n.default=g},function(e,n,r){"use strict";r.r(n),n.default='<component id="Btn">\n  <button class="\n      btn btn-{mode}\n      {primary|then:btn-primary}\n      {disabled|or:@busy|then:disabled}\n      {class}\n      {large|then:btn-lg}\n      {link|then:btn-link}\n      c-hand\n    " style="{style}" data={data} click="{action}">\n    <span ui:if="{busy}" class="mx-2" style="width:18px;">\n      <i class="loading"></i>\n    </span>\n    <Icon ui:if="busy|not|and:@icon" bundle="{iconBundle}" type="{icon}" class="mr-2"/>\n    <span ui:if="{title}" style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis">{title}</span>\n  </button>\n</component>\n\n<component id="FAB">\n  <button class="btn {tooltip|then:tooltip} tooltip-left p-0 fixed s-circle bg-error c-hand {class} {disabled|or:@busy|then:disabled}  {busy|then:loading}" style="position: fixed; border: none; right: 1.5rem; bottom: 1.5rem; width: 2.5rem; height: 2.5rem;" data-tooltip="{tooltip|or:}">\n    <div class="centroid  s-circle" style="width: 2.5rem; height: 2.5rem;" data="{data}" click="{action}">\n      <Icon type="{icon|or:plus}" />\n    </div>\n  </button>\n</component>\n'},function(e,n,r){"use strict";r.r(n),n.default='<component id="LoadingIndicator">\n  <div class="loading {large|then:loading-lg} {class}" />\n</component>\n\n<component id="EmptyData">\n  <div class="empty w100 m-0 {class}">\n    <div class="empty-icon">\n      <Icon type="{icon|or:people}" />\n    </div>\n    <p class="empty-title h5">{title}</p>\n    <p ui:if="{subtitle}" class="empty-subtitle">{subtitle}</p>\n    <div class="empty-action">\n      <ui:slot />\n    </div>\n  </div>\n</component>\n\n<component id="AsyncLoader">\n  <ui:fragment ui:if="isLoading">\n    <ui:then>\n      <EmptyData class="h100" title="{title}" subtitle="{error|then::@subtitle}" icon="{icon|or:download}">\n        <ui:fragment ui:if="error|not">\n          <ui:then>\n            <LoadingIndicator/>\n          </ui:then>\n          <ui:else>\n            <Btn mode="error" action="{onError}" title="Error: {error}"/>\n          </ui:else>\n        </ui:fragment>\n      </EmptyData>\n    </ui:then>\n    <ui:else>\n      <ui:slot />\n    </ui:else>\n  </ui:fragment>\n</component>\n\n<component id="LoadableItems">\n  <LoadingIndicator class="empty" ui:if="data|not">\n    <ui:else>\n      <h5 class="error text-error" ui:if="data.error">{data.error.message|or:@data.error}</h5>\n      <EmptyData title="{emptyCaption|or:Empty}" ui:if="data.length|not">\n        <ui:else>\n          <div style="{style}" ui:for="item of data">\n            <ui:tag tag="{itemType}" ui:props="{item}" item="{item}" context="{context}" action="{action}" />\n          </div>\n        </ui:else>\n      </EmptyData>\n    </ui:else>\n  </LoadingIndicator>\n</component>\n\n<component id="LoadableEntity">\n  <LoadingIndicator class="empty" ui:if="data|not">\n    <ui:else>\n      <h5 class="error text-error" ui:if="data.error">\n        <span>{data.error.message|or:@data.error}</span>\n        <ui:else>\n          <EmptyData title="{emptyCaption|or:Empty}" ui:if="data.id|not">\n            <ui:else>\n              <ui:tag tag="{type}" data="{data}" context="{context}" action="{action}" />\n            </ui:else>\n          </EmptyData>\n        </ui:else>\n      </h5>\n    </ui:else>\n  </LoadingIndicator>\n</component>\n\n<component id="Cell">\n  <span class="" style="padding-left: 0px">{value}</span>\n</component>\n\n<component id="EnumCell">\n  <span class="" style="padding-left: 0px">:map.{typeSpec}.{value}</span>\n</component>\n\n<component id="DateCell">\n  <span class="" style="padding-left: 0px">{value|date}</span>\n</component>\n\n<component id="Table">\n  <table style="position: relative">\n    <thead class="table-thead">\n      <tr>\n        <th class="col-index" style="position: sticky; top: -1"></th>\n        <th class="col-index" style="position: sticky; top: -1" ui:for="item of columns">\n          <span>{item.name}</span>\n          <div class="table-column-sorter" ui:if="item.sortable">\n            <span class="table-column-sorter-up off" title="↑" data-id="-{item.id}" click="{doSort}">\n              <i class="anticon anticon-caret-up"></i\n            >            </span>\n            <span class="table-column-sorter-down off" title="↓" data-id="{item.id}" click="{doSort}">\n              <i class="anticon anticon-caret-down"></i\n            >            </span>\n          </div>\n        </th>\n      </tr>\n    </thead>\n    <TableRow ui:for="item of data" data="{item}" selected="{item.selected}" columns="{columns}" kind="{kind}" />\n  </table>\n</component>\n\n<component id="TableRow">\n  <tbody class="table-tbody">\n    <tr class="table-row table-row-level-0" style="position: sticky">\n      <td class="col-index" data-id="{data.id}" click="{doItem}">\n        <div ui:if="{expandable}" role="button" class="table-row-expand-icon table-row-expanded" aria-label="Collapse row" data-selected="false" click="->">\n          <ui:else>\n            <div role="button" class="table-row-expand-icon table-row-collapsed" aria-label="Expand row" data-selected="true" click="->"></div>\n          </ui:else>\n        </div>\n      </td>\n      <td class="col-index" ui:for="col of columns">\n        <ui:tag tag="{col.type|capitalize}Cell" ui:props="{col}" value="{col.id|propObjectValueByKey}" data="{data}" />\n      </td>\n    </tr>\n    <tr ui:if="{expanded}" class="table-expanded-row table-expanded-row-level-1">\n      <td class=""></td>\n      <td class="" colspan="100">\n        <ui:tag tag="{kind|capitalize}RowInsider" data="{data}" />\n      </td>\n    </tr>\n  </tbody>\n</component>\n\n<component id="Chips">\n  <div class="chips mx-0 py-2 px-2 {class}">\n    <div class="ui mini labels">\n      <span class="chip {tag.selected|then:bg-success:bg-secondary} {tag.nonSelectable|then::c-hand} {tag.count|then:badge}" data-badge="{tag.count}" style="padding:1.2rem" data-id="{tag.id}" click="{tag.nonSelectable|then:undefined:@click}" ui:for="tag of data">\n        <span>\n          <b>{tag.name}</b>\n        </span>\n      </span>\n      <span ui:if="data|find:true:selected" class="label py-1 px-2 s-circle c-hand" click="{click|assignFirstArgKeyValue:id:}">\n        <Icon type="cross"/>\n      </span>\n    </div>\n  </div>\n</component>\n'},function(e,n,r){"use strict";r.r(n),n.default='<component id="Select">\n  <select class="{class}" change="{change}" multiple="{multiple}" disabled="{disabled}" data="{data}">\n    <option selected="{value|not}" value="" ui:if="{value|not|or:@emptyCaption}">{emptyCaption}</option>\n    <option ui:for="option of options" selected="{option.id|equals:@value}" value="{option.id}">{option.name}</option>\n  </select>\n</component>\n\n<component id="RadioGroup">\n  <div class="{class}">\n    <label class="form-radio" ui:for="option of options">\n      <input type="radio" name="{id|or:rg}" value="{option.id}" checked="{option.id|equals:@value}" change="{change}" data="{data}" disabled="{disabled}" />\n      <i class="form-icon"></i>{option.name}\n    </label>\n  </div>\n</component>\n\n<component id="Dropdown">\n  <div class="dropdown">\n    <a href="#" class="btn btn-link dropdown-toggle" tabindex="0">\n      {data|selectedName}<i class="icon icon-caret"></i>\n    </a>\n    \x3c!-- menu component --\x3e\n    <ul class="menu" style="right: 0; left: auto">\n      <li ui:for="item of data" class="menu-item {item.id|equals:@value|then:active}" data-id="{item.id}" data-name="{item.name}" click="{change}">\n        <a>{item.name}</a>\n      </li>\n    </ul>\n  </div>\n</component>\n\n<component id="DateTimeInput">\n  <input class="form-input flatpickr-input" init="{:support.initFlatpickr}" disabled="{disabled}" type="text" placeholder="{placeholder}" value="{value|support.setFlatpickrValue}" change="{change}" />\n</component>\n'},function(e,n,r){"use strict";r.r(n),n.default='<component id="Icon">\n  <i class="icon icon-{type} {class}" style="{style}" data="{data}" click="{click}"></i>\n</component>\n\n<component id="Img">\n  <img src="{src|or:@default}" alt="{alt}" class="img {class}" style="{style}" />\n</component>\n\n<component id="IFrame">\n  <iframe width="100%" height="450" frameborder="0" style="border: 0;" src="{src}" allowfullscreen="1"></iframe>\n</component>\n\n<component id="Avatar">\n  <figure class="avatar {large|then:avatar-lg}">\n    <Img src="{src}" alt="{alt}" default="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" />\n  </figure>\n</component>\n'},function(e,n,r){"use strict";r.r(n),n.default='<component id="Modal">\n  \x3c!-- \n  \n  Modal component:\n\n  Slots:\n    - header\n    - default\n    - footer\n\n  Properties:\n    - open: boolean\n    - close: procedure\n    - title: string\n    - mode: lg|sm\n\n  --\x3e\n  <div class="modal modal-{mode} {open|then:active}" style="padding:0;">\n    <a class="modal-overlay" aria-label="Close" click="{close}" ui:if="mode|equals:lg|not"></a>\n    <div class="modal-container" style="padding:0;max-height: {mode|equals:lg|then:100:70}vh">\n      <div class="modal-header  bg-secondary" style="margin:0">\n        <a class="btn btn-lg btn-clear float-right" aria-label=":close" click="{close}"></a>\n        <div class="modal-title h5" ui:if="{title}">{title}</div>\n        <ui:slot id="header" />\n      </div>\n      <div class="modal-body" style="">\n        <div class="content">\n          <ui:slot />\n        </div>\n      </div>\n      <div class="modal-footer">\n        <ui:slot id="footer" />\n      </div>\n    </div>\n  </div>\n</component>\n\n'},function(e,n,r){"use strict";r.r(n),n.default='<component id="Tabs">\n  <ul class="tab tab-block">\n    <li class="tab-item {item.id|equals:@value|then:active} c-hand" ui:for="item of items">\n      <a data-id="{item.id}" click="{change}">\n        <Icon ui:if="{item.icon}" type="{item.icon}" bundle="{item.iconBundle}" class="mx-2" />\n        {item.name|or:@item.id}\n      </a>\n    </li>\n  </ul>\n</component>\n\n<component id="BackButton">\n  <a class="mx-2" style="border: none; width: 1.5rem; z-index: 5" href="{href}">\n    <Icon type="back" />\n  </a>\n</component>\n\n<component id="Navbar">\n  <header class="navbar sticky {class} bg-secondary" style="height: 48px;flex-wrap: nowrap;margin:0;">\n    <section class="navbar-section" style="max-width:100%;">\n      <div class="m-2 d-flex items-center flex-1">\n        <ui:slot id="left" />\n        <div style="flex:1; min-height:1.7rem;display:flex;align-items: center;">\n          <h4 class="text-dark text-ellipsis {badge|then:badge}" style="margin-bottom:0; flex:1;max-width:640px;" data-badge="{badge}" ui:if="{caption}">\n          {caption}\n          </h4>\n        </div>\n      </div>\n    </section>\n    <section class="navbar-section flex-0 mx-2" ui:if="slot(right)">\n      <ui:slot id="right" />\n    </section>\n  </header>\n</component>\n\n<component id="PageRouter">\n  <ui:tag tag="{host|capitalize|or:Loader}Page" path={path} ui:props="{params}" params="{params}" />\n</component>\n\n<component id="LoaderPage">\n  <LoadingIndicator />\n</component>\n\n<component id="NavTree">\n  <ul class="nav {class}">\n    <li class="nav-item {itemClass} {item.class}" ui:for="item of data">\n      <NavLink href="{item.id}">\n        <span>{item.name}</span>\n        <span ui:if="{item.label}" class="label label-error">{item.label}</span>\n      </NavLink>\n      <NavTree ui:if="{item.subs}" data="{item.subs}" />\n    </li>\n  </ul>\n</component>\n\n<component id="NavLink">\n  <a data-value="{href}" click="-> nav.hash" class="c-hand {class}">\n    <ui:slot />\n  </a>\n</component>\n\n<component id="NavListCursor">\n  <div class="d-flex {class}" style="min-width: 6rem;align-items: center;" ui:if="total">\n    <span class="p-2" ui:if="prev.id|not">\n      <Icon type="arrow-left"/>\n    </span>\n    <a class="p-2" href="{href}{prev.id}" ui:if="prev.id">\n      <Icon type="arrow-left"/>\n    </a>\n    <span class="text-dark text-ellipsis text-bold">{index|plus:1} / {total}</span>\n    <a class="p-2" href="{href}{next.id}" ui:if="next.id">\n      <Icon type="arrow-right"/>\n    </a>\n  </div>\n</component>'},function(e,n,r){"use strict";r.r(n),n.default='<component id="Panel">\n  <h6 class="mt-2 pt-2 px-2 text-gray" ui:if="caption">{caption}</h6>\n  <div class="panel {class}" style="{style}">\n    <small class="p-2 bg-secondary" ui:if="{hint}">{hint}</small>\n    <div class="panel-header" ui:if="slot(title)">\n      <div class="panel-title">\n        <ui:slot id="title" key="panel-title" />\n      </div>\n    </div>\n    <div class="panel-nav" ui:if="slot(nav)">\n      <ui:slot id="nav" />\n    </div>\n    <div class="panel-body p-2">\n      <ui:slot />\n    </div>\n    <div class="panel-footer" ui:if="slot(footer)">\n      <ui:slot id="footer" />\n    </div>\n  </div>\n</component>\n\n<component id="Tile">\n  <div class="tile {centered|then:tile-centered} m-2 {class}">\n    <div class="tile-icon" ui:if="{image}">\n      <Avatar src="{image}" />\n    </div>\n    <div class="tile-icon" ui:if="{icon}">\n      <Icon type="{icon}" />\n    </div>\n    <div class="tile-content">\n      <div class="tile-title text-bold" ui:if="{title}">{title}</div>\n      <div class="tile-subtitle" ui:if="{subtitle}">{subtitle}</div>\n      <ui:slot />\n    </div>\n    <div class="tile-action btn-group" ui:if="slot(actions)">\n      <ui:slot id="actions" />\n    </div>\n  </div>\n</component>\n\n<component id="Card">\n  <div class="card" style="{style}">\n    <div class="card-image" ui:if="{image}">\n      <img src="{image}" class="img-responsive" />\n    </div>\n    <div class="card-header">\n      <a ui:if="{title}" href="{link}">\n        <h5 class="card-title">{title}</h5>\n      </a>\n      <div ui:if="{subtitle}" class="card-subtitle text-gray">{subtitle}</div>\n      <ui:slot id="header" />\n    </div>\n    <div class="card-body">\n      <ui:slot />\n    </div>\n    <div class="card-footer" ui:if="slot(footer)">\n      <ui:slot id="footer" />\n    </div>\n  </div>\n</component>\n\n<component id="Hero">\n  <div class="hero bg-dark p-0">\n    <div class="hero-body px-2">\n      <h1>{title}</h1>\n    </div>\n  </div>\n</component>\n\n\n<component id="FixedPanel">\n  <div style="position: fixed; right: 0; {bottom|then:bottom:top}: 0; left: 0; z-index:3;">\n    <div class="{class}" style="max-width: 720px; margin: auto; display: flex; {style}">\n      <ui:slot />\n    </div>\n  </div>\n</component>'},function(e,n,r){"use strict";r.r(n),n.default='<component id="ViewPort">\n  <ui:fragment ui:if="slot(aside)">\n    <Sidebar caption="{caption}" size="{sidebarWidth}">\n      <Sidebar:aside>\n        <ui:slot id="aside" />\n      </Sidebar:aside>\n      <main>\n        <ui:slot />\n      </main>\n    </Sidebar>\n    <ui:else>\n      <main>\n        <ui:slot />\n      </main>\n    </ui:else>\n  </ui:fragment>\n</component>\n\n<component id="Sidebar">\n  <div class="off-canvas off-canvas-sidebar-show">\n    <a class="off-canvas-toggle btn btn-primary btn-action show-lg" href="#sidebar">\n      <Icon type="menu" />\n    </a>\n    <div id="sidebar" class="off-canvas-sidebar">\n      <Aside caption="{caption}">\n        <ui:slot id="aside" />\n      </Aside>\n    </div>\n    <a class="off-canvas-overlay" href="#"></a>\n    <div class="off-canvas-content">\n      <ui:slot />\n    </div>\n  </div>\n</component>\n\n<component id="Aside">\n  <aside style="display:flex; flex-direction: column; height: 100%; width:{size|or:300}px">\n    <div class="text-center" ui:if="{caption}">\n      <a href="#/main">\n        <h5 class="p-2">{caption}</h5>\n      </a>\n    </div>\n    <div style="display:flex; flex-direction: column; flex: 1;align-items:stretch;">\n      <ui:slot />\n    </div>\n  </aside>\n</component>\n\n'},function(e,n,r){"use strict";r.r(n),n.default='<component id="ToastList">\n  <div style="position:absolute;top:2.5rem;right:1rem;left:1rem;z-index:500;{style}">\n    <div style="max-width: 600px;margin: auto;">\n      <Toast ui:props={toast} ui:for="toast of <-toasters.items"/>\n    </div>\n  </div>\n</component>\n\n<component id="Toast">\n  <div class="toast mt-1 toast-{mode|or:@mode|or:primary}">\n    <button class="btn btn-clear float-right" click="{close}"></button>\n    <p>\n      <b ui:if="counter" class="mr-1">[x{counter}]</b>\n      <span> {message}</span>\n      <a class="mx-1" href="{link}" ui:if="link">link</a>\n    </p>\n  </div>\n</component>'},function(e,n,r){"use strict";r.r(n),n.default='<component id="SearchBar">\n  <span class="ant-input-search ant-input-affix-wrapper">\n    <input placeholder="Поиск..." class="ant-input" type="text" value="{value}" enter="{action}" style="min-height: 40px" />\n    <span class="ant-input-suffix">\n      <i class="anticon anticon-search ant-input-search-icon" style="margin-top: 4px"></i>\n    </span>\n  </span>\n</component>\n\n<component id="SearchBarWithSuggestions">\n  \x3c!-- <ui:fragment ui:if="opened.value|or:@value">\n    <ui:then> --\x3e\n  <div class="form-autocomplete mx-2">\n    \x3c!-- autocomplete input container --\x3e\n    <div class="form-autocomplete-input form-input input-sm">\n      <div class="input-group input-inline">\n        <input class="form-input" type="search" placeholder=":kluq_poshuku" keypress="{input}" value="{value}" focus="->opened|assignKeyValue:value:true" style="min-width:80px;width:130px;" />\n        <i class="icon icon-cross m-2 c-hand" data-value="" click="{enter}" click2="->opened|assignKeyValue:value:false" ui:if="value"></i>\n        <i class="icon icon-search m-2 c-hand" click="->opened|assignKeyValue:value:false" ui:if="value|not"></i>\n      </div>\n    </div>\n    <ui:fragment ui:if="opened.value|then:@suggestions">\n      <div style="position:fixed; right:0; top:0; left:0; bottom:0;" click="->opened|assignKeyValue:value:false"></div>\n      <ul class="menu" style="min-width: 140px;max-height:16rem;overflow-y:auto;">\n        <ui:fragment ui:if="suggestions.length">\n          <ui:then>\n            <li class="menu-item c-hand" ui:for="item of suggestions" data-value="{item.id}" click="{enter}">\n              <a>\n                <div class="tile tile-centered">\n                  <div class="tile-content">{item.name}</div>\n                </div>\n              </a>\n            </li>\n          </ui:then>\n          <ui:else>\n            <li class="menu-item">\n              <div class="tile tile-centered">\n                <div class="tile-content text-gray">:strings.no_findings|or:no findings</div>\n              </div>\n            </li>\n          </ui:else>\n        </ui:fragment>\n      </ul>\n    </ui:fragment>\n  </div>\n  \x3c!-- </ui:then>\n    <ui:else>\n      <div class="mx-2" click="{open|fnBindArgs:true}">\n        <i class="icon icon-search m-2 c-hand" click="->opened|assignKeyValue:value:true"></i>\n      </div>\n    </ui:else>\n  </ui:fragment> --\x3e\n\n</component>'},function(e,n,r){"use strict";r.r(n),n.default='<component id="Popover">\n  <div class="popover popover-right">\n    <ui:slot />\n    <div class="popover-container">\n      <div class="card">\n        <div class="card-header">\n          <ui:slot id="body" />\n        </div>\n      </div>\n    </div>\n  </div>\n</component>'},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.NavigationService=void 0;var o=i(r(3)),a=i(r(1)),u=i(r(2)),l=i(r(5)),c=i(r(6)),s=i(r(4)),f=r(7);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,i=(0,s.default)(e);if(n){var o=(0,s.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,c.default)(this,r)}}var p=function(e){(0,l.default)(NavigationService,e);var n=_createSuper(NavigationService);function NavigationService(){var e;(0,a.default)(this,NavigationService);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).prevHash="",e}return(0,u.default)(NavigationService,[{key:"init",value:function init(){var e=this;this.prevHash,window.addEventListener("hashchange",(function(){return e.hashchange()})),setTimeout((function(){return e.hashchange()}),0)}},{key:"hashchange",value:function hashchange(){var e=window.location.hash.slice(1);"/"===e[0]&&e!==this.prevHash?(this.emit("this.hash",{value:e.slice(1)}),this.prevHash=e):this.prevHash||this.emit("this.hash",{value:"main"})}},{key:"done",value:function done(){window.removeEventListener("hashchange",this.hashchange)}},{key:"setTitle",value:function setTitle(e){window.document.title=e}},{key:"setHash",value:function setHash(e){var n=(0,f.urlParse)("/"+e),r=n.host,i=n.path,a=void 0===i?["*"]:i,u=n.params,l={host:(r&&"*"!==r?r:this.host)||"main",path:"*"===a[0]?this.path:a,params:u.reset?(0,o.default)({},u,{reset:null}):(0,o.default)({},this.params,u)};window.location.hash=this.prevHash=(0,f.urlStringify)(l).slice(1),this.up(l)}},{key:"getRoute",value:function getRoute(){return{page:this.host,host:this.host,path:this.path,params:this.params}}},{key:"onReload",value:function onReload(){window.location.reload()}},{key:"onCopyToClipboard",value:function onCopyToClipboard(e){var n=this,r=e.value;navigator.clipboard.writeText(r).then((function(){n.toast("Copied to clipboard")}),(function(e){n.toast("Could not copy to clipboard: "+e.message)}))}},{key:"onHash",value:function onHash(e){var n=e.value;this.setHash("/"+n)}},{key:"onParams",value:function onParams(e){this.setHash({params:(0,o.default)({},e,{data:null})})}}]),NavigationService}(r(8).Service);n.NavigationService=p},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.ServiceWorker=void 0;var o=i(r(9)),a=i(r(1)),u=i(r(2)),l=i(r(5)),c=i(r(6)),s=i(r(4)),f=r(8),p=r(7);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,i=(0,s.default)(e);if(n){var o=(0,s.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,c.default)(this,r)}}var v=function(e){(0,l.default)(ServiceWorker,e);var n=_createSuper(ServiceWorker);function ServiceWorker(){return(0,a.default)(this,ServiceWorker),n.apply(this,arguments)}return(0,u.default)(ServiceWorker,[{key:"api",get:function get(){return navigator.serviceWorker}},{key:"init",value:function init(){var e=this;try{(0,p.assert)(this.api,"Service Workers are not supported");var n=this.source,r=void 0===n?"/service-worker.js":n,i=this.scope,o=void 0===i?"/":i,a=this.push;this.api.register(r,{scope:o}).then((function(n){return e.registered(n)})).then((function(){return e.ready((function(){return e.log("Service Worker Ready")}))})),this.api.addEventListener("message",(function(n){return e.onMessage(n)})),a&&this.subscribe()}catch(e){this.fallback(e)}}},{key:"ready",value:function ready(e){return this.api.ready.then(e)}},{key:"fallback",value:function fallback(e){this.log(e)}},{key:"registered",value:function registered(e){return this.log("Service Worker Registered"),e}},{key:"withPushManager",value:function withPushManager(e){return this.ready((function(e){return e.pushManager})).then(e)}},{key:"unsubscribe",value:function unsubscribe(){var e=this;this.withPushManager((function(e){return e.getSubscription()})).then((function(e){return e&&e.unsubscribe()})).then((function(){return e.saveSubscription()})).catch((function(e){console.log("Error thrown while unsubscribing from  push messaging.",e)}))}},{key:"subscribe",value:function subscribe(){var e=this;"granted"===Notification.permission||Notification.permission;var n=function urlBase64ToUint8Array(e){var n=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(n);return Uint8Array.from((0,o.default)(r).map((function(e){return e.charCodeAt(0)})))}(this.vapidPublicKey);this.withPushManager((function(r){return r.getSubscription().then((function(e){return e||r.subscribe({userVisibleOnly:!0,applicationServerKey:n})})).then((function(n){return e.saveSubscription(n.toJSON())})).catch((function(n){"denied"===Notification.permission&&e.log("The user has blocked notifications."),e.handleError(n)}))}))}},{key:"saveSubscription",value:function saveSubscription(e){this.subscription=e}},{key:"onMessage",value:function onMessage(e){this.log("onMessage",e)}}]),ServiceWorker}(f.Service);n.ServiceWorker=v},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.ToastService=n.ToastSender=void 0;var o=i(r(9)),a=i(r(3)),u=i(r(1)),l=i(r(2)),c=i(r(5)),s=i(r(6)),f=i(r(4)),p=r(92),v=r(8);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,i=(0,f.default)(e);if(n){var o=(0,f.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,s.default)(this,r)}}var m=function(e){(0,c.default)(ToastSender,e);var n=_createSuper(ToastSender);function ToastSender(){return(0,u.default)(this,ToastSender),n.apply(this,arguments)}return(0,l.default)(ToastSender,[{key:"onData",value:function onData(e){this.emit("toaster.send",e)}}]),ToastSender}(v.Service);n.ToastSender=m;var y=function(e){(0,c.default)(ToastService,e);var n=_createSuper(ToastService);function ToastService(){var e;(0,u.default)(this,ToastService);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).items=[],e.heartbeat=new p.HeartbeatService((function(){return e.emit("this.tick",{})})),e}return(0,l.default)(ToastService,[{key:"setItems",value:function setItems(e){this.heartbeat.setActive(!!e.length),this.items=e}},{key:"onSend",value:function onSend(e,n){var r,i=this,u=n.items,l=Date.now(),c=String(e.id||l),s=(0,a.default)({},e,{mode:null!=e&&null!=(r=e.message)&&r.startsWith("error")?"error":e.mode,id:c,close:function close(){return i.emit("this.close",{id:c})},ttl:l+(e.timeout||6e3)}),f=u.find((function(e){return e.id===c}));return f&&(s.counter=1+(f.counter||1)),{items:[s].concat((0,o.default)(u.filter((function(e){return e!==f}))))}}},{key:"onTick",value:function onTick(e,n){var r=n.items,i=Date.now();return{items:r.filter((function(e){return e.ttl>i}))}}},{key:"onClose",value:function onClose(e,n){var r=e.id;return{items:n.items.filter((function(e){return e.id!==r}))}}}]),ToastService}(v.Service);n.ToastService=y},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.HeartbeatService=void 0;var o=i(r(1)),a=i(r(2)),u=function(){function HeartbeatService(e){(0,o.default)(this,HeartbeatService),this.setWatcher(e)}return(0,a.default)(HeartbeatService,[{key:"setWatcher",value:function setWatcher(e){this.watcher=e}},{key:"startWatch",value:function startWatch(){var e=this;this.interval||(this.interval=setInterval((function(){null==e.watcher||e.watcher()}),1e3))}},{key:"stopWatch",value:function stopWatch(){this.interval&&(clearInterval(this.interval),this.interval=0)}},{key:"setActive",value:function setActive(e){e?this.startWatch():this.stopWatch()}}]),HeartbeatService}();n.HeartbeatService=u},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.Loader=void 0;var o=i(r(3)),a=i(r(1)),u=i(r(2)),l=function(){function Loader(){(0,a.default)(this,Loader)}return(0,u.default)(Loader,[{key:"init",value:function init(){this.reload()}},{key:"setTrigger",value:function setTrigger(e){this.trigger=e,this.reload()}},{key:"reload",value:function reload(){var e=this.from,n=this.data,r=this.into;e&&r&&e({data:n,callback:function callback(e,n){return r((0,o.default)({error:e},n))}})}}]),Loader}();n.Loader=l},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.Invoke=void 0;var o=i(r(1)),a=i(r(2)),u=function(){function Invoke(){(0,o.default)(this,Invoke),this.delay=0,this.hot=!1}return(0,a.default)(Invoke,[{key:"setTrigger",value:function setTrigger(e){this.trigger=e,e&&this.reload()}},{key:"init",value:function init(){this.hot&&this.reload()}},{key:"reload",value:function reload(){var e=this;setTimeout((function(){e.isDone||(console.log(e.data),null==e.action||e.action(e.data))}),1e3*(this.delay||0))}}]),Invoke}();n.Invoke=u},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorHandlingService=void 0;var o=i(r(1)),a=i(r(2)),u=i(r(5)),l=i(r(6)),c=i(r(4));function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,i=(0,c.default)(e);if(n){var o=(0,c.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,l.default)(this,r)}}var s=function(e){(0,u.default)(ErrorHandlingService,e);var n=_createSuper(ErrorHandlingService);function ErrorHandlingService(){return(0,o.default)(this,ErrorHandlingService),n.apply(this,arguments)}return(0,a.default)(ErrorHandlingService,[{key:"handleError",value:function handleError(e){var n=e.message,r=void 0===n?"":n,i=e.code,o=e.source,a=void 0===o?{}:o;this.show({message:a+": "+r,code:i,mode:"error"})}},{key:"show",value:function show(e){var n=e.message,r=void 0===n?"":n,i=e.code,o=void 0===i?"":i,a=e.source;console.error(a+": ERROR: ",o,r)}}]),ErrorHandlingService}(r(8).Service);n.ErrorHandlingService=s},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.MetadataService=void 0;var o=i(r(1)),a=i(r(2)),u=i(r(5)),l=i(r(6)),c=i(r(4)),s=i(r(3)),f=i(r(10)),p=r(15),v=r(8);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,i=(0,c.default)(e);if(n){var o=(0,c.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,l.default)(this,r)}}var m=function mergeMeta(e,n){return Object.entries(e).reduce((function(e,n){var r=(0,f.default)(n,2),i=r[0],o=r[1];return e[i]="object"!=typeof e[i]||Array.isArray(e[i])?o:(0,s.default)({},e[i],o),e}),n)},y=function load(e,n){return fetch(e,{method:"POST",mode:"cors",redirect:"follow",body:JSON.stringify({data:{version:n}})}).then((function(e){return e.json()}))},g=function(e){(0,u.default)(MetadataService,e);var n=_createSuper(MetadataService);function MetadataService(){var e;(0,o.default)(this,MetadataService);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).url="",e.version="",e.ttl=864e5,e}return(0,a.default)(MetadataService,[{key:"init",value:function init(){var e=this,n=new p.Storage("local",this.url.replace(/\//g,"_")),r=n.get("$meta")||{};return+((null==r?void 0:r.timestamp)||0)+this.ttl>Date.now()?(m(r,this.res("")),{ready:!0,meta:r}):{ready:!1,meta:r,error:null,"*":y(this.url,null==r?void 0:r.version).then((function(i){var o=(null==r?void 0:r.version)!==(null==i?void 0:i.version),a=o?i:(0,s.default)({},r);return a.timestamp=Date.now(),m(a,e.res("")),n.set("$meta",a),{ready:!0,isUpdated:o,meta:a}}),(function(e){return{ready:!0,error:(null==e?void 0:e.message)||e||"unknown"}}))}}}]),MetadataService}(v.Service);n.MetadataService=g},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.GSheetsService=void 0;var o=i(r(11)),a=i(r(9)),u=i(r(3)),l=i(r(1)),c=i(r(2)),s=i(r(5)),f=i(r(6)),p=i(r(4)),v=r(7),m=r(98),y=r(15);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,i=(0,p.default)(e);if(n){var o=(0,p.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,f.default)(this,r)}}var g=function(e){(0,s.default)(GSheetsService,e);var n=_createSuper(GSheetsService);function GSheetsService(){var e;(0,l.default)(this,GSheetsService);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).url="",e.token="",e.kind="items",e.remote=new m.JsonpService,e.persistence="transient",e}return(0,c.default)(GSheetsService,[{key:"items",get:function get(){var e;return(null==(e=this.local)?void 0:e.get(this.kind))||null},set:function set(e){var n;null==(n=this.local)||n.set(this.kind,e?e.filter((function(e){return!e.deleted&&"deleted"!==e.status})):null)}},{key:"since",get:function get(){var e;return+(null==(e=this.local)?void 0:e.get(this.kind+"_since"))||0},set:function set(e){var n;null==(n=this.local)||n.set(this.kind+"_since",e||0)}},{key:"init",value:function init(){return this.local=new y.Storage(this.persistence),this.sync()}},{key:"submit",value:function submit(e){throw new Error("Method not implemented.")}},{key:"sync",value:function sync(){var e=this;return{isLoading:!0,error:null,"*items":this.submit({path:"?action=items&kind="+this.kind,body:{since:String(this.since||0)}}).then((function(n){var r,i,o=n.items,a=n.reset,l=n.timestamp;if(e.log("sync "+e.kind,l,null==(r=o)?void 0:r.length),null!=(i=o)&&i.length||!e.since){if(!a){var c=(0,v.arrayToObject)(e.items||[]);o.forEach((function(e){var n=c[e.id];n?(0,u.default)(n,e):c[e.id]=e})),o=Object.values(c)}return{items:o,isLoading:!1,since:l}}return{isLoading:!1}})).catch((function(n){var r=(null==n?void 0:n.message)||n||"unknown";return e.toast({id:r,mode:"error",message:"Ошибка: "+r}),{isLoading:!1,error:r}}))}}},{key:"submitData",value:function submitData(e){var n=this;return{busy:!0,error:null,"*upsert":this.submit({path:"?action=upsert&kind="+this.kind,body:e}).then((function(e){var r,i=e.item;return n.log("update sync"+n.kind,i.id),{busy:!1,lastUpdatedItemId:i.id,items:[i].concat((0,a.default)(null==(r=n.items)?void 0:r.filter((function(e){return e.id!=i.id}))))}})).catch((function(e){return{busy:!1,error:e}}))}}},{key:"syncItem",value:function syncItem(e){var n=this;return{isItemLoading:!0,error:null,"*item":this.submit({path:"?action=item&kind="+this.kind,body:e}).then((function(e){var r,i=e.item;return n.log("sync item"+n.kind,i.id,i),{isItemLoading:!1,lastUpdatedItemId:i.id,items:[i].concat((0,a.default)(null==(r=n.items)?void 0:r.filter((function(e){return e.id!=i.id}))))}})).catch((function(e){return{isItemLoading:!1,error:e}}))}}},{key:"onReload",value:function onReload(){return this.sync()}},{key:"onUpsert",value:function onUpsert(e){return this.submitData(e)}},{key:"onItem",value:function onItem(e){return this.syncItem(e)}},{key:"onDelete",value:function onDelete(e){var n=e.id;return this.submitData((0,o.default)({},String(n),{status:"deleted"}))}}]),GSheetsService}(r(8).Service);n.GSheetsService=g},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.JsonpService=void 0;var o=i(r(1)),a=i(r(2)),u=r(7),l=0,c=function(){function JsonpService(){(0,o.default)(this,JsonpService)}return(0,a.default)(JsonpService,[{key:"fetch",value:function fetch(e){return new Promise((function(n,r){var i,o="jsonp_"+ ++l,a=window.document.createElement("script");a.async=!0,a.onerror=r,a.src=(0,u.urlAppendParams)(e,{jsonp:o}),window[o]=n;var c=window.document.getElementsByTagName("body")[0];null==c||null==(i=c.parentNode)||i.insertBefore(a,c)}))}}]),JsonpService}();n.JsonpService=c},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.ApiClientService=void 0;var o=i(r(16)),a=i(r(3)),u=i(r(1)),l=i(r(2)),c=i(r(5)),s=i(r(6)),f=i(r(4)),p=r(7),v=r(8),m=["error"];function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,i=(0,f.default)(e);if(n){var o=(0,f.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,s.default)(this,r)}}var y=function(e){(0,c.default)(ApiClientService,e);var n=_createSuper(ApiClientService);function ApiClientService(){var e;(0,u.default)(this,ApiClientService);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).baseUrl="",e.token="",e}return(0,l.default)(ApiClientService,[{key:"post",value:function post(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;return fetch((0,p.urlAppendParams)(this.baseUrl+n),(0,a.default)({method:"POST",mode:"cors",redirect:"follow"},i,{body:JSON.stringify({token:this.token,data:r})})).then((function(e){return e.json()})).then((function(n){var r=n.error,i=(0,o.default)(n,m);if(r)throw"401"===r.code&&(null==e.onTokenExpired||e.onTokenExpired()),r;return i}))}},{key:"onPost",value:function onPost(e){var n=e.path,r=e.body,i=e.options;return this.post(n,r,i)}}]),ApiClientService}(v.Service);n.ApiClientService=y},function(e,n){e.exports=function _objectWithoutPropertiesLoose(e,n){if(null==e)return{};var r,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],n.indexOf(r)>=0||(o[r]=e[r]);return o},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){(function(e){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.FirebaseUserService=n.FirebaseService=void 0;var o=i(r(5)),a=i(r(6)),u=i(r(4)),l=i(r(11)),c=i(r(3)),s=i(r(1)),f=i(r(2)),p=r(8);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,i=(0,u.default)(e);if(n){var o=(0,u.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,a.default)(this,r)}}var v=function unpackDocs(e){return e.docs.reduce((function(e,n){var r=n.data();return r.id=n.id,e.push(r),e}),[])},m=window.firebase,y=function(){function FirebaseService(e){var n=(0,c.default)({},e);(0,s.default)(this,FirebaseService),m.initializeApp(n),this.firestore=m.firestore(),this.firestore.enablePersistence({synchronizeTabs:!0}).catch((function(e){"failed-precondition"===e.code||e.code})),this.auth=m.auth(),this.auth.languageCode="by",this.providers={Google:m.auth.GoogleAuthProvider}}return(0,f.default)(FirebaseService,[{key:"done",value:function done(){m.app().delete()}},{key:"signInAnonymously",value:function signInAnonymously(){this.auth.signInAnonymously().catch((function(e){var n=e.message;console.log("signInAnonymously err="+n)}))}},{key:"listenUser",value:function listenUser(e){this.auth.onAuthStateChanged(e)}},{key:"getCurrentUser",value:function getCurrentUser(){return this.auth.currentUser}},{key:"linkProvider",value:function linkProvider(){var e=this,n=new this.providers.Google;return n.addScope("https://www.googleapis.com/auth/contacts.readonly"),this.auth.signInWithPopup(n).then((function(n){var r=n.user,i=e.auth.GoogleAuthProvider.credential(r.getAuthResponse().id_token);e.getCurrentUser().linkAndRetrieveDataWithCredential(i).then((function(e){var n=e.user;console.log("Anonymous account successfully upgraded",n)}),(function(e){console.log("Error upgrading anonymous account",e)}))})).catch((function(e){var n=e.message;console.log("signInAnonymously err="+n)}))}},{key:"logout",value:function logout(){return this.signInAnonymously()}},{key:"getCollection",value:function getCollection(e,n){return(r=this.firestore.collection(e),n?r.where("modified_at",">",n):r).get().then(v);var r}},{key:"listenCollection",value:function listenCollection(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;return(n=this.firestore.collection(e),r?n.where("modified_at",">",r):n).onSnapshot((function(n){var r=[];n.forEach((function(e){var n=e.data();n.id=e.id,r.push(n)})),i(null,(0,l.default)({},e,r))}))}},{key:"nextId",value:function nextId(e){return this.firestore.collection(e).doc().id}},{key:"update",value:function update(e){var n=this,r=Date.now().valueOf(),i=this.firestore.batch();return Object.keys(e).forEach((function(o){var a=n.firestore.collection(o);e[o].forEach((function(e){e.modified_at=r,e.created_at||(e.created_at=r);var n=a.doc(""+e.id);i.set(n,e,{merge:!0})}))})),i.commit()}}]),FirebaseService}();n.FirebaseService=y;var g=function(e){(0,o.default)(FirebaseUserService,e);var n=_createSuper(FirebaseUserService);function FirebaseUserService(){return(0,s.default)(this,FirebaseUserService),n.apply(this,arguments)}return(0,f.default)(FirebaseUserService,[{key:"fb",get:function get(){return this.$.app.firebase.impl}},{key:"init",value:function init(){var e=this;this.fb.listenUser((function(n){n||e.fb.signInAnonymously(),e.emit("signed")}))}},{key:"getInfo",value:function getInfo(){var e=this.fb.getCurrentUser();return null!==e&&e.providerData.forEach((function(e){})),e?(0,c.default)({},e,{isLoading:!1}):{isLoading:!0}}},{key:"onLogin",value:function onLogin(){return this.fb.linkProvider()}},{key:"onLogout",value:function onLogout(){return this.fb.logout()}},{key:"onSigned",value:function onSigned(){return{_:NaN}}}]),FirebaseUserService}(p.Service);n.FirebaseUserService=g;var b=e.hot;b&&b.accept()}).call(this,r(102)(e))},function(e,n){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function get(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function get(){return e.i}}),e.webpackPolyfill=1),e}},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(34),a=r(104),u=r(105),l=r(107),c=r(108),s=r(109),f=i(r(110)),p=i(r(111)),v=i(r(112)),m=i(r(113)),y=i(r(114)),g=i(r(115)),b=i(r(116)),k=i(r(117)),_=[f.default,p.default,v.default,y.default,m.default,g.default,b.default,k.default,o.FormController,a.ItemCollectionController,u.NewItemController,l.ItemController,c.MultivalueController,s.SuggestionController];n.default=_},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.ItemCollectionController=void 0;var o=i(r(11)),a=i(r(3)),u=i(r(9)),l=i(r(1)),c=i(r(2)),s=i(r(5)),f=i(r(6)),p=i(r(4)),v=r(8),m=r(35),y=r(7),g=r(15);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,i=(0,p.default)(e);if(n){var o=(0,p.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,f.default)(this,r)}}var b=function(e){(0,s.default)(ItemCollectionController,e);var n=_createSuper(ItemCollectionController);function ItemCollectionController(){var e;(0,l.default)(this,ItemCollectionController);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).selection={},e.shownLimit=40,e.sortBy="title",e.kluqPoshuku="",e.inputKluqPoshuku="",e.initials="",e.tags=[],e.local=new g.Storage("local"),e}return(0,c.default)(ItemCollectionController,[{key:"searchHistory",get:function get(){var e,n=null==(e=this.local)?void 0:e.get("searchHistory");return n?n.split(","):null},set:function set(e){var n;null==(n=this.local)||n.set("searchHistory",(e||[]).join(","))}},{key:"searchSuggestion",get:function get(){var e;return this.kluqPoshuku===this.inputKluqPoshuku?this.kluqPoshuku?null:null==(e=this.searchHistory)?void 0:e.map((function(e){return{name:e,id:e}})):this.data?(0,m.getSuggestions)(this.data,this.inputKluqPoshuku):null}},{key:"addHistoryItem",value:function addHistoryItem(e){e&&(this.searchHistory=[e].concat((0,u.default)((this.searchHistory||[]).filter((function(n){return n!=e})))).slice(0,20))}},{key:"setData",value:function setData(e){this.data=e?e.map((function(e){return new m.Item(e)})):null}},{key:"sortedData",get:function get(){var e=this,n=this.data;if(!n)return null;var r=this.kluqPoshuku?n.filter((function(n){return n.$searchData.startsWith(e.kluqPoshuku)})):n;this.tags=[];var i=(0,m.analyzeDataByTags)(r,this.selection,this.initials,this.tags,this.labelsFields);return(0,m.applyNavInfo)((0,y.arraySortBy)(i,this.sortBy))}},{key:"getInfo",value:function getInfo(){var e,n=this.sortedData;return n?{tags:this.tags,data:null==(e=this.sortedData)?void 0:e.slice(0,this.shownLimit),counts:{total:n.length,actual:n.length,hasMore:this.shownLimit<n.length},search:{kluq:this.kluqPoshuku,value:this.inputKluqPoshuku,suggestions:this.searchSuggestion,input:this.createEmitter("this.inputKluq"),enter:this.createEmitter("this.znajdzPoKluqu")}}:{}}},{key:"onTag",value:function onTag(e,n){var r=e.id,i=n.selection;return{selection:r?(0,a.default)({},i,(0,o.default)({},r,!i[r])):{}}}},{key:"onZnajdzPoKluqu",value:function onZnajdzPoKluqu(e){var n=e.value;return this.addHistoryItem(n),{inputKluqPoshuku:n||"",kluqPoshuku:n||""}}},{key:"onInputKluq",value:function onInputKluq(e){return{inputKluqPoshuku:e.value||""}}},{key:"onSortBy",value:function onSortBy(e){return{sortBy:e.value||"-title"}}},{key:"onShowMore",value:function onShowMore(e,n){var r=e.size,i=void 0===r?50:r;return{shownLimit:n.shownLimit+i}}}]),ItemCollectionController}(v.Service);n.ItemCollectionController=b},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.NewItemController=void 0;var o=i(r(36)),a=i(r(16)),u=i(r(1)),l=i(r(2)),c=i(r(5)),s=i(r(6)),f=i(r(4)),p=r(8),v=["error","lastUpdatedItemId"];function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,i=(0,f.default)(e);if(n){var o=(0,f.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,s.default)(this,r)}}var m=function(e){(0,c.default)(NewItemController,e);var n=_createSuper(NewItemController);function NewItemController(){return(0,u.default)(this,NewItemController),n.apply(this,arguments)}return(0,l.default)(NewItemController,[{key:"upsert",value:function upsert(e){throw new Error("Method not implemented.")}},{key:"submitData",value:function submitData(e){var n,r,i,u,l;return o.default.async((function submitData$(c){for(;;)switch(c.prev=c.next){case 0:if(e){c.next=2;break}return c.abrupt("return",null);case 2:return c.next=4,o.default.awrap(this.upsert(e));case 4:if(n=c.sent,r=n.error,i=n.lastUpdatedItemId,u=(0,a.default)(n,v),console.log(r,u),!r){c.next=13;break}return l=null==r?void 0:r.message,this.toast({id:l,mode:"error",message:"Error: "+l}),c.abrupt("return",null);case 13:return this.toast({message:"Added successfully. ",timeout:5e3,link:"#/task?itemId="+i}),c.abrupt("return",{info:{open:!1,data:{}}});case 15:case"end":return c.stop()}}),null,this,null,Promise)}},{key:"onOpenAddNew",value:function onOpenAddNew(){return{info:{data:this.data,open:!0}}}},{key:"onCancel",value:function onCancel(){return{info:{open:!1}}}},{key:"onSubmit",value:function onSubmit(e){return this.submitData(e)}}]),NewItemController}(p.Service);n.NewItemController=m},function(e,n,r){var i=function(e){"use strict";var n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function define(e,n,r){return Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[n]}try{define({},"")}catch(e){define=function define(e,n,r){return e[n]=r}}function wrap(e,n,r,i){var o=n&&n.prototype instanceof Generator?n:Generator,a=Object.create(o.prototype),u=new Context(i||[]);return a._invoke=function makeInvokeMethod(e,n,r){var i="suspendedStart";return function invoke(o,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===o)throw a;return doneResult()}for(r.method=o,r.arg=a;;){var u=r.delegate;if(u){var c=maybeInvokeDelegate(u,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===i)throw i="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i="executing";var s=tryCatch(e,n,r);if("normal"===s.type){if(i=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(i="completed",r.method="throw",r.arg=s.arg)}}}(e,r,u),a}function tryCatch(e,n,r){try{return{type:"normal",arg:e.call(n,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var l={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var c={};define(c,o,(function(){return this}));var s=Object.getPrototypeOf,f=s&&s(s(values([])));f&&f!==n&&r.call(f,o)&&(c=f);var p=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function defineIteratorMethods(e){["next","throw","return"].forEach((function(n){define(e,n,(function(e){return this._invoke(n,e)}))}))}function AsyncIterator(e,n){var i;this._invoke=function enqueue(o,a){function callInvokeWithMethodAndArg(){return new n((function(i,u){!function invoke(i,o,a,u){var l=tryCatch(e[i],e,o);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==typeof s&&r.call(s,"__await")?n.resolve(s.__await).then((function(e){invoke("next",e,a,u)}),(function(e){invoke("throw",e,a,u)})):n.resolve(s).then((function(e){c.value=e,a(c)}),(function(e){return invoke("throw",e,a,u)}))}u(l.arg)}(o,a,i,u)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(e,n){var r=e.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,maybeInvokeDelegate(e,n),"throw"===n.method))return l;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var i=tryCatch(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,l;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,l):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,l)}function pushTryEntry(e){var n={tryLoc:e[0]};1 in e&&(n.catchLoc=e[1]),2 in e&&(n.finallyLoc=e[2],n.afterLoc=e[3]),this.tryEntries.push(n)}function resetTryEntry(e){var n=e.completion||{};n.type="normal",delete n.arg,e.completion=n}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function next(){for(;++i<e.length;)if(r.call(e,i))return next.value=e[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return a.next=a}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(p,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===GeneratorFunction||"GeneratorFunction"===(n.displayName||n.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,u,"GeneratorFunction")),e.prototype=Object.create(p),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,a,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(n,r,i,o,a){void 0===a&&(a=Promise);var u=new AsyncIterator(wrap(n,r,i,o),a);return e.isGeneratorFunction(r)?u:u.next().then((function(e){return e.done?e.value:u.next()}))},defineIteratorMethods(p),define(p,u,"Generator"),define(p,o,(function(){return this})),define(p,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var n=[];for(var r in e)n.push(r);return n.reverse(),function next(){for(;n.length;){var r=n.pop();if(r in e)return next.value=r,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var n=this;function handle(r,i){return a.type="throw",a.arg=e,n.next=r,i&&(n.method="next",n.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return handle("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0);if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return handle(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return handle(o.finallyLoc)}}}},abrupt:function abrupt(e,n){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=n,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(u)},complete:function complete(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),l},finish:function finish(e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),l}},catch:function _catch(e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var o=i.arg;resetTryEntry(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(e,n,r){return this.delegate={iterator:values(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=i}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.ItemController=void 0;var o=i(r(36)),a=i(r(16)),u=i(r(3)),l=i(r(1)),c=i(r(2)),s=i(r(5)),f=i(r(6)),p=i(r(4)),v=r(8),m=r(35),y=r(7),g=["error","lastUpdatedItemId"];function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,i=(0,p.default)(e);if(n){var o=(0,p.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,f.default)(this,r)}}var b={},k=function(e){(0,s.default)(ItemController,e);var n=_createSuper(ItemController);function ItemController(){var e;(0,l.default)(this,ItemController);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).itemId="",e.onChange=function(n){return b[e.itemId]=(0,u.default)({},b[e.itemId],n),{counter:NaN}},e}return(0,c.default)(ItemController,[{key:"initialElement",get:function get(){var e,n=this;return Array.isArray(this.all)?this.all.find((function(e){return e.id==n.itemId})):null==(e=this.all)?void 0:e[this.itemId]}},{key:"initialData",get:function get(){var e=this.initialElement;return null!=e&&e.id?e.$dataset:null}},{key:"actualData",get:function get(){var e,n=this.initialData;if(!n)return null;var r=(0,u.default)({},this.context,n,b[this.itemId]);return null==(e=this.meta)||e.map((function(e){var n=e.id,i=e.visible;!(!i||(0,y.getPredicat)(i)(r))&&r[n]&&(r[n]="")})),r}},{key:"item",get:function get(){return new m.Item(this.actualData||{})}},{key:"itemNavInfo",get:function get(){var e;return(0,u.default)({prev:null,next:null},null==(e=this.initialElement)?void 0:e.$navInfo)}},{key:"itemTitle",get:function get(){var e;return null==(e=this.initialElement)?void 0:e.title}},{key:"touched",get:function get(){return!!b[this.itemId]}},{key:"upsert",value:function upsert(e){throw new Error("upsert not defined."+e)}},{key:"submitData",value:function submitData(e){var n,r,i,u,l;return o.default.async((function submitData$(c){for(;;)switch(c.prev=c.next){case 0:if(e){c.next=2;break}return c.abrupt("return",null);case 2:return c.next=4,o.default.awrap(this.upsert(e));case 4:if(n=c.sent,r=n.error,i=n.lastUpdatedItemId,u=(0,a.default)(n,g),console.log(r,u),!r){c.next=13;break}return l=null==r?void 0:r.message,this.toast({id:l,mode:"error",message:"Error: "+l}),c.abrupt("return",null);case 13:return delete b[this.itemId],this.toast({message:"Saved successfully.",timeout:5e3,link:"#/task?itemId="+i}),c.abrupt("return",{counter:NaN});case 16:case"end":return c.stop()}}),null,this,null,Promise)}},{key:"onSave",value:function onSave(){return this.submitData(this.actualData)}},{key:"onDelete",value:function onDelete(){var e,n=(null==(e=this.initialElement)?void 0:e.id).id;return n?this.submitData({id:n,status:"deleted"}):null}}]),ItemController}(v.Service);n.ItemController=k},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.MultivalueController=void 0;var o=i(r(9)),a=i(r(1)),u=i(r(2)),l=i(r(5)),c=i(r(6)),s=i(r(4)),f=r(7);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,i=(0,s.default)(e);if(n){var o=(0,s.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,c.default)(this,r)}}var p=function(e){(0,l.default)(MultivalueController,e);var n=_createSuper(MultivalueController);function MultivalueController(){var e;(0,a.default)(this,MultivalueController);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).value="",e}return(0,u.default)(MultivalueController,[{key:"items",get:function get(){var e=this;return this.bits.map((function(n){var r,i;return{id:n,name:(null==(r=e.optionsHash)||null==(i=r[n])?void 0:i.name)||n}}))}},{key:"bits",get:function get(){return this.value?this.value.split(","):[]}},{key:"setOptions",value:function setOptions(e){this.optionsHash=(0,f.arrayToObject)(e),this.options=e}},{key:"selectedOptions",get:function get(){var e,n=this,r=null==(e=this.options)?void 0:e.filter((function(e){return n.bits.includes(e.id)}));return null!=r&&r.length?r:null}},{key:"availableOptions",get:function get(){var e,n=this,r=null==(e=this.options)?void 0:e.filter((function(e){return!n.bits.includes(e.id)}));return null!=r&&r.length?r:null}},{key:"change",value:function change(e){throw new Error("change not defined."+e)}},{key:"onToggleOpened",value:function onToggleOpened(e,n){var r=n.opened;return{opened:!(void 0!==r&&r)}}},{key:"onReset",value:function onReset(){this.change({value:""})}},{key:"onInsert",value:function onInsert(e){var n=e.value,r=void 0===n?"":n;return this.change({value:[].concat((0,o.default)(this.bits),[r]).join(",")}),{opened:!1}}},{key:"onDelete",value:function onDelete(e){var n=e.value,r=void 0===n?"":n;this.change({value:this.bits.filter((function(e){return e!==r})).join(",")})}}]),MultivalueController}(r(8).Service);n.MultivalueController=p},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.SuggestionController=void 0;var o=i(r(9)),a=i(r(1)),u=i(r(2)),l=i(r(5)),c=i(r(6)),s=i(r(4));function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,i=(0,s.default)(e);if(n){var o=(0,s.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,c.default)(this,r)}}var f=function(e){(0,l.default)(SuggestionController,e);var n=_createSuper(SuggestionController);function SuggestionController(){var e;(0,a.default)(this,SuggestionController);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).value="",e}return(0,u.default)(SuggestionController,[{key:"bits",get:function get(){return this.value?this.value.split(",").map((function(e){return e.trim()})).filter(Boolean):[]}},{key:"lastBitIncluded",get:function get(){var e=this.bits;if(!e.length)return!1;var n=e[e.length-1]||"";return this.options.some((function(e){return e.id===n}))}},{key:"smartOptions",get:function get(){var e=this.options,n=this.bits;if(!n.length)return e;var r=n[n.length-1]||"";if(r.length>1&&!this.lastBitIncluded){var i=r.toLowerCase();e=e.filter((function(e){return(e.name||e.id).toLowerCase().includes(i)}))}return(e=e.filter((function(e){return!n.includes(e.id)}))).slice(0,15)}},{key:"actualOptions",get:function get(){var e=this.options,n=String(this.value||""),r=(null==n?void 0:n.toLowerCase())||"";if(r.length<2)return e.slice(0,15);var i=e.filter((function(e){return(e.name||e.id).toLowerCase().startsWith(r)}));return 1===i.length&&n===i[0].id?null:i.slice(0,15)}},{key:"change",value:function change(e){throw new Error("change not defined."+e)}},{key:"onOpen",value:function onOpen(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{opened:e}}},{key:"onReset",value:function onReset(){this.change({value:""})}},{key:"onAppend",value:function onAppend(e){var n=e.value,r=void 0===n?"":n,i=this.bits;this.lastBitIncluded||i.pop(),this.change({value:[].concat((0,o.default)(i),[r]).join(", ")})}},{key:"onCutLast",value:function onCutLast(){var e=this.bits;e.pop(),this.change({value:(0,o.default)(e).join(", ")})}},{key:"onChange",value:function onChange(e){var n=e.value,r=void 0===n?"":n;return this.change({value:r}),{opened:!1}}}]),SuggestionController}(r(8).Service);n.SuggestionController=f},function(e,n,r){"use strict";r.r(n),n.default='<component id="Forma">\n  <div autocomplete="off" class="form-horizontal px-2">\n    <FormController ui:ref="formController" data="{data}" meta="{meta}" change="{change}" />\n    <ui:tag tag="{field.type|capitalize}Field" ui:props="{field}" ui:if="field.visible" ui:for="field of <-formController.fieldProps" />\n  </div>\n</component>\n\n<component id="GroupForma">\n  <div autocomplete="off" class="form-horizontal px-2">\n    <FormController ui:ref="formController" data="{data}" meta="{meta}" change="{change}" groups="{groups}" />\n    <FieldGroup ui:props="{group}" ui:for="group of <-formController.fieldsGroups" />\n  </div>\n</component>\n\n<component id="TabbedForma">\n  <div autocomplete="off" class="form-horizontal px-2">\n    <FormController ui:ref="formController" data="{data}" meta="{meta}" change="{change}" tabs="{tabs}" groups="{groups}" />\n    <TabbedFormaContent ui:props="<-formController.tabsInfo" />\n  </div>\n</component>\n\n<component id="TabbedFormaContent">\n  <Tabs items="{tabs}" change="->tabId|dot:id" value="{tabId|or:@initialTab}" ui:if="enabled" />\n  <div ui:if="tabId|or:@initialTab|equals:@tab.id" ui:for="tab of tabs">\n    <FieldGroup ui:props="{group}" ui:for="group of tab.items" />\n  </div>\n</component>\n\n<component id="FieldGroup">\n  <h6 class="mt-2 pt-2 px-2 text-gray">{name|or:id}</h6>\n  <div class="panel">\n    <div class="p-2">\n      <ui:tag tag="{field.type|capitalize}Field" ui:props="{field}" ui:if="field.visible" ui:for="field of items" />\n    </div>\n  </div>\n</component>\n\n'},function(e,n,r){"use strict";r.r(n),n.default='<component id="Field">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <input class="form-input" type="text" disabled="{disabled}" placeholder="{placeholder}" value="{value}" change="{onChange}" />\n  </FieldItem>\n</component>\n\n<component id="TextField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <input class="form-input" name="{id}" type="text" disabled="{disabled}" placeholder="{placeholder}" value="{value}" change="{onChange}" />\n  </FieldItem>\n</component>\n\n<component id="PasswordField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <input class="form-input" name="{id}" type="password" disabled="{disabled}" placeholder="{placeholder|or:password}" value="{value}" change="{onChange}" />\n  </FieldItem>\n</component>\n\n<component id="EmailField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <input class="form-input" type="email" disabled="{disabled}" placeholder="{placeholder|or:password}" value="{value}" change="{onChange}" />\n  </FieldItem>\n</component>\n\n<component id="UrlField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <div class="input-group has-icon-right" style="height:2rem;">\n      <ui:fragment ui:if="{editing}">\n        <ui:then>\n          <input class="form-input border-0" disabled="{disabled}" type="url" blur="-> editing|not" placeholder="{placeholder}" value="{value}" change="{onChange}" />\n          <button class="btn btn-primary input-group-btn" click="-> editing|not">\n            <i class="icon icon-check" />\n          </button>\n        </ui:then>\n        <ui:else>\n          <a class="form-input text-ellipsis" href="{value}" target="{id}" ui:if="value">🔗 {value}</a>\n          <a class="form-input text-ellipsis" ui:if="value|not">{placeholder|or:-}</a>\n          <i class="form-icon icon icon-edit c-hand" click="->editing" ui:if="disabled|not" />\n        </ui:else>\n      </ui:fragment>\n    </div>\n  </FieldItem>\n</component>\n\n<component id="EmailField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <input class="form-input" disabled="{disabled}" type="email" placeholder="{placeholder}" value="{value}" change="{onChange}" />\n  </FieldItem>\n</component>\n\n<component id="DateField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <input class="form-input" disabled="{disabled}" type="date" placeholder="{placeholder}" value="{value}" change="{onChange}" />\n  </FieldItem>\n</component>\n\n<component id="DateAndWorkingHoursField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <div class="d-flex">\n      <input class="form-input" disabled="{disabled}" type="date" placeholder="{placeholder}" value="{value}" change="{onChange}" />\n      <Select class="form-select ml-2" disabled="{disabled}" change="{onChange|assignFirstArgKeyValue:key:@typeSpec}" emptyCaption="-" value="{data|dot:@typeSpec}" options=":enums.workingHours" />\n    </div>\n  </FieldItem>\n</component>\n\n<component id="DateAndTimeField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <div class="d-flex">\n      <input class="form-input flex-1" disabled="{disabled}" type="date" placeholder="{placeholder}" value="{value}" change="{onChange}" />\n      <input class="form-input flex-1 ml-2" disabled="{value|not|or:@disabled}" type="text" value="{data|dot:@typeSpec}" change="{onChange|assignFirstArgKeyValue:key:@typeSpec}" />\n    </div>\n  </FieldItem>\n</component>\n\n<component id="DatePeriodField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <div class="d-flex">\n      <input class="form-input flex-1" disabled="{disabled}" type="date" placeholder="{placeholder}" value="{value}" change="{onChange}" />\n      <input class="form-input flex-1 ml-2" style="min-width: 6rem;" disabled="{value|not|or:@disabled}" type="date" value="{data|dot:@typeSpec}" change="{onChange|assignFirstArgKeyValue:key:@typeSpec}" />\n    </div>\n  </FieldItem>\n</component>\n\n<component id="DateTimeField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <input class="form-input" disabled="{disabled}" type="datetime-local" placeholder="{placeholder}" value="{value|dateFormat:yyyy-mm-ddTt}" change="{onChange}" />\n  </FieldItem>\n</component>\n\n<component id="TimeField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <input class="form-input" disabled="{disabled}" type="text" placeholder="{placeholder}" value="{value|dateFormat:t}" change="{onChange}" />\n  </FieldItem>\n</component>\n\n<component id="NumberField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <input class="form-input" disabled="{disabled}" type="number" placeholder="{placeholder}" value="{value}" change="{onChange}" />\n  </FieldItem>\n</component>\n\n<component id="Textarea2Field">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <textarea class="form-input" style="min-height: 15vw" disabled="{disabled}" placeholder="{placeholder}" rows="3" change="{onChange}" value="{value}"></textarea>\n  </FieldItem>\n</component>\n\n<component id="BooleanField">\n  <div class="form-group">\n    <div class="col-sm-12 d-flex">\n      <label class="form-switch">\n        <span>{caption}</span>\n        <input type="checkbox" toggle="{onChange}" checked="{value|truthy}" />\n        <i class="form-icon"></i>\n      </label>\n      <div class="border-1 centroid text-secondary s-circle m-1 px-2" style="height:1.3rem; width:1.3rem;" data-value="{showHint|not}" click="->showHint|dot:value" ui:if="{hint}">\n        <span>?</span>\n      </div>\n    </div>\n    <div class="col-12" ui:if="{showHint}">\n      <p class="form-input-hint mb-1">{hint}</p>\n    </div>\n  </div>\n</component>\n\n<component id="EnumField">\n  <FieldItem caption="{caption}" class={class} error="{error}" required="{required}" hint="{hint}">\n    <Select class="form-select" change="{onChange}" value="{value|or:@defaultValue}" options="{options}" emptyCaption="{emptyCaption}" disabled="{disabled}" />\n  </FieldItem>\n</component>\n\n<component id="SelectField">\n  <FieldItem caption="{caption}" class="{class}" error="{error}" required="{required}" hint="{hint}">\n    <Select class="form-select" change="{onChange}" value="{value|or:@defaultValue}" options="{options}" emptyCaption="{emptyCaption}" disabled="{disabled}" />\n  </FieldItem>\n</component>\n\n<component id="ChoiceField">\n  <FieldItem caption="{caption}" class="{class}" error="{error}" required="{required}" hint="{hint}">\n    <div class="btn-group btn-group-block">\n      <Btn title="{option.name}" class="option-{value}{option.id|equals:@value|then::-other}" mode="{option.id|equals:@value|then:primary}" data="{option.id|pack:value}" action="{onChange}" ui:for="option of options" />\n    </div>\n  </FieldItem>\n</component>\n\n<component id="RadioField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <RadioGroup change="{onChange}" value="{value}" data="{data}" options=":enums.{typeSpec}" disabled="{disabled}" />\n  </FieldItem>\n</component>\n'},function(e,n,r){"use strict";r.r(n),n.default='<component id="SuggestionInput">\n  <div class="form-autocomplete">\n    <div class="has-icon-right">\n      <input class="form-input" type="text" disabled="{disabled}" placeholder="{placeholder}" focus="{open|fnBindArgs:true}" blur2="{open|fnBindArgs:false|fnTick:200}" keypress="{change}" value="{value}" />\n      <i class="form-icon icon icon-{value|then:cross:arrow-down} c-hand" style="margin-right:{options.length|then:1.5:0.25}rem;" click="{reset}" ui:if="disabled|not|and:@value"></i>\n      <ui:fragment ui:if="options|and:@options.length">\n        <i class="form-icon icon icon-arrow-up c-hand" click="{open|fnBindArgs:false}" ui:if="opened"></i>\n        <i class="form-icon icon icon-arrow-down c-hand" click="{open|fnBindArgs:true}" ui:if="opened|not"></i>\n      </ui:fragment>\n    </div>\n    <ul class="menu" style="position2: relative; min-width: 180px;max-height:7rem;overflow-y:auto;" ui:if="{options|and:@options.length|and:@opened}">\n      <li class="menu-item" ui:for="item of options" data-value="{item.id}" click="{change}">\n        <a>\n          <div class="tile tile-centered">\n            <div class="tile-content">{item.name|or:@item.id}</div>\n          </div>\n        </a>\n      </li>\n    </ul>\n  </div>\n</component>\n\n<component id="SuggestionField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <SuggestionController ui:ref="ctrl" options="{options}" value="{value}" change="{onChange}"/>\n    <SuggestionInput options="<-ctrl.actualOptions" value="{value}" opened="<- ctrl.opened" open="-> ctrl.open" disabled="{disabled}" change="->ctrl.change" append="->ctrl.change" reset="->ctrl.reset"/>\n  </FieldItem>\n</component>\n'},function(e,n,r){"use strict";r.r(n),n.default='<component id="Smartarea">\n  <div class="form-autocomplete" ui:if="options">\n\n    <ui:fragment ui:if="disabled">\n      <ui:then>\n        <div class="form-input" style="height: auto;min-height:1.5rem;">{value}</div>\n      </ui:then>\n      <ui:else>\n        <div class="has-icon-right" click="{open|fnBindArgs:true}">\n          <div class="form-input text-{value|then::gray}" style="height: auto;min-height:1.5rem;">{value|or:@placeholder}</div>\n          <i class="form-icon icon icon-edit c-hand" style="top: 0.71rem;"></i>\n        </div>\n      </ui:else>\n    </ui:fragment>\n\n    <Modal open="{opened}" mode="sm" ui:if="{opened}" close="{open|fnBindArgs:false}">\n      <Modal:header>\n        <h6>{caption}</h6>\n      </Modal:header>\n\n      <div class="form-autocomplete">\n        <div class="has-icon-right">\n          <textarea class="form-input" style="padding-right: 3rem;height:6rem;" keypress="{change}" value="{value}" />\n          <i class="form-icon icon icon-{value|then:cross:arrow-down} c-hand" style="top: 0.71rem;" click="{reset}" ui:if="value"></i>\n        </div>\n        <div style="overflow-y: auto;height:15rem;margin:0.5rem 0;">\n          <ul class="menu2" style="min-width: 180px;list-style: none;">\n            <li class="menu-item" ui:for="item of options" data-value="{item.id}" click="{append}">\n              <a>\n                <div class="tile tile-centered">\n                  <div class="tile-content">🏷️ {item.name|or:@item.id}</div>\n                </div>\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n\n      <Modal:footer>\n        <Btn class="float-right" mode="primary" title="OK" action="{open|fnBindArgs:false}" />\n      </Modal:footer>\n    </Modal>\n  </div>\n</component>\n\n<component id="SmartareaField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <SuggestionController ui:ref="ctrl" options="{options}" value="{value}" change="{onChange}" />\n    <Smartarea caption="{caption}" disabled="{disabled}" options="<-ctrl.smartOptions" value="{value}" disabled="{disabled}" opened="{opened}" open="->opened" placeholder="{placeholder}" change="->ctrl.change" append="->ctrl.append" reset="->ctrl.cutLast" />\n  </FieldItem>\n</component>'},function(e,n,r){"use strict";r.r(n),n.default='<component id="TextareaField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <div class="form-autocomplete" ui:if="options">\n      <ui:fragment ui:if="disabled">\n        <ui:then>\n          <div class="form-input" style="height: auto;min-height:1.5rem;white-space: pre-wrap">{value}</div>\n        </ui:then>\n        <ui:else>\n          <div class="has-icon-right" click="->opened=true">\n            <div class="form-input text-{value|then::gray}" style="height: auto;min-height:1.5rem;white-space: pre-wrap; ">{value|or:@placeholder}</div>\n            <i class="form-icon icon icon-edit c-hand" style="top: 0.71rem;"></i>\n          </div>\n        </ui:else>\n      </ui:fragment>\n      <Modal open="{opened}" mode="" ui:if="{opened}" close="->opened=false">\n        <Modal:header>\n          <h6>{caption}</h6>\n        </Modal:header>\n        <div class="form-autocomplete">\n          <div class="has-icon-right">\n            <textarea class="form-input" style="padding-right: 3rem;height:12rem;" keypress="{onChange}" value="{value}" />\n          </div>\n        </div>\n        <Modal:footer>\n          <Btn class="float-right" mode="primary" title="OK" action="->opened=false" />\n        </Modal:footer>\n      </Modal>\n    </div>\n  </FieldItem>\n</component>'},function(e,n,r){"use strict";r.r(n),n.default='<component id="FieldItem">\n  <div class="form-group {error|then:has-error} {class}">\n    <div class="col-4 col-sm-12">\n      <label class="form-label d-flex" for="input-example-1" ui:if="{caption}">\n        <div class="text-ellipsis" title="{caption}">{caption}</div>\n        <div ui:if="{required}" class="text-error text-tiny ml-1">✱</div>\n        <div class="border-1 text-secondary s-circle centroid mx-1 px-2" style="height:1.3rem;width:1.3rem;" data-value="{showHint|not}" click="->showHint|dot:value" ui:if="{hint}">\n          <span>?</span>\n        </div>\n      </label>\n    </div>\n    <div class="col-8 col-sm-12">\n      <ui:slot />\n    </div>\n    <div class="col-12">\n      <p class="form-input-hint mb-1" ui:if="{showHint}">{hint}</p>\n      <p class="form-input-hint mb-1" ui:if="{error}">{error}</p>\n    </div>\n  </div>\n</component>\n'},function(e,n,r){"use strict";r.r(n),n.default='<component id="MultiEnumAppender">\n  <div class="form-autocomplete" ui:if="options">\n    <div class="has-icon-right" click="{toggle}">\n      <div class="form-input text-gray">{placeholder}</div>\n      <i class="form-icon icon icon-{opened|then:arrow-up:plus} c-hand"></i>\n    </div>\n    <Modal open="{opened}" mode="sm" close="{toggle}">\n      <Modal:header>\n        <h6>{caption}</h6>\n      </Modal:header>\n      <div style="overflow-y: auto;height:15rem;margin:0;">\n        <ul class="menu2" style="min-width: 180px;list-style: none;">\n          <li class="menu-item" ui:for="option of options" click="-> ctrl.insert|assignKeyValue:value:@option.id">\n            <a>\n              <div class="tile tile-centered">\n                <div class="tile-content">🔸 {option.name|or:@option.id}</div>\n              </div>\n            </a>\n          </li>\n        </ul>\n      </div>\n      \x3c!-- <Modal:footer>\n        <Btn class="float-right" mode="primary" title="OK" action="{toggle}"/>\n      </Modal:footer> --\x3e\n    </Modal>\n  </div>\n</component>\n\n<component id="MultiEnumField">\n  <FieldItem caption="{caption}" class={class} error="{error}" required="{required}" hint="{hint}">\n\n    <MultivalueController ui:ref="ctrl" value="{value}" options="{options}" change="{onChange}"/>\n\n    <div class="mb-1 has-icon-right" ui:for="item of <-ctrl.items">\n      <div class="form-input" style="height: auto; min-height: 1.5rem;">\n        <div class="">{item.name}</div>\n        <i class="form-icon icon icon-cross p-2 c-hand" click="-> ctrl.delete|assignKeyValue:value:@item.id" ui:if="disabled|not"></i>\n      </div>\n    </div>\n\n    <MultiEnumAppender caption="➕ {caption}" placeholder="{placeholder}" options="<-ctrl.availableOptions" opened="<-ctrl.opened" toggle="->ctrl.toggleOpened" ui:if="disabled|not"/>\n\n  </FieldItem>\n</component>\n'},function(e,n,r){"use strict";r.r(n),n.default='<component id="TagsField">\n  <MultivalueController ui:ref="ctrl" value="{value}" options="{options}" change="{onChange}" />\n\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <div class="form-autocomplete" ui:if="options">\n      <ui:fragment ui:if="disabled">\n        <ui:then>\n          <div class="form-input" style="height: auto;min-height:1.5rem;white-space: pre-wrap">{value}</div>\n        </ui:then>\n        <ui:else>\n          <div class="has-icon-right" click="->opened=true">\n            <div class="form-input" style="height: auto;min-height:2rem;white-space: pre-wrap">\n              <div class="ui mini labels">\n                <span class="chip" style="padding:.2rem .4rem .2rem .4rem" click="-> ctrl.delete|assignKeyValue:value:@tag.id" ui:for="tag of <-ctrl.selectedOptions">\n                  <span>\n                    <b>{tag.name}</b>\n                  </span>\n                </span>\n              </div>\n              <i class="form-icon icon icon-edit c-hand" style="top: 0.91rem;"></i>\n            </div>\n          </div>\n        </ui:else>\n      </ui:fragment>\n      <Modal open="{opened}" mode="" ui:if="{opened}" close="->opened=false">\n        <Modal:header>\n          <h6>{caption}</h6>\n        </Modal:header>\n        \x3c!-- <div class="form-autocomplete">\n          <div class="has-icon-right">\n            <textarea class="form-input" style="padding-right: 3rem;height:12rem;" keypress="{onChange}" value="{value}" />\n          </div>\n        </div> --\x3e\n        <div class="chips mx-0 py-2 px-2 {class}">\n          <div class="ui mini labels">\n            <span class="chip bg-success c-hand" style="padding:1rem" click="-> ctrl.delete|assignKeyValue:value:@tag.id" ui:for="tag of <-ctrl.selectedOptions">\n              <span>\n                <b>{tag.name}</b>\n              </span>\n            </span>\n            <span class="chip c-hand" style="padding:1rem" click="-> ctrl.insert|assignKeyValue:value:@tag.id" ui:for="tag of <-ctrl.availableOptions">\n              <span>\n                <b>{tag.name}</b>\n              </span>\n            </span>\n          </div>\n        </div>\n        <Modal:footer>\n          <Btn class="float-right" mode="primary" title="OK" action="->opened=false" />\n        </Modal:footer>\n      </Modal>\n    </div>\n  </FieldItem>\n</component>'},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0});var o={userTemplates:!0};n.userTemplates=void 0;var a=i(r(119)),u=r(120);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in n&&n[e]===u[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return u[e]}}))}));var l=r(121);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in n&&n[e]===l[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return l[e]}}))}));var c=a.default;n.userTemplates=c},function(e,n,r){"use strict";r.r(n),n.default='<component id="UserBar">\n  <div class="float-right" style="width: 1.5rem;">\n    <NoUserPanel ui:if="<-auth.isSignedIn|not">\n      <ui:else>\n        <UserLoading ui:if="<-user.isLoading">\n          <ui:else>\n            <UserPanel ui:props="<-user.info" defaultImage="assets/person1.png"/>\n          </ui:else>\n        </UserLoading>\n      </ui:else>\n    </NoUserPanel>\n  </div>\n</component>\n\n<component id="UserLoading">\n  <div class="tile tile-centered">\n    <div class="tile-action">\n      <div class="dropdown dropdown-right">\n        <a class="btn btn-link dropdown-toggle" tabindex="0">\n          <div class="mx-2 loading"></div>\n        </a>\n      </div>\n    </div>\n  </div>\n</component>\n\n<component id="UserPanel">\n  <div class="tile tile-centered">\n    <div class="tile-action">\n      <div class="dropdown dropdown-right">\n        <a class="btn btn-link dropdown-toggle p-0" tabindex="0">\n          <figure class="avatar">\n            <img src="{image|or:@defaultImage}" alt="{name}" />\n          </figure>\n        </a>\n        <ul class="menu">\n          <li class="menu-item">\n            <a click="-> user.showProfile|truthy">Profile</a>\n          </li>\n          <li class="menu-item" ui:if="<- auth.canSignOut">\n            <a click="-> auth.signOut">Exit</a>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</component>\n\n<component id="NoUserPanel">\n  <div class="tile tile-centered">\n    <div class="tile-action">\n      <a class="btn btn-link dropdown-toggle" click="-> auth.signIn">\n        <Icon type="people"/>\n      </a>\n      <div class="dropdown dropdown-right">\n        <ul class="menu">\n          <li class="menu-item">\n            <a>▶️Vxod</a>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</component>\n'},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.AuthService=void 0;var o=i(r(3)),a=i(r(16)),u=i(r(1)),l=i(r(2)),c=i(r(5)),s=i(r(6)),f=i(r(4)),p=r(8),v=r(15),m=["error"],y=["error"];function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,i=(0,f.default)(e);if(n){var o=(0,f.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,s.default)(this,r)}}var g=function(e){(0,c.default)(AuthService,e);var n=_createSuper(AuthService);function AuthService(){var e;(0,u.default)(this,AuthService);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).authUrl="",e.persistence="transient",e}return(0,l.default)(AuthService,[{key:"init",value:function init(){return this.local=new v.Storage(this.persistence),this.initialToken?{token:this.initialToken}:null}},{key:"token",get:function get(){var e;return this.initialToken||(null==(e=this.local)?void 0:e.get("$auth_token"))},set:function set(e){var n;null==(n=this.local)||n.set("$auth_token",e)}},{key:"isSignedIn",get:function get(){return!!this.token}},{key:"canSignOut",get:function get(){return!this.initialToken}},{key:"signOut",value:function signOut(){return new v.Storage("local").clear(),new v.Storage("session").clear(),this.initialToken=null,this.token=null,window.location.reload(),null}},{key:"signIn",value:function signIn(e){var n=e||{},r=n.username,i=n.password;return fetch(this.authUrl+"?action=signin",{method:"POST",mode:"cors",redirect:"follow",body:JSON.stringify({creds:r+":"+i})}).then((function(e){return e.json()})).then((function(e){var n=e.error,r=(0,a.default)(e,m);if(n)throw new Error("Invalid credentials");return r}))}},{key:"signUp",value:function signUp(e){return fetch(this.authUrl+"?action=signup",{method:"POST",mode:"cors",redirect:"follow",body:JSON.stringify({data:e})}).then((function(e){return e.json()})).then((function(e){var n=e.error,r=(0,a.default)(e,y);if(n)throw n;return r}))}},{key:"onInvalidateToken",value:function onInvalidateToken(){return this.signOut()}},{key:"onSignIn",value:function onSignIn(e){var n=this;return{busy:!0,"*":this.signIn(e).catch((function(e){return n.toast("error: "+e.message),null})).then((function(e){return(0,o.default)({busy:!1},e)}))}}},{key:"onSignUp",value:function onSignUp(e){var n=this;return{busy:!0,"*":this.signUp(e).catch((function(e){return n.toast("error: "+e.message),null})).then((function(e){return(0,o.default)({busy:!1},e)}))}}},{key:"onSignOut",value:function onSignOut(){var e;this.signOut(),null==(e=this.afterSignedOut)||e.call(this)}}]),AuthService}(p.Service);n.AuthService=g},function(e,n,r){var i=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.UserService=void 0;var o=i(r(3)),a=i(r(1)),u=i(r(2)),l=i(r(5)),c=i(r(6)),s=i(r(4)),f=r(8),p=r(15);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,i=(0,s.default)(e);if(n){var o=(0,s.default)(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return(0,c.default)(this,r)}}var v=function(e){(0,l.default)(UserService,e);var n=_createSuper(UserService);function UserService(){var e;(0,a.default)(this,UserService);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).url="",e.kind="$user",e.persistence="transient",e}return(0,u.default)(UserService,[{key:"info",get:function get(){var e;return null==(e=this.local)?void 0:e.get(this.kind)},set:function set(e){var n;null==(n=this.local)||n.set(this.kind,e)}},{key:"init",value:function init(){return this.local=new p.Storage(this.persistence),this.sync()}},{key:"submit",value:function submit(e){throw new Error("Method not implemented.")}},{key:"sync",value:function sync(e){var n=this,r=this.submit({path:"?action=user",body:{delta:e}}).then((function(e){var r=e.user;return n.log("sync "+n.kind,r),{isLoading:!1,info:r}})).catch((function(e){var r=(null==e?void 0:e.message)||e||"unknown";return n.toast({id:r,mode:"error",message:"Ошибка: "+r}),{isLoading:!1,error:r}}));return{isLoading:!0,info:(0,o.default)({},this.info,e),error:null,"*":r}}},{key:"onSave",value:function onSave(e){return this.sync(e)}},{key:"onShowProfile",value:function onShowProfile(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{showProfile:e}}}]),UserService}(f.Service);n.UserService=v},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function showCounts(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"⭕",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"⭕",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"…";if(!e)return i;var o=e.total,a=e.actual;return o?a?a===o?o:a+" / "+o:r:n};n.default=function _default(e){return{showCounts:r,sandbox:function sandbox(n){return function(){try{e("<div>"+n+"</div>",{rootElement:this.$element})}catch(e){}}}}}}])}));