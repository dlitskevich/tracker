!function webpackUniversalModuleDefinition(e,n){if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var r=n();for(var o in r)("object"==typeof exports?exports:e)[o]=r[o]}}(this,(function(){return function(e){var n={};function __webpack_require__(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,__webpack_require__),o.l=!0,o.exports}return __webpack_require__.m=e,__webpack_require__.c=n,__webpack_require__.d=function(e,n,r){__webpack_require__.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,n){if(1&n&&(e=__webpack_require__(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)__webpack_require__.d(r,o,function(n){return e[n]}.bind(null,o));return r},__webpack_require__.n=function(e){var n=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(n,"a",n),n},__webpack_require__.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=37)}([function(e,n){e.exports=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){function _defineProperties(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.exports=function _createClass(e,n,r){return n&&_defineProperties(e.prototype,n),r&&_defineProperties(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){function _extends(){return e.exports=_extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,_extends.apply(this,arguments)}e.exports=_extends,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){function _getPrototypeOf(n){return e.exports=_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,_getPrototypeOf(n)}e.exports=_getPrototypeOf,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){var o=r(43);e.exports=function _inherits(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&o(e,n)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){var o=r(44).default,i=r(45);e.exports=function _possibleConstructorReturn(e,n){if(n&&("object"===o(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.Service=void 0;var i=o(r(1)),a=o(r(2)),u=o(r(20)),l=(0,o(r(21)).default)("$"),c=function(){function Service(e,n){(0,i.default)(this,Service),Object.defineProperty(this,l,{writable:!0,value:void 0}),this.state=e,(0,u.default)(this,l)[l]=n}return(0,a.default)(Service,[{key:"lookupService",value:function lookupService(e){return(0,u.default)(this,l)[l].getByRef(e)}},{key:"up",value:function up(e){return(0,u.default)(this,l)[l].up(e)}},{key:"defer",value:function defer(e){return(0,u.default)(this,l)[l].defer(e)}},{key:"emit",value:function emit(e,n){var r;return null==(r=(0,u.default)(this,l)[l])?void 0:r.emit(e,n)}},{key:"createEmitter",value:function createEmitter(e){var n=this;return function(r){return n.emit(e,r)}}},{key:"res",value:function res(e){return(0,u.default)(this,l)[l].res(e)}},{key:"log",value:function log(e){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return(n=(0,u.default)(this,l)[l]).log.apply(n,[e].concat(o))}},{key:"handleError",value:function handleError(e){var n=e.message,r=void 0===n?"":n,o=e.code,i=void 0===o?"":o,a=this.lookupService("errorHandler");a?a.handleError({message:r,code:i,source:(0,u.default)(this,l)[l]}):console.error((0,u.default)(this,l)[l].ref+": ERROR: ",r,i)}},{key:"toast",value:function toast(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ok";this.emit("toasters.send","string"==typeof e?{message:e}:e)}}]),Service}();n.Service=c},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(47);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===o[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return o[e]}}))}));var i=r(52);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===i[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return i[e]}}))}));var a=r(55);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return a[e]}}))}));var u=r(27);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===u[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return u[e]}}))}));var l=r(56);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===l[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return l[e]}}))}));var c=r(57);Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===c[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return c[e]}}))}));var s=r(58);Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===s[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return s[e]}}))}));var f=r(59);Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===f[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return f[e]}}))}));var p=r(60);Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===p[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return p[e]}}))}));var h=r(26);Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===h[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return h[e]}}))}));var v=r(28);Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===v[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return v[e]}}))}));var m=r(19);Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===m[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return m[e]}}))}));var y=r(61);Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===y[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return y[e]}}))}));var g=r(62);Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===g[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return g[e]}}))}));var b=r(63);Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===b[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return b[e]}}))}));var k=r(29);Object.keys(k).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===k[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return k[e]}}))}));var _=r(30);Object.keys(_).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===_[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return _[e]}}))}))},function(e,n,r){var o=r(39),i=r(23),a=r(17),u=r(40);e.exports=function _toConsumableArray(e){return o(e)||i(e)||a(e)||u()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){var o=r(24),i=r(46),a=r(17),u=r(25);e.exports=function _slicedToArray(e,n){return o(e)||i(e,n)||a(e,n)||u()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function _defineProperty(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.compileNodes=n.compileNode=void 0;var o=r(64),i=r(65),a=r(66),u=r(67),l=r(70),c=function compileNode(e){var n=e.tag,r=e.attrs,c=null==r?void 0:r["ui:for"];if(c)return delete r["ui:for"],new u.CForNode(e,String(c).trim().split(" "));var s=null==r?void 0:r["ui:if"];if(s)return delete r["ui:if"],new l.CIfNode(e,String(s));if("ui:tag"===n){var f=(null==r?void 0:r.tag)||n;return null==r||delete r.tag,new i.CDynamicTagNode(e,String(f))}return"ui:slot"===n?new o.CSlotNode(e):"ui:fragment"===n?new o.CFragmentNode(e):"#text"===n?new a.CTextElementNode(e):n[0].match(/[A-Z]/)?new o.CCompositeNode(e):new a.CElementNode(e)};n.compileNode=c;n.compileNodes=function compileNodes(e){return new Map((null==e?void 0:e.map(c).map((function(e){return[e.uid,e]})))||[])}},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.CNode=void 0;var i=o(r(9)),a=o(r(3)),u=o(r(11)),l=o(r(10)),c=o(r(1)),s=o(r(2)),f=r(8),p=r(31),h=function(){function CNode(){(0,c.default)(this,CNode),this.uid=(0,f.nextId)("N"),this.propertyResolvers=[],this.initializers=[]}return(0,s.default)(CNode,[{key:"createComponent",value:function createComponent(e,n){return new this.ComponentConstructor(this,e,n)}},{key:"addInitialState",value:function addInitialState(e){return this.initialState=Object.entries(e).reduce((function(e,n){var r=(0,l.default)(n,2),o=r[0],i=r[1];return e[o]=i,e}),this.initialState||{}),this}},{key:"addPropertyResolver",value:function addPropertyResolver(e,n){return this.propertyResolvers.push((function(r,o){return o[n]=e(r),o})),this}},{key:"addPropertiesResolver",value:function addPropertiesResolver(e){return this.propertyResolvers.push((function(n,r){var o=e(n);return o&&"object"==typeof o&&Object.entries(o).forEach((function(e){var n=(0,l.default)(e,2),o=n[0],i=n[1];r[o]=i})),r})),this}},{key:"addPropertyConnector",value:function addPropertyConnector(e,n){var r=(0,p.compilePipeExpression)(e),o=r.key,i=r.pipec;this.initializers.push((function(e){return e.connect(o,(function(r){return n(i(e,r))}))}))}},{key:"addEmitter",value:function addEmitter(e,n){var r=(0,p.compilePipeExpression)(e),o=r.key,i=r.pipec;this.initializers.push((function(e){return{payload:(0,u.default)({},n,(function(n){var r;return null==(r=e.$scope)?void 0:r.emit(o,i(e,n))}))}}))}},{key:"resolveInitialProps",value:function resolveInitialProps(e){return this.resolveProps(e,(0,a.default)({},this.initialState))}},{key:"resolveProps",value:function resolveProps(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.propertyResolvers.reduce((function(n,r){return r(e,n)}),n)}},{key:"compileAttribute",value:function compileAttribute(e,n){if("id"===e)this.addInitialState((0,u.default)({},e,n));else if(e.startsWith("ui:")){var r=String(n);"ui:ref"===e?this.refId=r:"ui:props"===e&&("<"===r[0]&&"-"===r[1]?this.addPropertyConnector(r.slice(2),f.identity):this.addPropertiesResolver((0,p.compileExpression)(n)))}else"string"!=typeof n?this.addInitialState((0,u.default)({},e,n)):"<"===n[0]&&"-"===n[1]?this.addPropertyConnector(n.slice(2),(function(n){return(0,u.default)({},e,n)})):"-"===n[0]&&">"===n[1]?this.addEmitter(n.slice(2),e):n.includes("{")||":"===n[0]?this.addPropertyResolver((0,p.compileExpression)(n),e):this.addInitialState((0,u.default)({},e,n));return this}},{key:"compileAttributes",value:function compileAttributes(e){var n=this;e&&Object.entries(e).forEach((function(e){return n.compileAttribute.apply(n,(0,i.default)(e))}))}}]),CNode}();n.CNode=h},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.Component=void 0;var i=o(r(9)),a=o(r(18)),u=o(r(11)),l=o(r(10)),c=o(r(3)),s=o(r(1)),f=o(r(2)),p=o(r(20)),h=o(r(21)),v=r(32),m=r(8),y=r(30),g=(0,h.default)("parent"),b=(0,h.default)("isInited"),k=(0,h.default)("isDone"),_=(0,h.default)("listeners"),C=(0,h.default)("defered"),S=(0,h.default)("weak"),x=(0,h.default)("refs"),O=(0,h.default)("propFnMap"),I=function(){function Component(e,n,r){(0,s.default)(this,Component),this._node=e,Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,b,{writable:!0,value:!1}),Object.defineProperty(this,k,{writable:!0,value:!1}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,C,{writable:!0,value:[]}),Object.defineProperty(this,S,{writable:!0,value:void 0}),Object.defineProperty(this,x,{writable:!0,value:void 0}),Object.defineProperty(this,O,{writable:!0,value:void 0}),this.$scope=r||this,(0,p.default)(this,g)[g]=n,this.arrmatura=(null==n?void 0:n.arrmatura)||this,this.$impl=this.createImplementation(this.getInitialState()),this.refId&&this.$scope.addComponentReference(this.refId,this)}return(0,f.default)(Component,[{key:"node",get:function get(){return this._node}},{key:"displayName",get:function get(){return"🔹"}},{key:"uid",get:function get(){return this.node.uid}},{key:"createImplementation",value:function createImplementation(e){return(0,c.default)({},e)}},{key:"getInitialState",value:function getInitialState(){return this.node.resolveInitialProps(this)}},{key:"up",value:function up(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||(0,p.default)(this,k)[k])return null;if(e.then&&e.catch)return this.upAsync(e);var o=null,i=new Map;return Object.entries(e).forEach((function(e){var r=(0,l.default)(e,2),a=r[0],u=r[1];if(u&&u.then&&u.catch){var c=u;(o||(o=[])).push(n.upAsync(c,a))}else a&&void 0!==u&&u!==n.$impl[a]&&i.set(a,u)})),(i.size||r)&&(this.stateChanged(i),this.recontent(),this.refId&&this.notify()),o?Promise.all(o).then((function(e){return e.reduce((function(e,n){return(0,c.default)({},e,n)}),{})})):null}},{key:"upAsync",value:function upAsync(e,n){var r=this,o=this.raceCondition("set:"+n);if(n&&"*"!==n[0]){var i=n.replace("Promise","");e.then((function(e){return o((function(){return r.up((0,u.default)({},i,e))}))}))}else e.then((function(e){return o((function(){return r.up(e)}))}));return e}},{key:"stateChanged",value:function stateChanged(e){var n=this;this.$impl.stateChanged?this.$impl.stateChanged(e):e.forEach((function(e,r){var o=n.$impl[(0,v.methodName)(r,"set")];"function"==typeof o?o.call(n.$impl,e):n.$impl[r]=e}))}},{key:"get",value:function get(e){var n=(0,p.default)(this,O)[O]||((0,p.default)(this,O)[O]={}),r=n[e];if(r)return r();var o=this.$impl,i=o[e];if(i&&"function"==typeof i){var u=i.bind(o);r=function fn(){return u}}else{var l=e.split("."),c=(0,a.default)(l),s=c[0],f=c.slice(1),h=o[(0,v.methodName)(s,"get")],m="function"==typeof h?function(){return h.call(o)}:function(){return o[s]};r=f.length?function(){return f.reduce((function(e,n){return e&&n in e?e[n]:void 0}),m())}:m}return n[e]=r,r()}},{key:"getFromScope",value:function getFromScope(e){return this.$scope.get(e)}},{key:"notify",value:function notify(){var e;null==(e=(0,p.default)(this,_)[_])||e.notify()}},{key:"subscribe",value:function subscribe(e,n){var r=this,o=(0,p.default)(this,_)[_]||((0,p.default)(this,_)[_]=(0,y.createListeners)());return{payload:n(this),cancel:o.add((function(){try{var o=n(r);e.up(o)}catch(e){r.logError("Notify ",e)}}))}}},{key:"connect",value:function connect(e,n){var r=e.split("."),o=(0,l.default)(r,2),i=o[0],a=o[1],u=void 0===a?"*":a,c=this.$scope.getByRef(i);if(c)return c.subscribe(this,(function(e){return(0,v.applyValue)("*"===u?e.$impl:e.get(u),n)}));this.logError("Connect: No such ref: "+i)}},{key:"emit",value:function emit(e,n){if(!e||!e.includes("."))return this.log("update:"+e,n,this.$impl),this.up(e?(0,u.default)({},e,n):n);var r=e.split("."),o=(0,l.default)(r,2),i=o[0],a=o[1];try{var c=this.getByRef(i);if(!c)throw new Error("No such reference: "+i);var s=(0,v.methodName)(a,"on"),f=c.$impl,p=f[s];if(!p||"function"!=typeof p)throw new Error("No such method "+i+"."+s);var h=p.call(f,n,f,c);if(this.log(i+":"+s,h,n,f),h)return c.up(h)}catch(n){this.logError("emit "+e+":",n)}return null}},{key:"init",value:function init(e){var n=this;if(!(0,p.default)(this,k)[k]&&!(0,p.default)(this,b)[b]){(0,p.default)(this,b)[b]=!0;var r=[],o=this.node.initializers;if(null!=o&&o.length&&o.map((function(e){return e(n)})).forEach((function(o){if(o){var i=o.payload,a=o.cancel;a&&n.defer(a),i&&i.then?r.push(i):(0,c.default)(e,i)}})),r.length)Promise.all(r).then((function(r){if(n.up(r.reduce((function(e,n){return(0,c.default)(e,n)}),e),!0),n.$impl.init){var o=n.$impl.init(n);o&&n.up(o)}}));else if(this.up(e,!0),this.$impl.init){var i=this.$impl.init(this);i&&this.up(i)}return this}}},{key:"done",value:function done(){var e,n,r,o,i,a=this;if(!(0,p.default)(this,k)[k]){(0,p.default)(this,k)[k]=!0,null==(e=(n=this.$impl).done)||e.call(n,this);var u=(0,p.default)(this,g)[g];(0,p.default)(this,g)[g]=void 0,null==(r=this.$children)||r.forEach((function(e){return e.done()})),null==u||null==(o=u.$children)||o.delete(this.uid),null==(i=(0,p.default)(this,C)[C])||i.forEach((function(e){return e(a)})),(0,p.default)(this,C)[C]=void 0,this.$impl.$=null}}},{key:"content",get:function get(){return this.node.content}},{key:"recontentScope",get:function get(){return this.$scope}},{key:"setupChildren",value:function setupChildren(e){this.$children=e,e.forEach((function(e){return e.settleAsChild()}))}},{key:"settleAsChild",value:function settleAsChild(){(0,p.default)(this,b)[b]?this.up(this.node.resolveProps(this),!0):this.init(this.node.resolveInitialProps(this))}},{key:"recontent",value:function recontent(){var e,n=this,r=this.recontentScope,o=this.content;this.arrmatura.requestReflow(),null==(e=this.$children)||e.forEach((function(e,n){null!=o&&o.get(n)||e.done()}));var i=new Map;null==o||o.forEach((function(e,o){var a,u=(null==(a=n.$children)?void 0:a.get(o))||e.createComponent(n,r);i.set(u.uid,u)})),this.setupChildren(i)}},{key:"refId",get:function get(){return this._node.refId}},{key:"refs",get:function get(){return(0,p.default)(this,x)[x]||((0,p.default)(this,x)[x]={})}},{key:"getByRef",value:function getByRef(e){if("this"===e)return this;var n=this.refs[e]||null;return n||(this===this.$scope?null:this.$scope.getByRef(e))}},{key:"addComponentReference",value:function addComponentReference(e,n){this.refs[e]=n}},{key:"pipe",value:function pipe(e){return this.arrmatura.pipe(e)}},{key:"applyPipe",value:function applyPipe(e,n){var r=this;try{var o=e.split(":"),u=(0,a.default)(o),l=u[0],c=u.slice(1);return this.pipe(l).apply(this,[n].concat((0,i.default)(c.map((function(e){return"@"===e[0]?r.getFromScope(e.slice(1)):(0,m.scalarParse)(e)})))))}catch(r){return this.logError("ERROR: pipe "+e,r),n}}},{key:"raceCondition",value:function raceCondition(e){var n=(0,p.default)(this,S)[S]||((0,p.default)(this,S)[S]=new Map),r=1+(n.get(e)||0);return n.set(e,r),function(o){if(r===n.get(e))return r=0,o()}}},{key:"defer",value:function defer(e){e&&"function"==typeof e&&((0,p.default)(this,C)[C]||((0,p.default)(this,C)[C]=[])).push(e)}},{key:"log",value:function log(e){for(var n,r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return(n=console).log.apply(n,[this.displayName+":"+this.uid,e].concat(o)),e}},{key:"logError",value:function logError(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(e=console).error.apply(e,["⛔ ERROR: "+this.displayName+":"+this.uid].concat(r))}},{key:"res",value:function res(e){return this.arrmatura.res(e)}},{key:"stringify",value:function stringify(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=this.uid,r=this.displayName,o=void 0===r?n:r,a=this.$impl,u=this.$children;if("#text"===o)return""+e+a.text;var l=null!=u&&u.size?(0,i.default)(u.values()).map((function(n){return n.stringify("  "+e)})).join("\n"):"";return e+"<"+o+(0,v.stringifyState)(a)+(l?">\n"+l+"\n"+e+"</"+o+">":"/>")}},{key:"toString",value:function toString(){return this.stringify()}}]),Component}();n.Component=I},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.Storage=void 0;var i=o(r(10)),a=o(r(1)),u=o(r(2)),l=o(r(20)),c=o(r(21)),s=(0,c.default)("map"),f=function(){function MemoryStore(){(0,a.default)(this,MemoryStore),Object.defineProperty(this,s,{writable:!0,value:new Map})}return(0,u.default)(MemoryStore,[{key:"clear",value:function clear(){return(0,l.default)(this,s)[s].clear()}},{key:"getItem",value:function getItem(e){return(0,l.default)(this,s)[s].get(e)||null}},{key:"setItem",value:function setItem(e,n){(0,l.default)(this,s)[s].set(e,n)}},{key:"removeItem",value:function removeItem(e){(0,l.default)(this,s)[s].delete(e)}}]),MemoryStore}(),p=function(){function Storage(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";(0,a.default)(this,Storage),this.ns=n,this.cache={},this.storage="local"===e?window.localStorage:"session"===e?window.sessionStorage:new f}return(0,u.default)(Storage,[{key:"clear",value:function clear(){return this.cache={},this.storage.clear()}},{key:"get",value:function get(e){return this.cache[e]||(this.cache[e]=function parse(e){return e?JSON.parse(e):void 0}(this.storage.getItem(e+this.ns)))}},{key:"set",value:function set(e,n){this.cache[e]=n,n?this.storage.setItem(e+this.ns,JSON.stringify(n)):this.storage.removeItem(e+this.ns)}},{key:"assign",value:function assign(e){var n=this;Object.entries(e).forEach((function(e){var r=(0,i.default)(e,2),o=r[0],a=r[1],u=void 0===a?null:a;return n.set(o,u)}))}},{key:"transform",value:function transform(e,n){return this.set(e,n(this.get(e)))}}]),Storage}();n.Storage=p},function(e,n,r){var o=r(100);e.exports=function _objectWithoutProperties(e,n){if(null==e)return{};var r,i,a=o(e,n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(i=0;i<u.length;i++)r=u[i],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){var o=r(22);e.exports=function _unsupportedIterableToArray(e,n){if(e){if("string"==typeof e)return o(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,n):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){var o=r(24),i=r(23),a=r(17),u=r(25);e.exports=function _toArray(e){return o(e)||i(e)||a(e)||u()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.scalarParse=void 0;n.scalarParse=function scalarParse(e){if("undefined"!==e){if("null"===e)return null;if("true"===e)return!0;if("false"===e)return!1;if("0"===e)return 0;if(""===e)return"";if(e&&"1234567890+-".includes(e[0])&&e.length<=17){var n=+e;return isNaN(n)?e:n}return e}}},function(e,n){e.exports=function _classPrivateFieldBase(e,n){if(!Object.prototype.hasOwnProperty.call(e,n))throw new TypeError("attempted to use private field on non-instance");return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){var r=0;e.exports=function _classPrivateFieldKey(e){return"__private_"+r+++"_"+e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function _arrayWithHoles(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.valuesOf=n.settus=n.pack=n.keysOf=n.isEmpty=n.gettus=n.dot=n.assignKeyValue=n.assignFirstArgKeyValue=void 0;var i=o(r(9)),a=o(r(11)),u=o(r(3));n.isEmpty=function isEmpty(e){return!e||"object"==typeof e&&(null===e||(Array.isArray(e)?0===e.length:e instanceof Map?0===e.size:0===Object.keys(e).length))};n.dot=function dot(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name";return e?e[n]:null};n.keysOf=function keysOf(e){return e?Object.keys(e):null};n.valuesOf=function valuesOf(e){return e?Object.keys(e):null};n.assignKeyValue=function assignKeyValue(e,n,r){return(0,u.default)(e||{},(0,a.default)({},n,r))};n.assignFirstArgKeyValue=function assignFirstArgKeyValue(e,n,r){return function(o){for(var l=arguments.length,c=new Array(l>1?l-1:0),s=1;s<l;s++)c[s-1]=arguments[s];return e.call.apply(e,[null,(0,u.default)(o||{},(0,a.default)({},n,r))].concat((0,i.default)(c.slice(1))))}};n.pack=function pack(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value";return(0,a.default)({},n,e)};n.gettus=function gettus(e,n){if(e&&n&&"object"==typeof e){if("function"==typeof n)return n(e);if("string"==typeof n){if(!n.includes("."))return e[n];n=n.split(".")}return n.reduce((function(e,n){return e?e[n]:void 0}),e)}};n.settus=function settus(e,n,r){if(e&&n&&"object"==typeof e)if("function"==typeof n)n(e,r);else{var o="string"==typeof n?n.split("."):n;if(o.length){var i=o.pop(),a=o.reduce((function(e,n){return e?e[n]:void 0}),e);i&&a&&"object"==typeof e&&(a[i]=r)}}}},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.appendResourceBundle=void 0,n.setLang=function setLang(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";c=e},n.t=void 0;var i=o(r(3)),a=o(r(53)),u=o(r(54));function _createForOfIteratorHelperLoose(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function _unsupportedIterableToArray(e,n){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(e,n)}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}var l={en:a.default,ru:u.default},c="en";var s=function deep(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c,r=l[n];if(null==e||!e.length)return r;for(var o,i=_createForOfIteratorHelperLoose(e);!(o=i()).done;){var a=o.value;if("object"!=typeof(r=r[a]))return}return"object"==typeof r?r:void 0};n.t=function t(e,n){var r=e?e.split("."):[],o=r.pop();if(o){var i=s(r,n);return i?i[o]:void 0}};n.appendResourceBundle=function appendResourceBundle(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c,o=n?n.split("."):void 0,a=s(o,r);a&&(0,i.default)(a,e)}},function(e,n){function str(e){return null==e?"":String(e)}function capitalize(e){var n=str(e);return n?n[0].toUpperCase()+n.slice(1):""}function camelize(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_";return str(e).split(n).map((function(e,n){return n?capitalize(e):e})).join("")}Object.defineProperty(n,"__esModule",{value:!0}),n.camelize=camelize,n.capitalize=capitalize,n.mirror=n.lowerCase=n.head=void 0,n.padLeft=function padLeft(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",o=str(e);for(;o.length<n;)o=""+r+o;return o},n.snakeCase=n.properCase=void 0,n.str=str,n.strEnhance=void 0,n.strFormat=function strFormat(e,n){return str(e).replace(/\{([\S]+)\}/i,(function(e,r){return null!=(n&&n[r])?str(n[r]):""}))},n.upperCase=n.tail=void 0;n.snakeCase=function snakeCase(e){return str(e).replace(/([a-z])([A-Z])/g,"$1_$2")};n.properCase=function properCase(e){return capitalize(camelize(e))};n.upperCase=function upperCase(e){return str(e).toUpperCase()};n.lowerCase=function lowerCase(e){return str(e).toLowerCase()};n.strEnhance=function strEnhance(e,n){return e?(""+(n||"*")).replace("*",e):""};n.tail=function tail(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";if(!e)return"";var r=e.lastIndexOf(n);return-1===r?e:e.slice(r+n.length)};n.head=function head(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";if(!e)return"";var r=e.indexOf(n);return-1===r?e:e.slice(0,r)};n.mirror=function mirror(e){return str(e).split("").reduce((function(e,n){return n+e}),"")}},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.xmlParse=n.skipQoutes=n.escapeXml=n.decodeXmlEntities=n.attributesToString=void 0,n.xmlStringify=function xmlStringify(e){var n=e.tag,r=e.attrs,o=e.nodes,i=void 0===o?[]:o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("#text"===n)return""+a+_(String((null==r?void 0:r.text)||""));var u=C(r),l=i.map((function(e){return xmlStringify(e,"  "+a)})).join("\n");return a+"<"+n+u+(l?">\n"+l+"\n"+a+"</"+n+">":"/>")};var o=r(19),i=/([a-z][a-zA-Z0-9-:]+)(="[^"]*"|={[^}]*})?/g,a=/^\s*$/,u=/<!--((?!-->)[\s\S])*-->/g,l=/(<)(\/?)([a-zа-я][a-zа-я0-9-:]*)((?:\s+[a-z][a-z0-9-:]+(?:="[^"]*"|={[^}]*})?)*)\s*(\/?)>/gi,c={img:1,input:1,br:1,col:1},s=/&#?[0-9a-z]{2,5};/g,f={amp:"&",gt:">",lt:"<",quot:'"',nbsp:" "},p={34:"&quot;",38:"&amp;",39:"&#39;",60:"&lt;",62:"&gt;"},h=/["'&<>]/g,v=function FN_ESCAPE_XML_ENTITY(e){return p[e.charCodeAt(0)]},m=function FN_XML_ENTITY(e){var n=e.substring(1,e.length-1);return"#"===n[0]?String.fromCharCode(+n.slice(1)):f[n]||" "},y=function skipQoutes(e){return'"'===e[0]&&'"'===e[e.length-1]?e.slice(1,-1):e};n.skipQoutes=y;var g=function decodeXmlEntities(e){return String(e||"").replace(s,m)};n.decodeXmlEntities=g;var b=function addNode(e,n){var r={tag:n};return(e.nodes||(e.nodes=[])).push(r),r},k=function parseAttrs(e,n){if(n){e.attrs={};for(var r=i.exec(n);r;r=i.exec(n)){var a=!r[2]||(0,o.scalarParse)(g(y(r[2].slice(1))));e.attrs[r[1]]=a}}},_=function escapeXml(e){return e?(""+e).replace(h,v):""};n.escapeXml=_;var C=function attributesToString(e){return"object"==typeof e?Array.isArray(e)?e.length?"["+attributesToString(e[0])+" x"+e.length+"]":"[]":"{"+Object.keys(e).toString()+"}":e};n.attributesToString=C;n.xmlParse=function xmlParse(e){for(var n=[{tag:"#root"}],r=String(e).trim().replace(u,""),o=0,i=l.exec(r);i;i=l.exec(r)){var s=i.index&&r.slice(o,i.index);if(s&&!s.match(a))b(n[0],"#text").attrs={text:g(s)};if(i[2]){if(n[0].tag!==i[3])throw new Error(" XML Parse closing tag does not match at: "+i.index+" near "+i.input.slice(Math.max(i.index-150,0),i.index)+"^^^^"+i.input.slice(i.index,Math.min(i.index+150,i.input.length)));n.shift()}else{var f=b(n[0],i[3]);if(k(f,i[4].trim()),!i[5]&&!(i[3]in c)&&(n.unshift(f),1===n.length))throw new Error("Parse error at: "+i[0])}o=l.lastIndex}return n[0].nodes||[]}},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createListeners=function createListeners(){var e=new Set;return{add:function add(n){return e.add(n),function(){return e.delete(n)}},notify:function notify(n){e.forEach((function(e){return e(n)}))}}}},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.compileExpression=function compileExpression(e){if("string"!=typeof e)return function(){return e};if(":"===e[0])return function resourceExpression(e){var n=compilePipeExpression(e),r=n.key,o=n.pipec,i=stringInterpolation(r);return o.length?function(e){return o(e,e.res(i(e)))}:function(e){return e.res(i(e))}}(e.slice(1).trim());if(!e.includes("{")){var n=(0,a.scalarParse)(e);return function(){return n}}if(e.match(u))return placeholder(e.slice(1,-1).trim());return stringInterpolation(e)},n.compilePipeExpression=compilePipeExpression,n.withPipes=withPipes;var i=o(r(18)),a=r(8),u=/^\{([^}]+)\}$/,l=/\{([^}]+)\}/g,c=function withNoPipes(e,n){return n};function withPipes(e){return e.length?function(n,r){return e.reduce((function(e,r){return n.applyPipe(r,e)}),r)}:c}function compilePipeExpression(e){var n=function splitExpression(e){return e.split("|").map((function(e){return e.trim()}))}(e),r=(0,i.default)(n);return{key:r[0],pipec:withPipes(r.slice(1))}}function stringInterpolation(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e.trim().replace(l,(function(e,r){return n.push(placeholder(r)),"{{"+(n.length-1)+"}}"}));return n.length?function(e){return r.replace(/\{\{(\d+)\}\}/g,(function(r,o){var i=n[Number(o)](e);return i||0===i?String(i):""})).replace(/\s+/g," ")}:function(e){return r}}function placeholder(e){var n,r=compilePipeExpression(e),o=r.key,i=r.pipec,a=":"===o[0]?(n=o.slice(1),function(e){return e.res(n)}):function(e){return e.getFromScope(o)};return i.length?function(e){return i(e,a(e))}:a}},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.stringifyState=n.methodName=n.fnName=n.applyValue=void 0;var i=o(r(10)),a=r(8);n.applyValue=function applyValue(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.identity;return null!=e&&e.then?e.then(n):n(e)};n.fnName=function fnName(e){return(/^function\s+([\w$]+)\s*\(/.exec(e.toString())||[])[1]||(0,a.nextId)("C")};n.methodName=function methodName(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=""+(e||"");return n+r[0].toUpperCase()+r.slice(1)};n.stringifyState=function stringifyState(e){if(!e)return"";var n=[];return Object.entries(e).forEach((function(e){var r=(0,i.default)(e,2),o=r[0],u=r[1];u&&"$"!==o[0]&&n.push(" "+o+'="'+(0,a.attributesToString)(u)+'"')})),n.length?n.join(""):""}},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.registerTypes=n.getByTag=n.REGISTRY=n.ComponentDefinition=void 0;var i=o(r(1)),a=o(r(2)),u=r(12),l=r(8),c=r(32),s=function(){function ComponentDefinition(e){var n=e.tag,r=e.template,o=e.Ctor;(0,i.default)(this,ComponentDefinition),this.tag=n,this.template=r,this.Ctor=o||function(){}}return(0,a.default)(ComponentDefinition,[{key:"content",get:function get(){return this.$templateContent||(this.$templateContent=(0,u.compileNodes)((0,l.xmlParse)(this.template)))}}]),ComponentDefinition}();n.ComponentDefinition=s;var f=new Map;n.REGISTRY=f;var p=function setInfo(e){return f.set(e.tag,new s(e))},h=function registerType(e){"string"==typeof e?e.replace(/<component\s+id="(.+)">([\s\S]*?)<\/component>/gm,(function(e,n,r){return p({tag:n,template:r.trim()}),""})):p("function"==typeof e?{Ctor:e,tag:e.name||(0,c.fnName)(e)}:e)};n.registerTypes=function registerTypes(e){return null==e?void 0:e.forEach(h)};n.getByTag=function getByTag(e){return f.get(e)||function notFound(e){return new s({tag:e,template:"<b>??"+e+"??</b>"})}(e)}},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.FormController=void 0;var i=o(r(11)),a=o(r(10)),u=o(r(1)),l=o(r(2)),c=o(r(5)),s=o(r(6)),f=o(r(4)),p=o(r(3)),h=r(8),v=r(7);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=(0,f.default)(e);if(n){var i=(0,f.default)(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(0,s.default)(this,r)}}var m=function getFieldsGroups(e,n){return Object.values((0,h.arrayGroupBy)(e,"group")).map((function(e){return(0,p.default)({name:(null==n?void 0:n[e.id])||e.id},e)}))},y=function(e){(0,c.default)(FormController,e);var n=_createSuper(FormController);function FormController(){var e;(0,u.default)(this,FormController);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).data={},e}return(0,l.default)(FormController,[{key:"setData",value:function setData(e){var n=(0,p.default)({},e);this.data=n}},{key:"fieldsGroups",get:function get(){return m(this.fieldProps,this.groups)}},{key:"tabsInfo",get:function get(){var e,n=this,r=Object.values((0,h.arrayGroupBy)(this.fieldProps,(function(e){var n=e.tab;return void 0===n?"tab":n}))).map((function(e){var r,o=e.id,i=e.items;return{id:o,name:(null==(r=n.tabs)?void 0:r[o])||o,items:m(i,n.groups)}}));return{enabled:r.length>1,initialTab:null==r||null==(e=r[0])?void 0:e.id,tabs:r}}},{key:"resolveEnum",value:function resolveEnum(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;if("["===e[0])return e.slice(1,e.length-1).split(",").map((function(e){return e.trim().split("=")})).map((function(e){var n=(0,a.default)(e,2),r=n[0],o=n[1];return{id:r,name:void 0===o?r:o}}));if(!e.includes("."))return this.res("enums."+e)||[];var r,o=(0,h.strFormat)(e,n).split("."),i=(0,a.default)(o,3),u=i[0],l=i[1],c=i[2],s=this.res("enums."+u)||[];return c?(null==(r=s.find((function(e){return e.id===l})))?void 0:r[c])||[]:s}},{key:"fieldProps",get:function get(){var e,n=this;return(null==(e=this.meta)||null==e.map?void 0:e.map((function(e){var r=e.id,o=e.visible,a=e.disabled,u=void 0!==a&&a,l=e.caption,c=e.name,s=e.typeSpec,f=n,v=n.data,m=v[r];return(0,p.default)({},e,{error:f.error&&f.error.fields&&f.error.fields[r]||null,get disabled(){return(0,h.getPredicat)(u)(v)},get visible(){return(0,h.getPredicat)(o||"true")(v)},get options(){return f.resolveEnum(s,v)},value:void 0===m?null:m,caption:l||c,data:v,onChange:function onChange(e){var o=e.value,a=e.key;n.data=(0,p.default)({},n.data,(0,i.default)({},a||r,o)),null==n.change||n.change(n.data)}})})))||[]}}]),FormController}(v.Service);n.FormController=y},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.getSuggestions=n.applyNavInfo=n.analyzeDataByTags=n.Item=void 0;var i=o(r(3)),a=o(r(16)),u=o(r(1)),l=o(r(2)),c=o(r(9)),s=o(r(10)),f=r(8),p=["$"],h=["$row","$navInfo","$"];n.analyzeDataByTags=function analyzeDataByTags(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,a=Object.entries(n).filter((function(e){var n=(0,s.default)(e,2);n[0];return n[1]})).map((function(e){return(0,s.default)(e,1)[0]})),u=a.length;if(i){var l=i.split(","),f=l.slice(0,u),p=u?e.filter((function(e){return!f.find((function(n,r){return e[n]!=a[r]}))})):e,h={};return u&&(h["*"]={id:a[u-1],name:a.join(" ➡ "),count:0,selected:u>0}),p.forEach((function(e){var r=String(e[l[u]]||"");if(r){var o=h[r]||(h[r]={id:r,name:r,count:0,selected:n[r]});o.selected||o.count++}})),o.push.apply(o,(0,c.default)(Object.values(h))),p}if(u||!r){var v=e.filter((function(e){return a.reduce((function(n,r){return n&&e.getLabels().has(r)}),!0)})),m={};return a.forEach((function(e){m[e]={id:e,name:e,count:0,selected:!0}})),v.forEach((function(e){e.getLabels().forEach((function(e){var r=m[e]||(m[e]={id:e,name:e,count:0,selected:n[e],nonSelectable:!0});r.selected||(r.nonSelectable=!1,r.count++)}))})),o.push.apply(o,(0,c.default)(Object.values(m))),o.sort((function(e,n){return e.selected===n.selected?e.id>n.id?1:-1:e.selected?-1:1})),v}return o.push.apply(o,(0,c.default)(r.split(",").map((function(e){return{id:e,name:e,count:0,selected:!1}})))),e.forEach((function(e){o.forEach((function(n){e.getLabels().has(n.id)&&n.count++}))})),e};n.getSuggestions=function getSuggestions(e,n){if(!n)return null;var r={};e.forEach((function(e){return e.$searchData.replace(/[a-z0-9а-яёўі]{3,}/g,(function(e){return r[e]=1,""}))}));var o=n.toLowerCase();return(0,f.arraySortBy)(Object.keys(r).filter((function(e){return e.startsWith(o)})).map((function(e){return{name:e,id:e}})),"name")};n.applyNavInfo=function applyNavInfo(e){var n=null;return e?e.map((function(r,o){var i;return r.$navInfo={prev:n,index:o,total:e.length},null!=(i=n)&&i.$navInfo&&(n.$navInfo.next=r),n=r,r})):null};var v=function(){function Item(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(e.$,(0,a.default)(e,p));(0,u.default)(this,Item),this.$={},(0,i.default)(this,n)}return(0,l.default)(Item,[{key:"getLabels",value:function getLabels(){var e="labels";return this.$[e]||(this.$[e]=new Set(String(this[e]||this.labels).split(",").filter(Boolean)))}},{key:"$searchData",get:function get(){return"searchData"in this.$||(this.$.searchData=String(this.searchData||this.name).toLowerCase()),this.$.searchData}},{key:"$dataset",get:function get(){this.$row,this.$navInfo,this.$;return(0,a.default)(this,h)}}]),Item}();n.Item=v},function(e,n,r){e.exports=r(106)},function(e,n,r){e.exports=r(38)},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.arrmatura=arrmatura;var i=o(r(9)),a=o(r(3)),u=r(41),l=r(71),c=function _interopRequireWildcard(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache(n);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=e[a]}o.default=e,r&&r.set(e,o);return o}(r(8)),s=o(r(75)),f=o(r(120));function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var n=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?r:n})(e)}function arrmatura(e,n){var r=n.rootElement,o=n.pipes,p=n.functions,h=void 0===p?o:p,v=n.types,m=void 0===v?[]:v,y=n.resources,g={functions:(0,a.default)({},c,(0,f.default)(arrmatura),h),types:[].concat((0,i.default)(s.default),(0,i.default)(m)),resources:y};new u.CArrmaturaNode(e,g,new l.WebPlatform(r)).launch()}arrmatura.lib=c,Object.defineProperty(window,"arrmatura",{value:arrmatura})},function(e,n,r){var o=r(22);e.exports=function _arrayWithoutHoles(e){if(Array.isArray(e))return o(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o=r(42);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===o[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return o[e]}}))}))},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.CArrmaturaNode=n.Arrmatura=void 0;var i=o(r(18)),a=o(r(1)),u=o(r(2)),l=o(r(5)),c=o(r(6)),s=o(r(4)),f=r(13),p=r(12),h=r(14),v=r(29),m=r(33);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=(0,s.default)(e);if(n){var i=(0,s.default)(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(0,c.default)(this,r)}}var y=function(e){(0,l.default)(Arrmatura,e);var n=_createSuper(Arrmatura);function Arrmatura(){return(0,a.default)(this,Arrmatura),n.apply(this,arguments)}return(0,u.default)(Arrmatura,[{key:"displayName",get:function get(){return"Arrmatura"}},{key:"platform",get:function get(){return this.node.platform}},{key:"requestReflow",value:function requestReflow(){var e=this;this.reflowId||(this.reflowId=setTimeout((function(){e.platform.reflow(e),e.reflowId=void 0}),10))}},{key:"res",value:function res(e){var n=e.split("."),r=(0,i.default)(n),o=r[0],a=r.slice(1),u=this.node.resources,l=void 0===u?{}:u,c=o?null==l?void 0:l[o]:l;return c&&0!==a.length?1===a.length?c[a[0]]:a.reduce((function(e,n){return e?e[n]:null}),c):c}},{key:"pipe",value:function pipe(e){var n,r=e.split("."),o=(0,i.default)(r),a=o[0],u=o.slice(1),l=null==(n=this.node.functions)?void 0:n[a];return l&&0!==u.length?1===u.length?l[u[0]]:u.reduce((function(e,n){return e?e[n]:null}),l):l}}]),Arrmatura}(h.Component);n.Arrmatura=y;var g=function(e){(0,l.default)(CArrmaturaNode,e);var n=_createSuper(CArrmaturaNode);function CArrmaturaNode(e,r,o){var i,u=r.types,l=r.functions,c=r.resources;return(0,a.default)(this,CArrmaturaNode),i=n.call(this),(0,m.registerTypes)(u),i.functions=l,i.resources=c,i.platform=o,i.content=(0,p.compileNodes)((0,v.xmlParse)(e)),i}return(0,u.default)(CArrmaturaNode,[{key:"ComponentConstructor",get:function get(){return y}},{key:"launch",value:function launch(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.createComponent();n.up(e,!0)}}]),CArrmaturaNode}(f.CNode);n.CArrmaturaNode=g},function(e,n){function _setPrototypeOf(n,r){return e.exports=_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,n){return e.__proto__=n,e},e.exports.default=e.exports,e.exports.__esModule=!0,_setPrototypeOf(n,r)}e.exports=_setPrototypeOf,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){function _typeof(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=_typeof=function _typeof(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=_typeof=function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),_typeof(n)}e.exports=_typeof,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n){e.exports=function _iterableToArrayLimit(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,i,a=[],u=!0,l=!1;try{for(r=r.call(e);!(u=(o=r.next()).done)&&(a.push(o.value),!n||a.length!==n);u=!0);}catch(e){l=!0,i=e}finally{try{u||null==r.return||r.return()}finally{if(l)throw i}}return a}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o={arraySortBy:!0};Object.defineProperty(n,"arraySortBy",{enumerable:!0,get:function get(){return a.arraySortBy}});var i=r(48);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in n&&n[e]===i[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return i[e]}}))}));var a=r(49),u=r(50);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in n&&n[e]===u[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return u[e]}}))}));var l=r(51);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in n&&n[e]===l[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return l[e]}}))}))},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.arrayGroupBy=void 0;var o=r(26);n.arrayGroupBy=function arrayGroupBy(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"type",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=function iter(e,n){var o=r[e]||(r[e]={id:e,count:0,items:[]});o.count++,(o.items||(o.items=[])).push(n)};return null==e||e.forEach((function(e){return i((0,o.gettus)(e,n),e)})),r}},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.arraySortBy=n.ComparatorResult=n.ComparatorDirection=void 0;var i,a,u=o(r(9));n.ComparatorDirection=i,function(e){e[e.DESC=-1]="DESC",e[e.ASC=1]="ASC"}(i||(n.ComparatorDirection=i={})),n.ComparatorResult=a,function(e){e[e.EQ=0]="EQ",e[e.LESS=-1]="LESS",e[e.MORE=1]="MORE"}(a||(n.ComparatorResult=a={}));var l=function sortByComparator(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=1===n?1:-1,o=1===n?-1:1;if("string"==typeof e){var i=e;return"-"===i[0]&&(r=-1,o=1,i=e.substr(1)),function(e,n){var a=e[i],u=n[i];return a<u?o:a>u?r:0}}return function(n,i){var a=e(n),u=e(i);return a<u?o:a>u?r:0}};n.arraySortBy=function sortBy(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.ASC;return e?(0,u.default)(e).sort(l(n,r)):[]}},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.arrayToObject=void 0;n.arrayToObject=function arrayToObject(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",r=arguments.length>2?arguments[2]:void 0,o={};if(e){var i="string"==typeof n?function(e){return e[n]}:n,a="string"==typeof r?function(e){return e[r]}:r;e.forEach((function(e){o[i(e)]=a?a(e):e}))}return o}},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.split=n.slice=n.includes=n.find=n.filter=void 0;n.includes=function includes(e,n){return null==e||null==e.includes?void 0:e.includes(n)};n.slice=function slice(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return(null==e||null==e.slice?void 0:e.slice(n,r))||[]};n.split=function split(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return(null==e||null==e.split?void 0:e.split(n))||[]};n.find=function find(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id";return null==e||null==e.find?void 0:e.find((function(e){return e[r]==n}))};n.filter=function filter(e,n,r){return null==e||null==e.filter?void 0:e.filter((function(e){return!e[n]||e[n]==r}))}},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.dateFormat=n.date=void 0,n.dateOf=dateOf,n.monthName=n.fractions=n.formatTimezone=n.firstOfWeek=n.daysInMonth=n.dateParseISO8601=void 0,n.setDefaultDateFormat=function setDefaultDateFormat(e){c=e};var o=r(27),i=r(28);n.daysInMonth=function daysInMonth(e,n){return new Date(n,e+1,0).getDate()};n.firstOfWeek=function firstOfWeek(e){var n=dateOf(e);return n?new Date(n.getFullYear(),n.getMonth(),n.getDate()-n.getDay()):null};var a=function monthName(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(0,o.t)("monthNames"+n+"."+e)};n.monthName=a;n.fractions=function fractions(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()]};var u=function formatTimezone(e){var n=Number(e);return n?n>=0?"+"+(0,i.padLeft)(n/60)+":"+(0,i.padLeft)(n%60):"-"+(0,i.padLeft)(-n/60)+":"+(0,i.padLeft)(-n%60):""};n.formatTimezone=u;var l={hh:function hh(e){return(0,i.padLeft)(e.getHours())},ii:function ii(e){return(0,i.padLeft)(e.getMinutes())},hi:function hi(e){return(0,i.padLeft)(e.getHours())+":"+(0,i.padLeft)(e.getMinutes())},dd:function dd(e){return(0,i.padLeft)(e.getDate())},w:function w(e){return""+(0,o.t)("dayNames."+e.getDay())},ww:function ww(e){return""+(0,o.t)("dayNamesShort."+e.getDay())},d:function d(e){return""+e.getDate()},mmmm:function mmmm(e){return a(e.getMonth()+1,"")},mmm:function mmm(e){return a(e.getMonth()+1,"Short")},mm:function mm(e){return(0,i.padLeft)(e.getMonth()+1)},MM:function MM(e){return(0,i.padLeft)(e.getMonth()+1)},yyyy:function yyyy(e){return""+e.getFullYear()},ll:function ll(e){return""+e.getTime()},z:function z(e){return"Z"+u(e.getTimezoneOffset())}},c="yyyy-mm-dd";var s=function dateParseISO8601(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(new Date).getTimezoneOffset();if(!e)return null;10===e.length&&(e+="T12:00");var r=/^([0-9]{4})-([0-9]{2})-([0-9]{2})[ T]([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(Z?)(([+-])([0-9]{2})([0-9]{2}))?/,o=r.exec(e);if(!o)return null;var i=o[8]?o[9]?("+"===o[10]?-1:1)*(60*parseInt(o[11])+parseInt(o[12])):0:n,a=Date.UTC(parseInt(o[1]),parseInt(o[2])-1,parseInt(o[3]),parseInt(o[4]),parseInt(o[5]),o[6]&&parseInt(o[6])||0,o[7]&&parseFloat(o[7])||0);return new Date(a+6e4*i)};n.dateParseISO8601=s;var f=function dateFormat(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;if(!e)return"";var r=dateOf(e);return r?n.replace(/[_]/g,"\n").replace(/[hidwmylz]+/g,(function(e){return e in l?l[e](r):e})):""};function dateOf(e){if(null==e)return null;if("number"==typeof e)return new Date(e);if("object"==typeof e){var n=e;if(n.getTime)return new Date(n.getTime());var r=e;if(r.toDate)return r.toDate()}return"string"==typeof e?s(e):null}n.dateFormat=f;n.date=function date(e){return f(dateOf(e))}},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={monthNames:["","January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]}},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={monthNames:["","Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["","Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],dayNamesShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]}},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hash=n.guid=void 0;var r=function s4(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};n.guid=function guid(){return""+r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r()};n.hash=function hash(e){var n,r,o=1,i=0;if(e)for(o=0,n=e.length-1;n>=0;n--)o=0!==(i=266338304&(o=(o<<6&268435455)+(r=e.charCodeAt(n))+(r<<14)))?o^i>>21:o;return String(o)}},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.nextId=void 0;var r=1;n.nextId=function nextId(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e+r++}},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.curry=void 0;var i=o(r(9)),a=function _curry(e,n,r){var o=function fx(n){return n.length>=r?e.apply(void 0,(0,i.default)(n)):_curry(e,n,r-n.length)};return function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return o([].concat((0,i.default)(n),r))}};n.curry=function curry(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return a(e,r,e.length)}},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.noop=void 0;n.noop=function noop(){}},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.identity=void 0;n.identity=function identity(e){return e}},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.truthy=n.then=n.plus=n.or=n.not=n.multiply=n.minus=n.min=n.max=n.log=n.less=n.isUndefined=n.isTrue=n.isNotANumber=n.isFalse=n.greater=n.fnTick=n.fnSwapArgs=n.fnCompose=n.fnCall=n.fnBindArgs=n.equals=n.assert=n.and=void 0;n.isTrue=function isTrue(e){return!0===e};n.isFalse=function isFalse(e){return!1===e};n.isNotANumber=function isNotANumber(e){return isNaN(e)};n.isUndefined=function isUndefined(e){return void 0===e};n.then=function then(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e?n:r};n.truthy=function truthy(e){return!!e};n.not=function not(e){return!e};n.or=function or(e,n){return e||n};n.and=function and(e,n){return e&&n};n.equals=function equals(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e==n?r:o};n.greater=function greater(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e>n?r:o};n.less=function less(e,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e<n?r:o};var r=Math.min;n.min=r;var o=Math.max;n.max=o;n.plus=function plus(e,n){return+e+ +n};n.minus=function minus(e,n){return+e-+n};n.multiply=function multiply(e,n){return+e*+n};n.fnBindArgs=function fnBindArgs(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return null==e?void 0:e.bind.apply(e,[null].concat(r))};n.fnCall=function fnCall(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return e.apply(void 0,r)};n.assert=function assert(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Error;if(!e)throw"string"==typeof n?new r(n):n};n.log=function log(e,n){return console.log(n||"pipe",e),e};n.fnTick=function fnTick(e,n){return function(){return setTimeout(e,n)}};n.fnSwapArgs=function fnSwapArgs(e){return function(n,r){return e(r,n)}};n.fnCompose=function fnCompose(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(e){return n.reduceRight((function(e,n){return n(e)}),e)}}},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.encodus=n.decodus=void 0;var o=r(19);n.decodus=function decodus(e){if(e){var n=decodeURIComponent(e);if("{[".indexOf(n[0])>-1)try{return JSON.parse(n)}catch(e){return}return(0,o.scalarParse)(n)}};n.encodus=function encodus(e){return void 0===e?"":"object"==typeof e?e?encodeURIComponent(JSON.stringify(e)):"null":encodeURIComponent(String(e))}},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.getPredicat=void 0;var i=o(r(10)),a=function compilePredicatChunk(e){var n=e.match(/(\w+)\s*(!?)=\s*([,\wа-яА-Я]+)/);if(!n)return"!"===e[0]?function(n){return!n[e.slice(1)]}:function(n){return!!n[e]};var r=(0,i.default)(n,4),o=(r[0],r[1]),a=r[2],u=r[3],l=function fn(e){return u.includes(String(e[o]))};return a?function(e){return!!e[o]&&!l(e)}:l},u=function compilePredicat(e){if(!e||"FALSE"===e||"false"===e)return function(){return!1};if("ALWAYS"===e||"TRUE"===e||"true"===e||!0===e)return function(){return!0};var n=String(e).split("&&").map((function(e){return e.trim()})).filter(Boolean).map(a);return function(e){return!!n.find((function(n){return n(e)}))}},l={};n.getPredicat=function getPredicat(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return l[""+e]||(l[""+e]=u(e))}},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.urlStringify=n.urlParse=n.urlAppendParams=void 0;var i=o(r(10));n.urlParse=function urlParse(e){var n,r={path:[],params:{},host:""};if(!e)return r;var o=e;(n=o.indexOf(":"))>-1&&(r.protocol=o.slice(0,n),o=o.slice(n+1)),(n=o.indexOf("#"))>-1&&(r.hash=decodeURIComponent(o.slice(n+1)),o=o.slice(0,n)),(n=o.indexOf("?"))>-1&&(o.slice(n+1).replace(/\+/g," ").split("&").forEach((function(e){var n=e.split("="),o=(0,i.default)(n,2),a=o[0],u=o[1];u&&(r.params[decodeURIComponent(a)]=decodeURIComponent(u))})),o=o.slice(0,n)),r.path=o.split("/").map(decodeURIComponent);var a=r.path;return a.length>2&&!a[0]&&!a[1]&&(a.shift(),a.shift(),r.host=a.shift()||""),r};n.urlStringify=function urlStringify(e){var n="";if(!e)return n;e.host&&(e.protocol&&(n+=e.protocol+":"),n+="//"+e.host),null!=e&&e.path.length&&(n+="/"+e.path.map(encodeURIComponent).join("/"));var r=e.params,o=Object.keys(r).filter((function(e){return null!=r[e]}));return o.length&&(n+=("?"+o.map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])})).join("&")).replace(/ /g,"+")),e.hash&&(n+=("#"===e.hash[0]?"":"#")+encodeURIComponent(e.hash)),n};n.urlAppendParams=function urlAppendParams(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=null==(e=Object.entries(r))?void 0:e.map((function(e){var n=(0,i.default)(e,2),r=n[0],o=n[1];return r+"="+encodeURIComponent(o)})).join("&");return[n,o].filter(Boolean).join(n.includes("?")?"&":"?")}},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.SlotComponent=n.CompositeComponent=n.CSlotNode=n.CFragmentNode=n.CCompositeNode=void 0;var i=o(r(1)),a=o(r(2)),u=o(r(5)),l=o(r(6)),c=o(r(4)),s=o(r(10)),f=r(13),p=r(12),h=r(14),v=r(33);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=(0,c.default)(e);if(n){var i=(0,c.default)(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(0,l.default)(this,r)}}var m=function(e){(0,u.default)(SlotComponent,e);var n=_createSuper(SlotComponent);function SlotComponent(){return(0,i.default)(this,SlotComponent),n.apply(this,arguments)}return(0,a.default)(SlotComponent,[{key:"displayName",get:function get(){return"🔸"}},{key:"compositeScope",get:function get(){return this.$scope}},{key:"content",get:function get(){return this.compositeScope.slotContent(this.node.id)}},{key:"recontentScope",get:function get(){return this.compositeScope.$scope}}]),SlotComponent}(h.Component);n.SlotComponent=m;var y=function(e){(0,u.default)(CSlotNode,e);var n=_createSuper(CSlotNode);function CSlotNode(e){var r,o;return(0,i.default)(this,CSlotNode),(o=n.call(this)).id=null==(r=e.attrs)?void 0:r.id,o}return(0,a.default)(CSlotNode,[{key:"ComponentConstructor",get:function get(){return m}}]),CSlotNode}(f.CNode);n.CSlotNode=y;var g=function(e){(0,u.default)(CompositeComponent,e);var n=_createSuper(CompositeComponent);function CompositeComponent(){return(0,i.default)(this,CompositeComponent),n.apply(this,arguments)}return(0,a.default)(CompositeComponent,[{key:"displayName",get:function get(){return"💠"+this.node.definition.tag}},{key:"content",get:function get(){return this.node.definition.content}},{key:"recontentScope",get:function get(){return this}},{key:"slotContent",value:function slotContent(e){return this.node.slotContent[e||"default"]}},{key:"createImplementation",value:function createImplementation(e){return new this.node.definition.Ctor(e,this)}}]),CompositeComponent}(h.Component);n.CompositeComponent=g;var b=function(e){(0,u.default)(CCompositeNode,e);var n=_createSuper(CCompositeNode);function CCompositeNode(e){var r,o=e.tag,a=e.attrs,u=e.nodes;return(0,i.default)(this,CCompositeNode),(r=n.call(this)).definition=(0,v.getByTag)(o),r.compileAttributes(a),r.slotContent=function compileSlots(e,n){var r=(null==n?void 0:n.reduce((function(n,r){var o=r.tag.startsWith(e+":"),i=o?r.tag.split(":")[1]:"default";return n[i]=(n[i]||[]).concat(o?r.nodes||[]:r),n}),{}))||{};return Object.entries(r).reduce((function(e,n){var r=(0,s.default)(n,2),o=r[0],i=r[1];return e[o]=(0,p.compileNodes)(i),e}),{})}(o,u),r}return(0,a.default)(CCompositeNode,[{key:"ComponentConstructor",get:function get(){return g}}]),CCompositeNode}(f.CNode);n.CCompositeNode=b;var k=function(e){(0,u.default)(CFragmentNode,e);var n=_createSuper(CFragmentNode);function CFragmentNode(e){var r,o=e.nodes;return(0,i.default)(this,CFragmentNode),(r=n.call(this)).content=(0,p.compileNodes)(o),r}return(0,a.default)(CFragmentNode,[{key:"ComponentConstructor",get:function get(){return h.Component}}]),CFragmentNode}(f.CNode);n.CFragmentNode=k},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.DynamicTagComponent=n.CDynamicTagNode=void 0;var i=o(r(3)),a=o(r(1)),u=o(r(2)),l=o(r(5)),c=o(r(6)),s=o(r(4)),f=r(13),p=r(12);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=(0,s.default)(e);if(n){var i=(0,s.default)(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(0,c.default)(this,r)}}var h=function(e){(0,l.default)(DynamicTagComponent,e);var n=_createSuper(DynamicTagComponent);function DynamicTagComponent(){return(0,a.default)(this,DynamicTagComponent),n.apply(this,arguments)}return(0,u.default)(DynamicTagComponent,[{key:"content",get:function get(){var e=this.$impl.tag,n=this.node.uid+":"+e;return new Map([[n,(0,i.default)((0,p.compileNode)((0,i.default)(this.node.xml,{tag:e})),{uid:n})]])}}]),DynamicTagComponent}(r(14).Component);n.DynamicTagComponent=h;var v=function(e){(0,l.default)(CDynamicTagNode,e);var n=_createSuper(CDynamicTagNode);function CDynamicTagNode(e,r){var o;return(0,a.default)(this,CDynamicTagNode),(o=n.call(this)).compileAttribute("tag",r),o.xml=e,o}return(0,u.default)(CDynamicTagNode,[{key:"ComponentConstructor",get:function get(){return h}}]),CDynamicTagNode}(f.CNode);n.CDynamicTagNode=v},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.TextElementComponent=n.ElementComponent=n.CTextElementNode=n.CElementNode=void 0;var i=o(r(1)),a=o(r(2)),u=o(r(5)),l=o(r(6)),c=o(r(4)),s=r(13),f=r(12),p=r(14);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=(0,c.default)(e);if(n){var i=(0,c.default)(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(0,l.default)(this,r)}}var h=function(e){(0,u.default)(ElementComponent,e);var n=_createSuper(ElementComponent);function ElementComponent(){return(0,i.default)(this,ElementComponent),n.apply(this,arguments)}return(0,a.default)(ElementComponent,[{key:"displayName",get:function get(){return this.node.tag}},{key:"createImplementation",value:function createImplementation(e){return this.arrmatura.platform.createElement(this.node.tag,e,this)}}]),ElementComponent}(p.Component);n.ElementComponent=h;var v=function(e){(0,u.default)(TextElementComponent,e);var n=_createSuper(TextElementComponent);function TextElementComponent(){return(0,i.default)(this,TextElementComponent),n.apply(this,arguments)}return(0,a.default)(TextElementComponent,[{key:"createImplementation",value:function createImplementation(e){return this.arrmatura.platform.createTextElement(e,this)}}]),TextElementComponent}(p.Component);n.TextElementComponent=v;var m=function(e){(0,u.default)(CElementNode,e);var n=_createSuper(CElementNode);function CElementNode(e){var r;return(0,i.default)(this,CElementNode),(r=n.call(this)).tag=e.tag,r.content=(0,f.compileNodes)(e.nodes),r.compileAttributes(e.attrs),r}return(0,a.default)(CElementNode,[{key:"ComponentConstructor",get:function get(){return h}}]),CElementNode}(s.CNode);n.CElementNode=m;var y=function(e){(0,u.default)(CTextElementNode,e);var n=_createSuper(CTextElementNode);function CTextElementNode(e){var r;return(0,i.default)(this,CTextElementNode),(r=n.call(this)).tag=e.tag,r.compileAttributes(e.attrs),r}return(0,a.default)(CTextElementNode,[{key:"ComponentConstructor",get:function get(){return v}}]),CTextElementNode}(s.CNode);n.CTextElementNode=y},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.CItemNode=n.CForNode=void 0;var i=o(r(3)),a=o(r(68)),u=o(r(10)),l=o(r(1)),c=o(r(2)),s=o(r(5)),f=o(r(6)),p=o(r(4)),h=r(13),v=r(12),m=r(14);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=(0,p.default)(e);if(n){var i=(0,p.default)(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(0,f.default)(this,r)}}var y=function(e){(0,s.default)(ForComponent,e);var n=_createSuper(ForComponent);function ForComponent(){var e;(0,l.default)(this,ForComponent);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).pkHash={},e}return(0,c.default)(ForComponent,[{key:"displayName",get:function get(){return"🔹"}},{key:"content",get:function get(){var e=this,n=this.$impl.each,r=this.node.itemNode,o=new Map;if(this.pkHash={},null!=n&&n.length){if(!n.forEach)throw new Error("[ui:for] Items has no forEach() "+n);n.forEach((function(n){var i=n.id;if(null!=i){var a=String(i);if(e.pkHash[a])console.error("ERROR: duplicate item id: "+a,n);else{e.pkHash[a]=n;var u=r.cloneWithDatum(n).addPropertyResolver((function(){return e.pkHash[a]}),r.itemName);o.set(u.uid,u)}}else console.error("ERROR: empty item id: ",n)}))}return o}}]),ForComponent}(m.Component),g=function(e){(0,s.default)(CForNode,e);var n=_createSuper(CForNode);function CForNode(e,r){var o,i=(0,u.default)(r,3),a=i[0],c=i[1],s=i[2],f=void 0===s?c:s;return(0,l.default)(this,CForNode),(o=n.call(this)).itemNode=new k(a,(0,v.compileNodes)([e])),o.compileAttribute("each","{:<".includes(f[0])?f:"{"+f+"}"),o}return(0,c.default)(CForNode,[{key:"ComponentConstructor",get:function get(){return y}}]),CForNode}(h.CNode);n.CForNode=g;var b=function(e){(0,s.default)(ItemComponent,e);var n=_createSuper(ItemComponent);function ItemComponent(){return(0,l.default)(this,ItemComponent),n.apply(this,arguments)}return(0,c.default)(ItemComponent,[{key:"displayName",get:function get(){return"🔹"}},{key:"recontentScope",get:function get(){return this}},{key:"emit",value:function emit(e,n){return this.$scope.emit(e,n)}},{key:"get",value:function get(e){var n=this.node.itemName;return e.startsWith(n+".")||e===n?(0,a.default)((0,p.default)(ItemComponent.prototype),"get",this).call(this,e):this.$scope.get(e)}}]),ItemComponent}(m.Component),k=function(e){(0,s.default)(CItemNode,e);var n=_createSuper(CItemNode);function CItemNode(e,r){var o;return(0,l.default)(this,CItemNode),(o=n.call(this)).itemName=e,o.content=r,o}return(0,c.default)(CItemNode,[{key:"cloneWithDatum",value:function cloneWithDatum(e){var n=this.uid+"#"+e.id;return(0,i.default)(new CItemNode(this.itemName,this.content),{uid:n})}},{key:"ComponentConstructor",get:function get(){return b}}]),CItemNode}(h.CNode);n.CItemNode=k},function(e,n,r){var o=r(69);function _get(n,r,i){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=_get=Reflect.get,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=_get=function _get(e,n,r){var i=o(e,n);if(i){var a=Object.getOwnPropertyDescriptor(i,n);return a.get?a.get.call(r):a.value}},e.exports.default=e.exports,e.exports.__esModule=!0),_get(n,r,i||n)}e.exports=_get,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){var o=r(4);e.exports=function _superPropBase(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&null!==(e=o(e)););return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.CIfNode=void 0;var i=o(r(3)),a=o(r(1)),u=o(r(2)),l=o(r(5)),c=o(r(6)),s=o(r(4)),f=r(13),p=r(31),h=r(12);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=(0,s.default)(e);if(n){var i=(0,s.default)(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(0,c.default)(this,r)}}var v=function(e){(0,l.default)(IfComponent,e);var n=_createSuper(IfComponent);function IfComponent(){return(0,a.default)(this,IfComponent),n.apply(this,arguments)}return(0,u.default)(IfComponent,[{key:"content",get:function get(){return this.$impl.condition?this.node.then:this.node.else}}]),IfComponent}(r(14).Component),m=function(e){(0,l.default)(CIfNode,e);var n=_createSuper(CIfNode);function CIfNode(e,r){var o;return(0,a.default)(this,CIfNode),(o=n.call(this)).compileCondition(r),o.compileBranches(e),o}return(0,u.default)(CIfNode,[{key:"ComponentConstructor",get:function get(){return v}},{key:"compileBranches",value:function compileBranches(e){var n=e.nodes,r=[e];if(null!=n&&n.length){var o=n.find((function(e){return"ui:else"===e.tag})),a=n.find((function(e){return"ui:then"===e.tag}));o?(this.else=(0,h.compileNodes)(o.nodes),r=a?a.nodes:[(0,i.default)(e,{nodes:n.filter((function(e){return e!==o}))})]):a&&(r=a.nodes)}this.then=(0,h.compileNodes)(r)}},{key:"compileCondition",value:function compileCondition(e){if("<"===e[0]&&"-"===e[1])this.addPropertyConnector(e.slice(2),(function(e){return{condition:e}}));else if("slot("===e.slice(0,5)){var n=e.slice(5,-1);this.addPropertyResolver((function(e){return null==e.$scope.slotContent?void 0:e.$scope.slotContent(n)}),"condition")}else{var r=(0,p.compileExpression)("{"===e[0]?e:"{"+e+"}");this.addPropertyResolver((function(e){return!!r(e)}),"condition")}}}]),CIfNode}(f.CNode);n.CIfNode=m},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.WebPlatform=void 0;var i=o(r(1)),a=o(r(2)),u=r(72),l=r(74),c=function(){function WebPlatform(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root";(0,i.default)(this,WebPlatform),"string"==typeof e&&(e=document.getElementById(e)||window.document.body),this.rootElement=e||window.document.body}return(0,a.default)(WebPlatform,[{key:"createTextElement",value:function createTextElement(e,n){return new u.DomTextElement(e)}},{key:"createElement",value:function createElement(e,n,r){return new u.DomElement(e,n,r)}},{key:"reflow",value:function reflow(e){(0,l.reflow)(e,this.rootElement)}}]),WebPlatform}();n.WebPlatform=c},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.DomTextElement=n.DomElement=void 0;var i=o(r(11)),a=o(r(3)),u=o(r(1)),l=o(r(2)),c=r(8),s=r(73),f=function(){function DomElement(e,n,r){(0,u.default)(this,DomElement),this.$changes=new Map,this.$=r,this.$element=document.createElement(e),this.$element.impl=this}return(0,l.default)(DomElement,[{key:"done",value:function done(){var e,n;null==(e=this.$element)||null==(n=e.parentElement)||n.removeChild(this.$element)}},{key:"stateChanged",value:function stateChanged(e){var n=this,r=this;e.forEach((function(e,o){var i;"$"!==o[0]&&(e!==r[o]&&(null==(i=n.$changes)||i.set(o,e)))}))}},{key:"applyStateChanges",value:function applyStateChanges(){var e=this,n=this,r=this.$element;this.$changes.size&&(this.$changes.forEach((function(o,u){if("$"!==u[0]){if(o!==n[u]){var l=s.ATTR_SETTERS[u];l?l(e,r,o):"data-"===u.slice(0,5)?s.ATTR_SETTERS.data(e,r,(0,a.default)({},r.$dataset,(0,i.default)({},u.slice(5),o))):(0,s.setAttribute)(e,u,o)}n[u]=o}})),this.$changes.clear())}}]),DomElement}();n.DomElement=f;var p=function(){function DomTextElement(e){(0,u.default)(this,DomTextElement),this.$string=null,this.$element=document.createTextNode(String(e.text||""))}return(0,l.default)(DomTextElement,[{key:"done",value:function done(){var e;null==(e=this.$element.parentElement)||e.removeChild(this.$element)}},{key:"stateChanged",value:function stateChanged(e){e.has("text")&&(this.$string=(0,c.decodeXmlEntities)(e.get("text")))}},{key:"applyStateChanges",value:function applyStateChanges(){this.$element.textContent=this.$string}}]),DomTextElement}();n.DomTextElement=p},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.ATTR_SETTERS=void 0,n.setAttribute=setAttribute;var i,a=o(r(11)),u=o(r(10)),l=o(r(3)),c=function camelize(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";return(""+e).split(n).map((function(e,n){return n?e[0].toUpperCase()+e.slice(1):e})).join(r)},s=function setListener(e,n,r,o){var i=n.split(":")[0];setAttribute(e,n,o?function(n){return e[i]((0,l.default)({},r.$dataset),n),!1}:null)};function setAttribute(e,n,r){var o;if(null!=r)if("function"==typeof r){if(e.$listeners||(e.$listeners=new Map),!e.$listeners.has(n)){var i=n.split(":"),a=(0,u.default)(i,2),l=a[0],c=a[1],s=void 0===c?l:c;e.$element.addEventListener(s,r,!1),e.$listeners.set(n,r)}}else e.$element.setAttribute(n,r);else if(null!=(o=e.$listeners)&&o.has(n)){var f=n.split(":"),p=(0,u.default)(f,2),h=p[0],v=p[1],m=void 0===v?h:v;e.$element.removeEventListener(m,e.$listeners.get(n)),e.$listeners.delete(n)}else e.$element.removeAttribute(n)}var f=(i={disabled:function disabled(e,n,r){return n.disabled=!!r||null},class:function _class(e,n,r){n.className=String(r||"")},selected:function selected(e,n,r){return n.selected=!!r||null},value:function value(e,n,r){return n.value=null==r?"":r},checked:function checked(e,n,r){return n.checked=!!r},init:function init(){},data:function data(e,n,r){var o=r;o&&n.$dataset?(Object.keys(n.$dataset).forEach((function(e){null==o[e]&&(n.dataset[c(e,"-","")]=null)})),n.$dataset=(0,l.default)({},n.$dataset,o)):n.$dataset=o?(0,l.default)({},o):n.$dataset||{},o&&Object.keys(o).forEach((function(e){n.dataset[c(e,"-","")]=o[e]}))},click:function click(e,n,r){return s(e,"click",n,r)},click2:function click2(e,n,r){return s(e,"click2:click",n,r)}},(0,a.default)(i,"bubble-click",(function bubbleClick(e,n,r){return s(e,"bubble-click:click",n,r)})),(0,a.default)(i,"blur",(function blur(e,n,r){return s(e,"blur",n,r)})),(0,a.default)(i,"focus",(function focus(e,n,r){return s(e,"focus",n,r)})),(0,a.default)(i,"dblclick",(function dblclick(e,n,r){return s(e,"dblclick",n,r)})),(0,a.default)(i,"scroll",(function scroll(e,n,r){return setAttribute(e,"scroll",r?function(r){e.scroll({value:n.scrollTop},r)}:null)})),(0,a.default)(i,"scrolledDown",(function scrolledDown(e,n,r){return setAttribute(e,"scrolledDown:scroll",r?function(r){var o=e.scrolledDownGap||10,i=n.clientHeight+n.scrollTop;Math.abs(n.scrollHeight-i)<o&&i>(e._maxScrolledDownOffset||0)&&(e._maxScrolledDownOffset=i,e.scrolledDown({offset:i},r))}:null)})),(0,a.default)(i,"touchstart",(function touchstart(e,n,r){var o=r?function(r){return e.touchstart((0,l.default)({},n.$dataset,{x:r.pageX||r.changedTouches[0].screenX,y:r.pageY||r.changedTouches[0].screenY}),r),!1}:null;setAttribute(e,"touchstart:touchstart",o),setAttribute(e,"touchstart:mousedown",o)})),(0,a.default)(i,"touch",(function touch(e,n,r){var o=(0,l.default)({},n.$dataset),i=r?function(e){return o.active=!0,o.x=e.pageX||e.changedTouches[0].screenX,o.y=e.pageY||e.changedTouches[0].screenY,!1}:null;setAttribute(e,"touch:touchstart",i),setAttribute(e,"touch:mousedown",i);var a=r?function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(r){return o.active&&(o.active=!n,o.xx=r.pageX||r.changedTouches[0].screenX,o.yy=r.pageY||r.changedTouches[0].screenY,o.dx=o.xx-o.x,o.dy=o.yy-o.y,e.touch(o,r)),!1}}:function(){return null};setAttribute(e,"touch:touchcancel",a(!0)),setAttribute(e,"touch:touchend",a(!0)),setAttribute(e,"touch:mouseup",a(!0)),setAttribute(e,"touch:touchmove",a(!1)),setAttribute(e,"touch:mousemove",a(!1))})),(0,a.default)(i,"keypress",(function keypress(e,n,r){setAttribute(e,"keypress:keyup",r?function(r){return 13!==r.keyCode&&27!==r.keyCode&&(null==e.keypress||e.keypress((0,l.default)({value:n.value},n.$dataset),r),setTimeout((function(){return n.focus()}),0)),!1}:null)})),(0,a.default)(i,"enter",(function enter(e,n,r){setAttribute(e,"enter:keyup",r?function(r){return 13===r.keyCode&&e.enter((0,l.default)({value:n.value},n.$dataset),r),13!==r.keyCode&&27!==r.keyCode||n.blur(),!1}:null)})),(0,a.default)(i,"change",(function change(e,n,r){setAttribute(e,"change",r?function(r){return e.change((0,l.default)({value:n.value},n.$dataset),r),!1}:null)})),(0,a.default)(i,"toggle",(function toggle(e,n,r){setAttribute(e,"toggle:change",r?function(r){return e.toggle((0,l.default)({value:n.checked},n.$dataset),r),!1}:null)})),i);n.ATTR_SETTERS=f},function(e,n){function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,o=new Array(n);r<n;r++)o[r]=e[r];return o}function appendElt(e,n,r){var o=r?r.nextSibling:n.firstChild;return o?e!==o&&n.insertBefore(e,o):n!==e.parentElement&&n.appendChild(e),e}Object.defineProperty(n,"__esModule",{value:!0}),n.reflow=function reflow(e,n,r){if(e.$children)for(var o,i=function _createForOfIteratorHelperLoose(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function _unsupportedIterableToArray(e,n){if(!e)return;if("string"==typeof e)return _arrayLikeToArray(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _arrayLikeToArray(e,n)}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e.$children.values());!(o=i()).done;){var a=o.value,u=a.$impl.$element;u?(reflow(a,u),a.$impl.applyStateChanges(),r=appendElt(u,n,r)):r=reflow(a,n,r)}return r}},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(r(9)),a=o(r(76)),u=_interopRequireWildcard(r(88)),l=o(r(103)),c=_interopRequireWildcard(r(116));function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var n=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?r:n})(e)}function _interopRequireWildcard(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=_getRequireWildcardCache(n);if(r&&r.has(e))return r.get(e);var o={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=i?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(o,a,u):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o}var s=[].concat((0,i.default)(a.default),(0,i.default)(l.default),(0,i.default)(Object.values(c)),(0,i.default)(Object.values(u)));n.default=s},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(r(77)),a=o(r(78)),u=o(r(79)),l=o(r(80)),c=o(r(81)),s=o(r(82)),f=o(r(83)),p=o(r(84)),h=o(r(85)),v=o(r(86)),m=o(r(87)),y=[i.default,l.default,a.default,c.default,s.default,h.default,p.default,f.default,u.default,v.default,m.default];n.default=y},function(e,n,r){"use strict";r.r(n),n.default='<component id="Btn">\n  <button class="\n      btn btn-{mode}\n      {primary|then:btn-primary}\n      {disabled|or:@busy|then:disabled}\n      {class}\n      {large|then:btn-lg}\n      {link|then:btn-link}\n      c-hand\n    " style="{style}" data={data} click="{action}">\n    <span ui:if="{busy}" class="mx-2" style="width:18px;">\n      <i class="loading"></i>\n    </span>\n    <Icon ui:if="busy|not|and:@icon" bundle="{iconBundle}" type="{icon}" class="mr-2"/>\n    <span ui:if="{title}" style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis">{title}</span>\n  </button>\n</component>\n\n<component id="FAB">\n  <button class="btn {tooltip|then:tooltip} tooltip-left p-0 fixed s-circle bg-error c-hand {class} {disabled|or:@busy|then:disabled}  {busy|then:loading}" style="position: fixed; border: none; right: 1.5rem; bottom: 1.5rem; width: 2.5rem; height: 2.5rem;" data-tooltip="{tooltip|or:}">\n    <div class="centroid  s-circle" style="width: 2.5rem; height: 2.5rem;" data="{data}" click="{action}">\n      <Icon type="{icon|or:plus}" />\n    </div>\n  </button>\n</component>\n'},function(e,n,r){"use strict";r.r(n),n.default='<component id="LoadingIndicator">\n  <div class="loading {large|then:loading-lg} {class}" />\n</component>\n\n<component id="EmptyData">\n  <div class="empty w100 m-0 {class}">\n    <div class="empty-icon">\n      <Icon type="{icon|or:people}" />\n    </div>\n    <p class="empty-title h5">{title}</p>\n    <p ui:if="{subtitle}" class="empty-subtitle">{subtitle}</p>\n    <div class="empty-action">\n      <ui:slot />\n    </div>\n  </div>\n</component>\n\n<component id="AsyncLoader">\n  <ui:fragment ui:if="isLoading">\n    <ui:then>\n      <EmptyData class="h100" title="{title}" subtitle="{error|then::@subtitle}" icon="{icon|or:download}">\n        <ui:fragment ui:if="error|not">\n          <ui:then>\n            <LoadingIndicator/>\n          </ui:then>\n          <ui:else>\n            <Btn mode="error" action="{onError}" title="Error: {error}"/>\n          </ui:else>\n        </ui:fragment>\n      </EmptyData>\n    </ui:then>\n    <ui:else>\n      <ui:slot />\n    </ui:else>\n  </ui:fragment>\n</component>\n\n<component id="LoadableItems">\n  <LoadingIndicator class="empty" ui:if="data|not">\n    <ui:else>\n      <h5 class="error text-error" ui:if="data.error">{data.error.message|or:@data.error}</h5>\n      <EmptyData title="{emptyCaption|or:Empty}" ui:if="data.length|not">\n        <ui:else>\n          <div style="{style}" ui:for="item of data">\n            <ui:tag tag="{itemType}" ui:props="{item}" item="{item}" context="{context}" action="{action}" />\n          </div>\n        </ui:else>\n      </EmptyData>\n    </ui:else>\n  </LoadingIndicator>\n</component>\n\n<component id="LoadableEntity">\n  <LoadingIndicator class="empty" ui:if="data|not">\n    <ui:else>\n      <h5 class="error text-error" ui:if="data.error">\n        <span>{data.error.message|or:@data.error}</span>\n        <ui:else>\n          <EmptyData title="{emptyCaption|or:Empty}" ui:if="data.id|not">\n            <ui:else>\n              <ui:tag tag="{type}" data="{data}" context="{context}" action="{action}" />\n            </ui:else>\n          </EmptyData>\n        </ui:else>\n      </h5>\n    </ui:else>\n  </LoadingIndicator>\n</component>\n\n<component id="Cell">\n  <span class="" style="padding-left: 0px">{value}</span>\n</component>\n\n<component id="EnumCell">\n  <span class="" style="padding-left: 0px">:map.{typeSpec}.{value}</span>\n</component>\n\n<component id="DateCell">\n  <span class="" style="padding-left: 0px">{value|date}</span>\n</component>\n\n<component id="Table">\n  <table style="position: relative">\n    <thead class="table-thead">\n      <tr>\n        <th class="col-index" style="position: sticky; top: -1"></th>\n        <th class="col-index" style="position: sticky; top: -1" ui:for="item of columns">\n          <span>{item.name}</span>\n          <div class="table-column-sorter" ui:if="item.sortable">\n            <span class="table-column-sorter-up off" title="↑" data-id="-{item.id}" click="{doSort}">\n              <i class="anticon anticon-caret-up"></i\n            >            </span>\n            <span class="table-column-sorter-down off" title="↓" data-id="{item.id}" click="{doSort}">\n              <i class="anticon anticon-caret-down"></i\n            >            </span>\n          </div>\n        </th>\n      </tr>\n    </thead>\n    <TableRow ui:for="item of data" data="{item}" selected="{item.selected}" columns="{columns}" kind="{kind}" />\n  </table>\n</component>\n\n<component id="TableRow">\n  <tbody class="table-tbody">\n    <tr class="table-row table-row-level-0" style="position: sticky">\n      <td class="col-index" data-id="{data.id}" click="{doItem}">\n        <div ui:if="{expandable}" role="button" class="table-row-expand-icon table-row-expanded" aria-label="Collapse row" data-selected="false" click="->">\n          <ui:else>\n            <div role="button" class="table-row-expand-icon table-row-collapsed" aria-label="Expand row" data-selected="true" click="->"></div>\n          </ui:else>\n        </div>\n      </td>\n      <td class="col-index" ui:for="col of columns">\n        <ui:tag tag="{col.type|capitalize}Cell" ui:props="{col}" value="{col.id|propObjectValueByKey}" data="{data}" />\n      </td>\n    </tr>\n    <tr ui:if="{expanded}" class="table-expanded-row table-expanded-row-level-1">\n      <td class=""></td>\n      <td class="" colspan="100">\n        <ui:tag tag="{kind|capitalize}RowInsider" data="{data}" />\n      </td>\n    </tr>\n  </tbody>\n</component>\n\n<component id="Chips">\n  <div class="chips mx-0 py-2 px-2 {class}">\n    <div class="ui mini labels">\n      <span class="chip {tag.selected|then:bg-success:bg-secondary} {tag.nonSelectable|then::c-hand} {tag.count|then:badge}" data-badge="{tag.count}" style="padding:1.2rem" data-id="{tag.id}" click="{tag.nonSelectable|then:undefined:@click}" ui:for="tag of data">\n        <span>\n          <b>{tag.name}</b>\n        </span>\n      </span>\n      <span ui:if="data|find:true:selected" class="label py-1 px-2 s-circle c-hand" click="{click|assignFirstArgKeyValue:id:}">\n        <Icon type="cross"/>\n      </span>\n    </div>\n  </div>\n</component>\n'},function(e,n,r){"use strict";r.r(n),n.default='<component id="Select">\n  <select class="{class}" change="{change}" multiple="{multiple}" disabled="{disabled}" data="{data}">\n    <option selected="{value|not}" value="" ui:if="{value|not|or:@emptyCaption}">{emptyCaption}</option>\n    <option ui:for="option of options" selected="{option.id|equals:@value}" value="{option.id}">{option.name}</option>\n  </select>\n</component>\n\n<component id="RadioGroup">\n  <div class="{class}">\n    <label class="form-radio" ui:for="option of options">\n      <input type="radio" name="{id|or:rg}" value="{option.id}" checked="{option.id|equals:@value}" change="{change}" data="{data}" disabled="{disabled}" />\n      <i class="form-icon"></i>{option.name}\n    </label>\n  </div>\n</component>\n\n<component id="Dropdown">\n  <div class="dropdown">\n    <a href="#" class="btn btn-link dropdown-toggle" tabindex="0">\n      {data|selectedName}<i class="icon icon-caret"></i>\n    </a>\n    \x3c!-- menu component --\x3e\n    <ul class="menu" style="right: 0; left: auto">\n      <li ui:for="item of data" class="menu-item {item.id|equals:@value|then:active}" data-id="{item.id}" data-name="{item.name}" click="{change}">\n        <a>{item.name}</a>\n      </li>\n    </ul>\n  </div>\n</component>\n\n<component id="DateTimeInput">\n  <input class="form-input flatpickr-input" init="{:support.initFlatpickr}" disabled="{disabled}" type="text" placeholder="{placeholder}" value="{value|support.setFlatpickrValue}" change="{change}" />\n</component>\n'},function(e,n,r){"use strict";r.r(n),n.default='<component id="Icon">\n  <i class="icon icon-{type} {class}" style="{style}" data="{data}" click="{click}"></i>\n</component>\n\n<component id="Img">\n  <img src="{src|or:@default}" alt="{alt}" class="img {class}" style="{style}" />\n</component>\n\n<component id="ImgLogo">\n  <img src="{src}" class="{class}" error="->" data-src="/assets/logo.jpg" />\n</component>\n\n<component id="IFrame">\n  <iframe width="100%" height="450" frameborder="0" style="border: 0;" src="{src}" allowfullscreen="1"></iframe>\n</component>\n\n<component id="Avatar">\n  <figure class="avatar {large|then:avatar-lg}">\n    <img src="{src}" alt="{alt}" default="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" />\n  </figure>\n</component>\n'},function(e,n,r){"use strict";r.r(n),n.default='<component id="Modal">\n  \x3c!-- \n  \n  Modal component:\n\n  Slots:\n    - header\n    - default\n    - footer\n\n  Properties:\n    - open: boolean\n    - close: procedure\n    - title: string\n    - mode: lg|sm\n\n  --\x3e\n  <div class="modal modal-{mode} {open|then:active}" style="padding:0;">\n    <a class="modal-overlay" aria-label="Close" click="{close}" ui:if="mode|equals:lg|not"></a>\n    <div class="modal-container" style="padding:0;max-height: {mode|equals:lg|then:100:70}vh">\n      <div class="modal-header  bg-secondary" style="margin:0">\n        <a class="btn btn-lg btn-clear float-right" aria-label=":close" click="{close}"></a>\n        <div class="modal-title h5" ui:if="{title}">{title}</div>\n        <ui:slot id="header" />\n      </div>\n      <div class="modal-body" style="">\n        <div class="content">\n          <ui:slot />\n        </div>\n      </div>\n      <div class="modal-footer">\n        <ui:slot id="footer" />\n      </div>\n    </div>\n  </div>\n</component>\n\n'},function(e,n,r){"use strict";r.r(n),n.default='<component id="Tabs">\n  <ul class="tab tab-block">\n    <li class="tab-item {item.id|equals:@value|then:active} c-hand" ui:for="item of items">\n      <a data-id="{item.id}" click="{change}">\n        <Icon ui:if="{item.icon}" type="{item.icon}" bundle="{item.iconBundle}" class="mx-2" />\n        {item.name|or:@item.id}\n      </a>\n    </li>\n  </ul>\n</component>\n\n<component id="BackButton">\n  <a class="mx-2" style="border: none; width: 1.5rem; z-index: 5" href="{href}">\n    <Icon type="back" />\n  </a>\n</component>\n\n<component id="Navbar">\n  <header class="navbar sticky {class} bg-secondary" style="height: 48px;flex-wrap: nowrap;margin:0;">\n    <section class="navbar-section" style="max-width:100%;">\n      <div class="m-2 d-flex items-center flex-1">\n        <ui:slot id="left" />\n        <div style="flex:1; min-height:1.7rem;display:flex;align-items: center;">\n          <h4 class="text-dark text-ellipsis {badge|then:badge}" style="margin-bottom:0; flex:1;max-width:640px;" data-badge="{badge}" ui:if="{caption}">{caption}</h4>\n        </div>\n      </div>\n    </section>\n    <section class="navbar-section flex-0 mx-2" ui:if="slot(right)">\n      <ui:slot id="right" />\n    </section>\n  </header>\n</component>\n\n<component id="PageRouter">\n  <ui:tag tag="{host|capitalize|or:Loader}Page" path={path} ui:props="{params}" params="{params}" />\n</component>\n\n<component id="LoaderPage">\n  <LoadingIndicator />\n</component>\n\n<component id="NavTree">\n  <ul class="nav">\n    <li class="nav-item {item.class}" ui:for="item of data">\n      <NavLink href="{item.id}">\n        <span>{item.name}</span>\n        <span ui:if="{item.label}" class="label label-error">{item.label}</span>\n      </NavLink>\n      <NavTree ui:if="{item.subs}" data="{item.subs}" />\n    </li>\n  </ul>\n</component>\n\n<component id="NavLink">\n  <a data-value="{href}" click="-> nav.hash" class="c-hand {class}">\n    <ui:slot />\n  </a>\n</component>\n\n<component id="NavListCursor">\n  <div class="d-flex {class}" style="min-width: 6rem;align-items: center;" ui:if="total">\n    <span class="p-2" ui:if="prev.id|not">\n      <Icon type="arrow-left"/>\n    </span>\n    <a class="p-2" href="#/task?itemId={prev.id}" ui:if="prev.id">\n      <Icon type="arrow-left"/>\n    </a>\n    <span class="text-dark text-ellipsis text-bold">{index|plus:1} / {total}</span>\n    <a class="p-2" href="#/task?itemId={next.id}" ui:if="next.id">\n      <Icon type="arrow-right"/>\n    </a>\n  </div>\n</component>'},function(e,n,r){"use strict";r.r(n),n.default='<component id="Panel">\n  <h6 class="mt-2 pt-2 px-2 text-gray" ui:if="caption">{caption}</h6>\n  <div class="panel {class}" style="{style}">\n    <small class="p-2 bg-secondary" ui:if="{hint}">{hint}</small>\n    <div class="panel-header" ui:if="slot(title)">\n      <div class="panel-title">\n        <ui:slot id="title" key="panel-title" />\n      </div>\n    </div>\n    <div class="panel-nav" ui:if="slot(nav)">\n      <ui:slot id="nav" />\n    </div>\n    <div class="panel-body p-2">\n      <ui:slot />\n    </div>\n    <div class="panel-footer" ui:if="slot(footer)">\n      <ui:slot id="footer" />\n    </div>\n  </div>\n</component>\n\n<component id="Tile">\n  <div class="tile {centered|then:tile-centered} m-2 {class}">\n    <div class="tile-icon" ui:if="{image}">\n      <Avatar src="{image}" />\n    </div>\n    <div class="tile-icon" ui:if="{icon}">\n      <Icon type="{icon}" />\n    </div>\n    <div class="tile-content">\n      <div class="tile-title text-bold" ui:if="{title}">{title}</div>\n      <div class="tile-subtitle" ui:if="{subtitle}">{subtitle}</div>\n      <ui:slot />\n    </div>\n    <div class="tile-action btn-group" ui:if="slot(actions)">\n      <ui:slot id="actions" />\n    </div>\n  </div>\n</component>\n\n<component id="Card">\n  <div class="card" style="{style}">\n    <div class="card-image" ui:if="{image}">\n      <img src="{image}" class="img-responsive" />\n    </div>\n    <div class="card-header">\n      <a ui:if="{title}" href="{link}">\n        <h5 class="card-title">{title}</h5>\n      </a>\n      <div ui:if="{subtitle}" class="card-subtitle text-gray">{subtitle}</div>\n      <ui:slot id="header" />\n    </div>\n    <div class="card-body">\n      <ui:slot />\n    </div>\n    <div class="card-footer" ui:if="slot(footer)">\n      <ui:slot id="footer" />\n    </div>\n  </div>\n</component>\n\n<component id="Hero">\n  <div class="hero bg-dark p-0">\n    <div class="hero-body px-2">\n      <h1>{title}</h1>\n    </div>\n  </div>\n</component>\n\n\n<component id="FixedPanel">\n  <div style="position: fixed; right: 0; {bottom|then:bottom:top}: 0; left: 0; z-index:3;">\n    <div class="{class}" style="max-width: 720px; margin: auto; display: flex; {style}">\n      <ui:slot />\n    </div>\n  </div>\n</component>'},function(e,n,r){"use strict";r.r(n),n.default='<component id="ViewPort">\n  <ui:fragment ui:if="slot(aside)">\n    <Sidebar caption="{caption}" size="{sidebarWidth}">\n      <Sidebar:aside>\n        <ui:slot id="aside" />\n      </Sidebar:aside>\n      <main>\n        <ui:slot />\n      </main>\n    </Sidebar>\n    <ui:else>\n      <main>\n        <ui:slot />\n      </main>\n    </ui:else>\n  </ui:fragment>\n</component>\n\n<component id="Sidebar">\n  <div class="off-canvas off-canvas-sidebar-show">\n    <a class="off-canvas-toggle btn btn-primary btn-action show-lg" href="#sidebar">\n      <Icon type="menu" />\n    </a>\n    <div id="sidebar" class="off-canvas-sidebar">\n      <Aside caption="{caption}">\n        <ui:slot id="aside" />\n      </Aside>\n    </div>\n    <a class="off-canvas-overlay" href="#"></a>\n    <div class="off-canvas-content">\n      <ui:slot />\n    </div>\n  </div>\n</component>\n\n<component id="Aside">\n  <aside style="display:flex; flex-direction: column; height: 100vh; width:{size|or:300}px">\n    <div class="text-center" ui:if="{caption}">\n      <a href="#/main">\n        <h5 class="p-2">{caption}</h5>\n      </a>\n    </div>\n    <div class="m-2" style="flex: 1; overflow-y: auto">\n      <ui:slot />\n    </div>\n  </aside>\n</component>\n\n'},function(e,n,r){"use strict";r.r(n),n.default='<component id="ToastList">\n  <div style="position:absolute;top:2.5rem;right:1rem;left:1rem;z-index:500;{style}">\n    <div style="max-width: 600px;margin: auto;">\n      <Toast ui:props={toast} ui:for="toast of <-toasters.items"/>\n    </div>\n  </div>\n</component>\n\n<component id="Toast">\n  <div class="toast mt-1 toast-{mode|or:@mode|or:primary}">\n    <button class="btn btn-clear float-right" click="{close}"></button>\n    <p>\n      <b ui:if="counter" class="mr-1">[x{counter}]</b>\n      <span> {message}</span>\n      <a class="mx-1" href="{link}" ui:if="link">link</a>\n    </p>\n  </div>\n</component>'},function(e,n,r){"use strict";r.r(n),n.default='<component id="SearchBar">\n  <span class="ant-input-search ant-input-affix-wrapper">\n    <input placeholder="Поиск..." class="ant-input" type="text" value="{value}" enter="{action}" style="min-height: 40px" />\n    <span class="ant-input-suffix">\n      <i class="anticon anticon-search ant-input-search-icon" style="margin-top: 4px"></i>\n    </span>\n  </span>\n</component>\n\n<component id="SearchBarWithSuggestions">\n  \x3c!-- <ui:fragment ui:if="opened.value|or:@value">\n    <ui:then> --\x3e\n  <div class="form-autocomplete mx-2">\n    \x3c!-- autocomplete input container --\x3e\n    <div class="form-autocomplete-input form-input input-sm">\n      <div class="input-group input-inline">\n        <input class="form-input" type="search" placeholder=":kluq_poshuku" keypress="{input}" value="{value}" focus="->opened|assignKeyValue:value:true" style="width:inherit" />\n        <i class="icon icon-cross m-2 c-hand" data-value="" click="{enter}" click2="->opened|assignKeyValue:value:false" ui:if="value"></i>\n        <i class="icon icon-search m-2 c-hand" click="->opened|assignKeyValue:value:false" ui:if="value|not"></i>\n      </div>\n    </div>\n    <ui:fragment ui:if="opened.value|then:@suggestions">\n      <div style="position:fixed; right:0; top:0; left:0; bottom:0;" click="->opened|assignKeyValue:value:false"></div>\n      <ul class="menu" style="min-width: 140px;max-height:16rem;overflow-y:auto;">\n        <ui:fragment ui:if="suggestions.length">\n          <ui:then>\n            <li class="menu-item c-hand" ui:for="item of suggestions" data-value="{item.id}" click="{enter}">\n              <a>\n                <div class="tile tile-centered">\n                  <div class="tile-content">{item.name}</div>\n                </div>\n              </a>\n            </li>\n          </ui:then>\n          <ui:else>\n            <li class="menu-item">\n              <div class="tile tile-centered">\n                <div class="tile-content text-gray">:strings.no_findings|or:no findings</div>\n              </div>\n            </li>\n          </ui:else>\n        </ui:fragment>\n      </ul>\n    </ui:fragment>\n  </div>\n  \x3c!-- </ui:then>\n    <ui:else>\n      <div class="mx-2" click="{open|fnBindArgs:true}">\n        <i class="icon icon-search m-2 c-hand" click="->opened|assignKeyValue:value:true"></i>\n      </div>\n    </ui:else>\n  </ui:fragment> --\x3e\n\n</component>'},function(e,n,r){"use strict";r.r(n),n.default='<component id="Popover">\n  <div class="popover popover-right">\n    <ui:slot />\n    <div class="popover-container">\n      <div class="card">\n        <div class="card-header">\n          <ui:slot id="body" />\n        </div>\n      </div>\n    </div>\n  </div>\n</component>'},function(e,n,r){Object.defineProperty(n,"__esModule",{value:!0});var o={NavigationService:!0,ServiceWorker:!0,Service:!0,ToastService:!0,Loader:!0,Invoke:!0,ErrorHandlingService:!0,FormController:!0};Object.defineProperty(n,"ErrorHandlingService",{enumerable:!0,get:function get(){return f.ErrorHandlingService}}),Object.defineProperty(n,"FormController",{enumerable:!0,get:function get(){return p.FormController}}),Object.defineProperty(n,"Invoke",{enumerable:!0,get:function get(){return s.Invoke}}),Object.defineProperty(n,"Loader",{enumerable:!0,get:function get(){return c.Loader}}),Object.defineProperty(n,"NavigationService",{enumerable:!0,get:function get(){return i.NavigationService}}),Object.defineProperty(n,"Service",{enumerable:!0,get:function get(){return u.Service}}),Object.defineProperty(n,"ServiceWorker",{enumerable:!0,get:function get(){return a.ServiceWorker}}),Object.defineProperty(n,"ToastService",{enumerable:!0,get:function get(){return l.ToastService}});var i=r(89),a=r(90),u=r(7),l=r(91),c=r(93),s=r(94),f=r(95),p=r(34),h=r(96);Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in n&&n[e]===h[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return h[e]}}))}));var v=r(97);Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in n&&n[e]===v[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return v[e]}}))}));var m=r(99);Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in n&&n[e]===m[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return m[e]}}))}));var y=r(101);Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(o,e)||e in n&&n[e]===y[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return y[e]}}))}))},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.NavigationService=void 0;var i=o(r(3)),a=o(r(1)),u=o(r(2)),l=o(r(5)),c=o(r(6)),s=o(r(4)),f=r(8);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=(0,s.default)(e);if(n){var i=(0,s.default)(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(0,c.default)(this,r)}}var p=function(e){(0,l.default)(NavigationService,e);var n=_createSuper(NavigationService);function NavigationService(){var e;(0,a.default)(this,NavigationService);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).prevHash="",e}return(0,u.default)(NavigationService,[{key:"init",value:function init(){var e=this;this.prevHash,window.addEventListener("hashchange",(function(){return e.hashchange()})),setTimeout((function(){return e.hashchange()}),0)}},{key:"hashchange",value:function hashchange(){var e=window.location.hash.slice(1);"/"===e[0]&&e!==this.prevHash?(this.emit("this.hash",{value:e.slice(1)}),this.prevHash=e):this.prevHash||this.emit("this.hash",{value:"main"})}},{key:"done",value:function done(){window.removeEventListener("hashchange",this.hashchange)}},{key:"setTitle",value:function setTitle(e){window.document.title=e}},{key:"setHash",value:function setHash(e){var n=(0,f.urlParse)("/"+e),r=n.host,o=n.path,a=void 0===o?["*"]:o,u=n.params,l={host:(r&&"*"!==r?r:this.host)||"main",path:"*"===a[0]?this.path:a,params:u.reset?(0,i.default)({},u,{reset:null}):(0,i.default)({},this.params,u)};window.location.hash=this.prevHash=(0,f.urlStringify)(l).slice(1),this.up(l)}},{key:"getRoute",value:function getRoute(){return{host:this.host,path:this.path,params:this.params}}},{key:"onReload",value:function onReload(){window.location.reload()}},{key:"onCopyToClipboard",value:function onCopyToClipboard(e){var n=this,r=e.value;navigator.clipboard.writeText(r).then((function(){n.toast("Copied to clipboard")}),(function(e){n.toast("Could not copy to clipboard: "+e.message)}))}},{key:"onHash",value:function onHash(e){var n=e.value;this.setHash("/"+n)}},{key:"onParams",value:function onParams(e){this.setHash({params:(0,i.default)({},e,{data:null})})}}]),NavigationService}(r(7).Service);n.NavigationService=p},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.ServiceWorker=void 0;var i=o(r(9)),a=o(r(1)),u=o(r(2)),l=o(r(5)),c=o(r(6)),s=o(r(4));function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=(0,s.default)(e);if(n){var i=(0,s.default)(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(0,c.default)(this,r)}}var f=function(e){(0,l.default)(ServiceWorker,e);var n=_createSuper(ServiceWorker);function ServiceWorker(){return(0,a.default)(this,ServiceWorker),n.apply(this,arguments)}return(0,u.default)(ServiceWorker,[{key:"api",get:function get(){return navigator.serviceWorker}},{key:"init",value:function init(){var e=this;try{Function.assert(this.api,"Service Workers are not supported");var n=this.source,r=void 0===n?"/service-worker.js":n,o=this.scope,i=void 0===o?"/":o,a=this.push;this.api.register(r,{scope:i}).then((function(n){return e.registered(n)})).then((function(){return e.ready((function(){return e.log("Service Worker Ready")}))})),this.api.addEventListener("message",(function(n){return e.onMessage(n)})),a&&this.subscribe()}catch(e){this.fallback(e)}}},{key:"ready",value:function ready(e){return this.api.ready.then(e)}},{key:"fallback",value:function fallback(e){this.log(e)}},{key:"registered",value:function registered(e){return this.log("Service Worker Registered"),e}},{key:"withPushManager",value:function withPushManager(e){return this.ready((function(e){return e.pushManager})).then(e)}},{key:"unsubscribe",value:function unsubscribe(){var e=this;this.withPushManager((function(e){return e.getSubscription()})).then((function(e){return e&&e.unsubscribe()})).then((function(){return e.saveSubscription()})).catch((function(e){console.log("Error thrown while unsubscribing from  push messaging.",e)}))}},{key:"subscribe",value:function subscribe(){var e=this;"granted"===Notification.permission||Notification.permission;var n=function urlBase64ToUint8Array(e){var n=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),r=window.atob(n);return Uint8Array.from((0,i.default)(r).map((function(e){return e.charCodeAt(0)})))}(this.vapidPublicKey);this.withPushManager((function(r){return r.getSubscription().then((function(e){return e||r.subscribe({userVisibleOnly:!0,applicationServerKey:n})})).then((function(n){return e.saveSubscription(n.toJSON())})).catch((function(n){"denied"===Notification.permission&&e.log("The user has blocked notifications."),e.handleError(n)}))}))}},{key:"saveSubscription",value:function saveSubscription(e){this.subscription=e}},{key:"onMessage",value:function onMessage(e){this.log("onMessage",e)}}]),ServiceWorker}(r(7).Service);n.ServiceWorker=f},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.ToastService=n.ToastSender=void 0;var i=o(r(9)),a=o(r(3)),u=o(r(1)),l=o(r(2)),c=o(r(5)),s=o(r(6)),f=o(r(4)),p=r(92),h=r(7);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=(0,f.default)(e);if(n){var i=(0,f.default)(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(0,s.default)(this,r)}}var v=function(e){(0,c.default)(ToastSender,e);var n=_createSuper(ToastSender);function ToastSender(){return(0,u.default)(this,ToastSender),n.apply(this,arguments)}return(0,l.default)(ToastSender,[{key:"onData",value:function onData(e){this.emit("toaster.send",e)}}]),ToastSender}(h.Service);n.ToastSender=v;var m=function(e){(0,c.default)(ToastService,e);var n=_createSuper(ToastService);function ToastService(){var e;(0,u.default)(this,ToastService);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).items=[],e.heartbeat=new p.HeartbeatService((function(){return e.emit("this.tick",{})})),e}return(0,l.default)(ToastService,[{key:"setItems",value:function setItems(e){this.heartbeat.setActive(!!e.length),this.items=e}},{key:"onSend",value:function onSend(e,n){var r,o=this,u=n.items,l=Date.now(),c=String(e.id||l),s=(0,a.default)({},e,{mode:null!=e&&null!=(r=e.message)&&r.startsWith("error")?"error":e.mode,id:c,close:function close(){return o.emit("this.close",{id:c})},ttl:l+(e.timeout||6e3)}),f=u.find((function(e){return e.id===c}));return f&&(s.counter=1+(f.counter||1)),{items:[s].concat((0,i.default)(u.filter((function(e){return e!==f}))))}}},{key:"onTick",value:function onTick(e,n){var r=n.items,o=Date.now();return{items:r.filter((function(e){return e.ttl>o}))}}},{key:"onClose",value:function onClose(e,n){var r=e.id;return{items:n.items.filter((function(e){return e.id!==r}))}}}]),ToastService}(h.Service);n.ToastService=m},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.HeartbeatService=void 0;var i=o(r(1)),a=o(r(2)),u=function(){function HeartbeatService(e){(0,i.default)(this,HeartbeatService),this.setWatcher(e)}return(0,a.default)(HeartbeatService,[{key:"setWatcher",value:function setWatcher(e){this.watcher=e}},{key:"startWatch",value:function startWatch(){var e=this;this.interval||(this.interval=setInterval((function(){null==e.watcher||e.watcher()}),1e3))}},{key:"stopWatch",value:function stopWatch(){this.interval&&(clearInterval(this.interval),this.interval=0)}},{key:"setActive",value:function setActive(e){e?this.startWatch():this.stopWatch()}}]),HeartbeatService}();n.HeartbeatService=u},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.Loader=void 0;var i=o(r(3)),a=o(r(1)),u=o(r(2)),l=function(){function Loader(){(0,a.default)(this,Loader)}return(0,u.default)(Loader,[{key:"init",value:function init(){this.reload()}},{key:"setTrigger",value:function setTrigger(e){this.trigger=e,this.reload()}},{key:"reload",value:function reload(){var e=this.from,n=this.data,r=this.into;e&&r&&e({data:n,callback:function callback(e,n){return r((0,i.default)({error:e},n))}})}}]),Loader}();n.Loader=l},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.Invoke=void 0;var i=o(r(1)),a=o(r(2)),u=function(){function Invoke(){(0,i.default)(this,Invoke),this.delay=0,this.hot=!1}return(0,a.default)(Invoke,[{key:"setTrigger",value:function setTrigger(e){this.trigger=e,e&&this.reload()}},{key:"init",value:function init(){this.hot&&this.reload()}},{key:"reload",value:function reload(){var e=this;setTimeout((function(){e.isDone||(console.log(e.data),null==e.action||e.action(e.data))}),1e3*(this.delay||0))}}]),Invoke}();n.Invoke=u},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorHandlingService=void 0;var i=o(r(1)),a=o(r(2)),u=o(r(5)),l=o(r(6)),c=o(r(4));function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=(0,c.default)(e);if(n){var i=(0,c.default)(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(0,l.default)(this,r)}}var s=function(e){(0,u.default)(ErrorHandlingService,e);var n=_createSuper(ErrorHandlingService);function ErrorHandlingService(){return(0,i.default)(this,ErrorHandlingService),n.apply(this,arguments)}return(0,a.default)(ErrorHandlingService,[{key:"handleError",value:function handleError(e){var n=e.message,r=void 0===n?"":n,o=e.code,i=e.source,a=void 0===i?{}:i;this.show({message:a+": "+r,code:o,mode:"error"})}},{key:"show",value:function show(e){var n=e.message,r=void 0===n?"":n,o=e.code,i=void 0===o?"":o,a=e.source;console.error(a+": ERROR: ",i,r)}}]),ErrorHandlingService}(r(7).Service);n.ErrorHandlingService=s},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.MetadataService=void 0;var i=o(r(1)),a=o(r(2)),u=o(r(5)),l=o(r(6)),c=o(r(4)),s=o(r(3)),f=o(r(10)),p=r(15),h=r(7);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=(0,c.default)(e);if(n){var i=(0,c.default)(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(0,l.default)(this,r)}}var v=function mergeMeta(e,n){return Object.entries(e).reduce((function(e,n){var r=(0,f.default)(n,2),o=r[0],i=r[1];return e[o]="object"!=typeof e[o]||Array.isArray(e[o])?i:(0,s.default)({},e[o],i),e}),n)},m=function load(e,n){return fetch(e,{method:"POST",mode:"cors",redirect:"follow",body:JSON.stringify({data:{version:n}})}).then((function(e){return e.json()}))},y=function(e){(0,u.default)(MetadataService,e);var n=_createSuper(MetadataService);function MetadataService(){var e;(0,i.default)(this,MetadataService);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=n.call.apply(n,[this].concat(o))).url="",e.version="",e.ttl=864e5,e}return(0,a.default)(MetadataService,[{key:"init",value:function init(){var e=this,n=new p.Storage("local",this.url.replace(/\//g,"_")),r=n.get("$meta")||{};return+((null==r?void 0:r.timestamp)||0)+this.ttl>Date.now()?(v(r,this.res("")),{ready:!0,meta:r}):{ready:!1,meta:r,error:null,"*":m(this.url,null==r?void 0:r.version).then((function(o){var i=(null==r?void 0:r.version)!==(null==o?void 0:o.version),a=i?o:(0,s.default)({},r);return a.timestamp=Date.now(),v(a,e.res("")),n.set("$meta",a),{ready:!0,isUpdated:i,meta:a}}),(function(e){return{ready:!0,error:(null==e?void 0:e.message)||e||"unknown"}}))}}}]),MetadataService}(h.Service);n.MetadataService=y},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.GSheetsService=void 0;var i=o(r(11)),a=o(r(9)),u=o(r(3)),l=o(r(1)),c=o(r(2)),s=o(r(5)),f=o(r(6)),p=o(r(4)),h=r(8),v=r(98),m=r(15);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=(0,p.default)(e);if(n){var i=(0,p.default)(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(0,f.default)(this,r)}}var y=function(e){(0,s.default)(GSheetsService,e);var n=_createSuper(GSheetsService);function GSheetsService(){var e;(0,l.default)(this,GSheetsService);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).url="",e.token="",e.kind="items",e.remote=new v.JsonpService,e.persistence="transient",e}return(0,c.default)(GSheetsService,[{key:"items",get:function get(){var e;return(null==(e=this.local)?void 0:e.get(this.kind))||null},set:function set(e){var n;null==(n=this.local)||n.set(this.kind,e?e.filter((function(e){return!e.deleted&&"deleted"!==e.status})):null)}},{key:"since",get:function get(){var e;return+(null==(e=this.local)?void 0:e.get(this.kind+"_since"))||0},set:function set(e){var n;null==(n=this.local)||n.set(this.kind+"_since",e||0)}},{key:"init",value:function init(){return this.local=new m.Storage(this.persistence),this.sync()}},{key:"submit",value:function submit(e){throw new Error("Method not implemented.")}},{key:"sync",value:function sync(){var e=this;return{isLoading:!0,error:null,"*items":this.submit({path:"?action=items&kind="+this.kind,body:{since:String(this.since||0)}}).then((function(n){var r,o,i=n.items,a=n.reset,l=n.timestamp;if(e.log("sync "+e.kind,l,null==(r=i)?void 0:r.length),null!=(o=i)&&o.length||!e.since){if(!a){var c=e.items||[];i=Object.values((0,u.default)({},(0,h.arrayToObject)(c),(0,h.arrayToObject)(i)))}return{items:i,isLoading:!1,since:l}}return{isLoading:!1}})).catch((function(n){var r=(null==n?void 0:n.message)||n||"unknown";return e.toast({id:r,mode:"error",message:"Ошибка: "+r}),{isLoading:!1,error:r}}))}}},{key:"submitData",value:function submitData(e){var n=this;return{busy:!0,error:null,"*upsert":this.submit({path:"?action=upsert&kind="+this.kind,body:e}).then((function(e){var r,o=e.item;return n.log("update sync"+n.kind,o.id),{busy:!1,lastUpdatedItemId:o.id,items:[o].concat((0,a.default)(null==(r=n.items)?void 0:r.filter((function(e){return e.id!=o.id}))))}})).catch((function(e){return{busy:!1,error:e}}))}}},{key:"syncItem",value:function syncItem(e){var n=this;return{isItemLoading:!0,error:null,"*item":this.submit({path:"?action=item&kind="+this.kind,body:e}).then((function(e){var r,o=e.item;return n.log("sync item"+n.kind,o.id,o),{isItemLoading:!1,lastUpdatedItemId:o.id,items:[o].concat((0,a.default)(null==(r=n.items)?void 0:r.filter((function(e){return e.id!=o.id}))))}})).catch((function(e){return{isItemLoading:!1,error:e}}))}}},{key:"onReload",value:function onReload(){return this.sync()}},{key:"onUpsert",value:function onUpsert(e){return this.submitData(e)}},{key:"onItem",value:function onItem(e){return this.syncItem(e)}},{key:"onDelete",value:function onDelete(e){var n=e.id;return this.submitData((0,i.default)({},String(n),{status:"deleted"}))}}]),GSheetsService}(r(7).Service);n.GSheetsService=y},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.JsonpService=void 0;var i=o(r(1)),a=o(r(2)),u=r(8),l=0,c=function(){function JsonpService(){(0,i.default)(this,JsonpService)}return(0,a.default)(JsonpService,[{key:"fetch",value:function fetch(e){return new Promise((function(n,r){var o,i="jsonp_"+ ++l,a=window.document.createElement("script");a.async=!0,a.onerror=r,a.src=(0,u.urlAppendParams)(e,{jsonp:i}),window[i]=n;var c=window.document.getElementsByTagName("body")[0];null==c||null==(o=c.parentNode)||o.insertBefore(a,c)}))}}]),JsonpService}();n.JsonpService=c},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.ApiClientService=void 0;var i=o(r(16)),a=o(r(3)),u=o(r(1)),l=o(r(2)),c=o(r(5)),s=o(r(6)),f=o(r(4)),p=r(8),h=r(7),v=["error"];function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=(0,f.default)(e);if(n){var i=(0,f.default)(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(0,s.default)(this,r)}}var m=function(e){(0,c.default)(ApiClientService,e);var n=_createSuper(ApiClientService);function ApiClientService(){var e;(0,u.default)(this,ApiClientService);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).baseUrl="",e.token="",e}return(0,l.default)(ApiClientService,[{key:"post",value:function post(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return fetch((0,p.urlAppendParams)(this.baseUrl+n),(0,a.default)({method:"POST",mode:"cors",redirect:"follow"},o,{body:JSON.stringify({token:this.token,data:r})})).then((function(e){return e.json()})).then((function(n){var r=n.error,o=(0,i.default)(n,v);if(r)throw"401"===r.code&&(null==e.onTokenExpired||e.onTokenExpired()),r;return o}))}},{key:"onPost",value:function onPost(e){var n=e.path,r=e.body,o=e.options;return this.post(n,r,o)}}]),ApiClientService}(h.Service);n.ApiClientService=m},function(e,n){e.exports=function _objectWithoutPropertiesLoose(e,n){if(null==e)return{};var r,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],n.indexOf(r)>=0||(i[r]=e[r]);return i},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,n,r){(function(e){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.FirebaseUserService=n.FirebaseService=void 0;var i=o(r(5)),a=o(r(6)),u=o(r(4)),l=o(r(11)),c=o(r(3)),s=o(r(1)),f=o(r(2)),p=r(7);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=(0,u.default)(e);if(n){var i=(0,u.default)(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(0,a.default)(this,r)}}var h=function unpackDocs(e){return e.docs.reduce((function(e,n){var r=n.data();return r.id=n.id,e.push(r),e}),[])},v=window.firebase,m=function(){function FirebaseService(e){var n=(0,c.default)({},e);(0,s.default)(this,FirebaseService),v.initializeApp(n),this.firestore=v.firestore(),this.firestore.enablePersistence({synchronizeTabs:!0}).catch((function(e){"failed-precondition"===e.code||e.code})),this.auth=v.auth(),this.auth.languageCode="by",this.providers={Google:v.auth.GoogleAuthProvider}}return(0,f.default)(FirebaseService,[{key:"done",value:function done(){v.app().delete()}},{key:"signInAnonymously",value:function signInAnonymously(){this.auth.signInAnonymously().catch((function(e){var n=e.message;console.log("signInAnonymously err="+n)}))}},{key:"listenUser",value:function listenUser(e){this.auth.onAuthStateChanged(e)}},{key:"getCurrentUser",value:function getCurrentUser(){return this.auth.currentUser}},{key:"linkProvider",value:function linkProvider(){var e=this,n=new this.providers.Google;return n.addScope("https://www.googleapis.com/auth/contacts.readonly"),this.auth.signInWithPopup(n).then((function(n){var r=n.user,o=e.auth.GoogleAuthProvider.credential(r.getAuthResponse().id_token);e.getCurrentUser().linkAndRetrieveDataWithCredential(o).then((function(e){var n=e.user;console.log("Anonymous account successfully upgraded",n)}),(function(e){console.log("Error upgrading anonymous account",e)}))})).catch((function(e){var n=e.message;console.log("signInAnonymously err="+n)}))}},{key:"logout",value:function logout(){return this.signInAnonymously()}},{key:"getCollection",value:function getCollection(e,n){return(r=this.firestore.collection(e),n?r.where("modified_at",">",n):r).get().then(h);var r}},{key:"listenCollection",value:function listenCollection(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0;return(n=this.firestore.collection(e),r?n.where("modified_at",">",r):n).onSnapshot((function(n){var r=[];n.forEach((function(e){var n=e.data();n.id=e.id,r.push(n)})),o(null,(0,l.default)({},e,r))}))}},{key:"nextId",value:function nextId(e){return this.firestore.collection(e).doc().id}},{key:"update",value:function update(e){var n=this,r=Date.now().valueOf(),o=this.firestore.batch();return Object.keys(e).forEach((function(i){var a=n.firestore.collection(i);e[i].forEach((function(e){e.modified_at=r,e.created_at||(e.created_at=r);var n=a.doc(""+e.id);o.set(n,e,{merge:!0})}))})),o.commit()}}]),FirebaseService}();n.FirebaseService=m;var y=function(e){(0,i.default)(FirebaseUserService,e);var n=_createSuper(FirebaseUserService);function FirebaseUserService(){return(0,s.default)(this,FirebaseUserService),n.apply(this,arguments)}return(0,f.default)(FirebaseUserService,[{key:"fb",get:function get(){return this.$.app.firebase.impl}},{key:"init",value:function init(){var e=this;this.fb.listenUser((function(n){n||e.fb.signInAnonymously(),e.emit("signed")}))}},{key:"getInfo",value:function getInfo(){var e=this.fb.getCurrentUser();return null!==e&&e.providerData.forEach((function(e){})),e?(0,c.default)({},e,{isLoading:!1}):{isLoading:!0}}},{key:"onLogin",value:function onLogin(){return this.fb.linkProvider()}},{key:"onLogout",value:function onLogout(){return this.fb.logout()}},{key:"onSigned",value:function onSigned(){return{_:NaN}}}]),FirebaseUserService}(p.Service);n.FirebaseUserService=y;var g=e.hot;g&&g.accept()}).call(this,r(102)(e))},function(e,n){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function get(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function get(){return e.i}}),e.webpackPolyfill=1),e}},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(34),a=r(104),u=r(105),l=r(107),c=r(108),s=r(109),f=o(r(110)),p=o(r(111)),h=o(r(112)),v=o(r(113)),m=o(r(114)),y=o(r(115)),g=[f.default,p.default,h.default,v.default,m.default,y.default,i.FormController,a.ItemCollectionController,u.NewItemController,l.ItemController,c.MultivalueController,s.SuggestionController];n.default=g},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.ItemCollectionController=void 0;var i=o(r(11)),a=o(r(3)),u=o(r(9)),l=o(r(1)),c=o(r(2)),s=o(r(5)),f=o(r(6)),p=o(r(4)),h=r(7),v=r(35),m=r(8),y=r(15);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=(0,p.default)(e);if(n){var i=(0,p.default)(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(0,f.default)(this,r)}}var g=function(e){(0,s.default)(ItemCollectionController,e);var n=_createSuper(ItemCollectionController);function ItemCollectionController(){var e;(0,l.default)(this,ItemCollectionController);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).selection={},e.shownLimit=40,e.sortBy="title",e.kluqPoshuku="",e.inputKluqPoshuku="",e.initials="",e.tags=[],e.local=new y.Storage("local"),e}return(0,c.default)(ItemCollectionController,[{key:"searchHistory",get:function get(){var e,n=null==(e=this.local)?void 0:e.get("searchHistory");return n?n.split(","):null},set:function set(e){var n;null==(n=this.local)||n.set("searchHistory",(e||[]).join(","))}},{key:"searchSuggestion",get:function get(){var e;return this.kluqPoshuku===this.inputKluqPoshuku?this.kluqPoshuku?null:null==(e=this.searchHistory)?void 0:e.map((function(e){return{name:e,id:e}})):this.data?(0,v.getSuggestions)(this.data,this.inputKluqPoshuku):null}},{key:"addHistoryItem",value:function addHistoryItem(e){e&&(this.searchHistory=[e].concat((0,u.default)((this.searchHistory||[]).filter((function(n){return n!=e})))).slice(0,20))}},{key:"setData",value:function setData(e){this.data=e?e.map((function(e){return new v.Item(e)})):null}},{key:"sortedData",get:function get(){var e=this,n=this.data;if(!n)return null;var r=this.kluqPoshuku?n.filter((function(n){return n.$searchData.startsWith(e.kluqPoshuku)})):n;this.tags=[];var o=(0,v.analyzeDataByTags)(r,this.selection,this.initials,this.tags,this.labelsFields);return(0,v.applyNavInfo)((0,m.arraySortBy)(o,this.sortBy))}},{key:"getInfo",value:function getInfo(){var e,n=this.sortedData;return n?{tags:this.tags,data:null==(e=this.sortedData)?void 0:e.slice(0,this.shownLimit),counts:{total:n.length,actual:n.length,hasMore:this.shownLimit<n.length},search:{kluq:this.kluqPoshuku,value:this.inputKluqPoshuku,suggestions:this.searchSuggestion,input:this.createEmitter("this.inputKluq"),enter:this.createEmitter("this.znajdzPoKluqu")}}:{}}},{key:"onTag",value:function onTag(e,n){var r=e.id,o=n.selection;return{selection:r?(0,a.default)({},o,(0,i.default)({},r,!o[r])):{}}}},{key:"onZnajdzPoKluqu",value:function onZnajdzPoKluqu(e){var n=e.value;return this.addHistoryItem(n),{inputKluqPoshuku:n||"",kluqPoshuku:n||""}}},{key:"onInputKluq",value:function onInputKluq(e){return{inputKluqPoshuku:e.value||""}}},{key:"onSortBy",value:function onSortBy(e){return{sortBy:e.value||"-title"}}},{key:"onShowMore",value:function onShowMore(e,n){var r=e.size,o=void 0===r?50:r;return{shownLimit:n.shownLimit+o}}}]),ItemCollectionController}(h.Service);n.ItemCollectionController=g},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.NewItemController=void 0;var i=o(r(36)),a=o(r(16)),u=o(r(1)),l=o(r(2)),c=o(r(5)),s=o(r(6)),f=o(r(4)),p=r(7),h=["error","lastUpdatedItemId"];function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=(0,f.default)(e);if(n){var i=(0,f.default)(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(0,s.default)(this,r)}}var v=function(e){(0,c.default)(NewItemController,e);var n=_createSuper(NewItemController);function NewItemController(){return(0,u.default)(this,NewItemController),n.apply(this,arguments)}return(0,l.default)(NewItemController,[{key:"upsert",value:function upsert(e){throw new Error("Method not implemented.")}},{key:"submitData",value:function submitData(e){var n,r,o,u,l;return i.default.async((function submitData$(c){for(;;)switch(c.prev=c.next){case 0:if(e){c.next=2;break}return c.abrupt("return",null);case 2:return c.next=4,i.default.awrap(this.upsert(e));case 4:if(n=c.sent,r=n.error,o=n.lastUpdatedItemId,u=(0,a.default)(n,h),console.log(r,u),!r){c.next=13;break}return l=null==r?void 0:r.message,this.toast({id:l,mode:"error",message:"Error: "+l}),c.abrupt("return",null);case 13:return this.toast({message:"Added successfully. ",timeout:5e3,link:"#/task?itemId="+o}),c.abrupt("return",{info:{open:!1,data:{}}});case 15:case"end":return c.stop()}}),null,this,null,Promise)}},{key:"onOpenAddNew",value:function onOpenAddNew(){return{info:{data:this.data,open:!0}}}},{key:"onCancel",value:function onCancel(){return{info:{open:!1}}}},{key:"onSubmit",value:function onSubmit(e){return this.submitData(e)}}]),NewItemController}(p.Service);n.NewItemController=v},function(e,n,r){var o=function(e){"use strict";var n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function define(e,n,r){return Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[n]}try{define({},"")}catch(e){define=function define(e,n,r){return e[n]=r}}function wrap(e,n,r,o){var i=n&&n.prototype instanceof Generator?n:Generator,a=Object.create(i.prototype),u=new Context(o||[]);return a._invoke=function makeInvokeMethod(e,n,r){var o="suspendedStart";return function invoke(i,a){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===i)throw a;return doneResult()}for(r.method=i,r.arg=a;;){var u=r.delegate;if(u){var c=maybeInvokeDelegate(u,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===o)throw o="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o="executing";var s=tryCatch(e,n,r);if("normal"===s.type){if(o=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(o="completed",r.method="throw",r.arg=s.arg)}}}(e,r,u),a}function tryCatch(e,n,r){try{return{type:"normal",arg:e.call(n,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var l={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var c={};define(c,i,(function(){return this}));var s=Object.getPrototypeOf,f=s&&s(s(values([])));f&&f!==n&&r.call(f,i)&&(c=f);var p=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function defineIteratorMethods(e){["next","throw","return"].forEach((function(n){define(e,n,(function(e){return this._invoke(n,e)}))}))}function AsyncIterator(e,n){var o;this._invoke=function enqueue(i,a){function callInvokeWithMethodAndArg(){return new n((function(o,u){!function invoke(o,i,a,u){var l=tryCatch(e[o],e,i);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==typeof s&&r.call(s,"__await")?n.resolve(s.__await).then((function(e){invoke("next",e,a,u)}),(function(e){invoke("throw",e,a,u)})):n.resolve(s).then((function(e){c.value=e,a(c)}),(function(e){return invoke("throw",e,a,u)}))}u(l.arg)}(i,a,o,u)}))}return o=o?o.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(e,n){var r=e.iterator[n.method];if(void 0===r){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=void 0,maybeInvokeDelegate(e,n),"throw"===n.method))return l;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var o=tryCatch(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,l;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,l):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,l)}function pushTryEntry(e){var n={tryLoc:e[0]};1 in e&&(n.catchLoc=e[1]),2 in e&&(n.finallyLoc=e[2],n.afterLoc=e[3]),this.tryEntries.push(n)}function resetTryEntry(e){var n=e.completion||{};n.type="normal",delete n.arg,e.completion=n}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function next(){for(;++o<e.length;)if(r.call(e,o))return next.value=e[o],next.done=!1,next;return next.value=void 0,next.done=!0,next};return a.next=a}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(p,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===GeneratorFunction||"GeneratorFunction"===(n.displayName||n.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,u,"GeneratorFunction")),e.prototype=Object.create(p),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,a,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(n,r,o,i,a){void 0===a&&(a=Promise);var u=new AsyncIterator(wrap(n,r,o,i),a);return e.isGeneratorFunction(r)?u:u.next().then((function(e){return e.done?e.value:u.next()}))},defineIteratorMethods(p),define(p,u,"Generator"),define(p,i,(function(){return this})),define(p,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var n=[];for(var r in e)n.push(r);return n.reverse(),function next(){for(;n.length;){var r=n.pop();if(r in e)return next.value=r,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function reset(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function stop(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(e){if(this.done)throw e;var n=this;function handle(r,o){return a.type="throw",a.arg=e,n.next=r,o&&(n.method="next",n.arg=void 0),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return handle("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0);if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return handle(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return handle(i.finallyLoc)}}}},abrupt:function abrupt(e,n){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=n&&n<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=n,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(u)},complete:function complete(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),l},finish:function finish(e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),l}},catch:function _catch(e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===e){var o=r.completion;if("throw"===o.type){var i=o.arg;resetTryEntry(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(e,n,r){return this.delegate={iterator:values(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}(e.exports);try{regeneratorRuntime=o}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.ItemController=void 0;var i=o(r(36)),a=o(r(16)),u=o(r(3)),l=o(r(1)),c=o(r(2)),s=o(r(5)),f=o(r(6)),p=o(r(4)),h=r(7),v=r(35),m=r(8),y=["error","lastUpdatedItemId"];function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=(0,p.default)(e);if(n){var i=(0,p.default)(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(0,f.default)(this,r)}}var g={},b=function(e){(0,s.default)(ItemController,e);var n=_createSuper(ItemController);function ItemController(){var e;(0,l.default)(this,ItemController);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).itemId="",e.onChange=function(n){return g[e.itemId]=(0,u.default)({},g[e.itemId],n),{counter:NaN}},e}return(0,c.default)(ItemController,[{key:"initialElement",get:function get(){var e,n=this;return Array.isArray(this.all)?this.all.find((function(e){return e.id==n.itemId})):null==(e=this.all)?void 0:e[this.itemId]}},{key:"initialData",get:function get(){var e=this.initialElement;return null!=e&&e.id?e.$dataset:null}},{key:"actualData",get:function get(){var e,n=this.initialData;if(!n)return null;var r=(0,u.default)({},this.context,n,g[this.itemId]);return null==(e=this.meta)||e.map((function(e){var n=e.id,o=e.visible;!(!o||(0,m.getPredicat)(o)(r))&&r[n]&&(r[n]="")})),r}},{key:"item",get:function get(){return new v.Item(this.actualData||{})}},{key:"itemNavInfo",get:function get(){var e;return(0,u.default)({prev:null,next:null},null==(e=this.initialElement)?void 0:e.$navInfo)}},{key:"itemTitle",get:function get(){var e;return null==(e=this.initialElement)?void 0:e.title}},{key:"touched",get:function get(){return!!g[this.itemId]}},{key:"upsert",value:function upsert(e){throw new Error("upsert not defined."+e)}},{key:"submitData",value:function submitData(e){var n,r,o,u,l;return i.default.async((function submitData$(c){for(;;)switch(c.prev=c.next){case 0:if(e){c.next=2;break}return c.abrupt("return",null);case 2:return c.next=4,i.default.awrap(this.upsert(e));case 4:if(n=c.sent,r=n.error,o=n.lastUpdatedItemId,u=(0,a.default)(n,y),console.log(r,u),!r){c.next=13;break}return l=null==r?void 0:r.message,this.toast({id:l,mode:"error",message:"Error: "+l}),c.abrupt("return",null);case 13:return delete g[this.itemId],this.toast({message:"Saved successfully.",timeout:5e3,link:"#/task?itemId="+o}),c.abrupt("return",{counter:NaN});case 16:case"end":return c.stop()}}),null,this,null,Promise)}},{key:"onSave",value:function onSave(){return this.submitData(this.actualData)}},{key:"onDelete",value:function onDelete(){var e,n=(null==(e=this.initialElement)?void 0:e.id).id;return n?this.submitData({id:n,status:"deleted"}):null}}]),ItemController}(h.Service);n.ItemController=b},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.MultivalueController=void 0;var i=o(r(9)),a=o(r(1)),u=o(r(2)),l=o(r(5)),c=o(r(6)),s=o(r(4)),f=r(8);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=(0,s.default)(e);if(n){var i=(0,s.default)(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(0,c.default)(this,r)}}var p=function(e){(0,l.default)(MultivalueController,e);var n=_createSuper(MultivalueController);function MultivalueController(){var e;(0,a.default)(this,MultivalueController);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).value="",e}return(0,u.default)(MultivalueController,[{key:"items",get:function get(){var e=this;return this.bits.map((function(n){var r,o;return{id:n,name:(null==(r=e.optionsHash)||null==(o=r[n])?void 0:o.name)||n}}))}},{key:"bits",get:function get(){return this.value?this.value.split(","):[]}},{key:"setOptions",value:function setOptions(e){this.optionsHash=(0,f.arrayToObject)(e),this.options=e}},{key:"availableOptions",get:function get(){var e,n=this,r=null==(e=this.options)?void 0:e.filter((function(e){var r;return!(null!=(r=n.value)&&r.includes(e.id))}));return null!=r&&r.length?r:null}},{key:"change",value:function change(e){throw new Error("change not defined."+e)}},{key:"onToggleOpened",value:function onToggleOpened(e,n){var r=n.opened;return{opened:!(void 0!==r&&r)}}},{key:"onReset",value:function onReset(){this.change({value:""})}},{key:"onInsert",value:function onInsert(e){var n=e.value,r=void 0===n?"":n;return this.change({value:[].concat((0,i.default)(this.bits),[r]).join(",")}),{opened:!1}}},{key:"onDelete",value:function onDelete(e){var n=e.value,r=void 0===n?"":n;this.change({value:this.bits.filter((function(e){return e!==r})).join(",")})}}]),MultivalueController}(r(7).Service);n.MultivalueController=p},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.SuggestionController=void 0;var i=o(r(9)),a=o(r(1)),u=o(r(2)),l=o(r(5)),c=o(r(6)),s=o(r(4));function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=(0,s.default)(e);if(n){var i=(0,s.default)(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(0,c.default)(this,r)}}var f=function(e){(0,l.default)(SuggestionController,e);var n=_createSuper(SuggestionController);function SuggestionController(){var e;(0,a.default)(this,SuggestionController);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).value="",e}return(0,u.default)(SuggestionController,[{key:"bits",get:function get(){return this.value?this.value.split(",").map((function(e){return e.trim()})).filter(Boolean):[]}},{key:"lastBitIncluded",get:function get(){var e=this.bits;if(!e.length)return!1;var n=e[e.length-1]||"";return this.options.some((function(e){return e.id===n}))}},{key:"smartOptions",get:function get(){var e=this.options,n=this.bits;if(!n.length)return e;var r=n[n.length-1]||"";if(r.length>1&&!this.lastBitIncluded){var o=r.toLowerCase();e=e.filter((function(e){return(e.name||e.id).toLowerCase().includes(o)}))}return(e=e.filter((function(e){return!n.includes(e.id)}))).slice(0,15)}},{key:"actualOptions",get:function get(){var e=this.options,n=String(this.value||""),r=(null==n?void 0:n.toLowerCase())||"";if(r.length<2)return e.slice(0,15);var o=e.filter((function(e){return(e.name||e.id).toLowerCase().startsWith(r)}));return 1===o.length&&n===o[0].id?null:o.slice(0,15)}},{key:"change",value:function change(e){throw new Error("change not defined."+e)}},{key:"onOpen",value:function onOpen(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{opened:e}}},{key:"onReset",value:function onReset(){this.change({value:""})}},{key:"onAppend",value:function onAppend(e){var n=e.value,r=void 0===n?"":n,o=this.bits;this.lastBitIncluded||o.pop(),this.change({value:[].concat((0,i.default)(o),[r]).join(", ")})}},{key:"onCutLast",value:function onCutLast(){var e=this.bits;e.pop(),this.change({value:(0,i.default)(e).join(", ")})}},{key:"onChange",value:function onChange(e){var n=e.value,r=void 0===n?"":n;return this.change({value:r}),{opened:!1}}}]),SuggestionController}(r(7).Service);n.SuggestionController=f},function(e,n,r){"use strict";r.r(n),n.default='<component id="Forma">\n  <div autocomplete="off" class="form-horizontal px-2">\n    <FormController ui:ref="formController" data="{data}" meta="{meta}" change="{change}" />\n    <ui:tag tag="{field.type|capitalize}Field" ui:props="{field}" ui:if="field.visible" ui:for="field of <-formController.fieldProps" />\n  </div>\n</component>\n\n<component id="GroupForma">\n  <div autocomplete="off" class="form-horizontal px-2">\n    <FormController ui:ref="formController" data="{data}" meta="{meta}" change="{change}" groups="{groups}" />\n    <FieldGroup ui:props="{group}" ui:for="group of <-formController.fieldsGroups" />\n  </div>\n</component>\n\n<component id="TabbedForma">\n  <div autocomplete="off" class="form-horizontal px-2">\n    <FormController ui:ref="formController" data="{data}" meta="{meta}" change="{change}" tabs="{tabs}" groups="{groups}" />\n    <TabbedFormaContent ui:props="<-formController.tabsInfo" />\n  </div>\n</component>\n\n<component id="TabbedFormaContent">\n  <Tabs items="{tabs}" change="->tabId|dot:id" value="{tabId|or:@initialTab}" ui:if="enabled" />\n  <div ui:if="tabId|or:@initialTab|equals:@tab.id" ui:for="tab of tabs">\n    <FieldGroup ui:props="{group}" ui:for="group of tab.items" />\n  </div>\n</component>\n\n<component id="FieldGroup">\n  <h6 class="mt-2 pt-2 px-2 text-gray">{name|or:id}</h6>\n  <div class="panel">\n    <div class="p-2">\n      <ui:tag tag="{field.type|capitalize}Field" ui:props="{field}" ui:if="field.visible" ui:for="field of items" />\n    </div>\n  </div>\n</component>\n\n'},function(e,n,r){"use strict";r.r(n),n.default='<component id="Field">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <input class="form-input" type="text" disabled="{disabled}" placeholder="{placeholder}" value="{value}" change="{onChange}" />\n  </FieldItem>\n</component>\n\n<component id="TextField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <input class="form-input" name="{id}" type="text" disabled="{disabled}" placeholder="{placeholder}" value="{value}" change="{onChange}" />\n  </FieldItem>\n</component>\n\n<component id="PasswordField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <input class="form-input" name="{id}" type="password" disabled="{disabled}" placeholder="{placeholder|or:password}" value="{value}" change="{onChange}" />\n  </FieldItem>\n</component>\n\n<component id="EmailField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <input class="form-input" type="email" disabled="{disabled}" placeholder="{placeholder|or:password}" value="{value}" change="{onChange}" />\n  </FieldItem>\n</component>\n\n<component id="UrlField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <div class="input-group has-icon-right" style="height:2rem;">\n      <ui:fragment ui:if="{editing}">\n        <ui:then>\n          <input class="form-input border-0" disabled="{disabled}" type="url" blur="-> editing|not" placeholder="{placeholder}" value="{value}" change="{onChange}" />\n          <button class="btn btn-primary input-group-btn" click="-> editing|not">\n            <i class="icon icon-check"/>\n          </button>\n        </ui:then>\n        <ui:else>\n          <a class="form-input text-ellipsis" href="{value}" target="{id}" ui:if="value">🔗 {value}</a>\n          <a class="form-input text-ellipsis" ui:if="value|not">{placeholder|or:-}</a>\n          <i class="form-icon icon icon-edit c-hand" click="->editing" ui:if="disabled|not"/>\n        </ui:else>\n      </ui:fragment>\n    </div>\n  </FieldItem>\n</component>\n\n<component id="EmailField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <input class="form-input" disabled="{disabled}" type="email" placeholder="{placeholder}" value="{value}" change="{onChange}" />\n  </FieldItem>\n</component>\n\n<component id="DateField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <input class="form-input" disabled="{disabled}" type="date" placeholder="{placeholder}" value="{value}" change="{onChange}" />\n  </FieldItem>\n</component>\n\n<component id="DateAndWorkingHoursField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <div class="d-flex">\n      <input class="form-input" disabled="{disabled}" type="date" placeholder="{placeholder}" value="{value}" change="{onChange}" />\n      <Select class="form-select ml-2" disabled="{disabled}" change="{onChange|assignFirstArgKeyValue:key:@typeSpec}" emptyCaption="-" value="{data|dot:@typeSpec}" options=":enums.workingHours" />\n    </div>\n  </FieldItem>\n</component>\n\n\n<component id="DateAndTimeField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <div class="d-flex">\n      <input class="form-input flex-1" disabled="{disabled}" type="date" placeholder="{placeholder}" value="{value}" change="{onChange}" />\n      <input class="form-input flex-1 ml-2" disabled="{value|not|or:@disabled}" type="text" value="{data|dot:@typeSpec}" change="{onChange|assignFirstArgKeyValue:key:@typeSpec}" />\n    </div>\n  </FieldItem>\n</component>\n\n<component id="DatePeriodField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <div class="d-flex">\n      <input class="form-input flex-1" disabled="{disabled}" type="date" placeholder="{placeholder}" value="{value}" change="{onChange}" />\n      <input class="form-input flex-1 ml-2" style="min-width: 6rem;" disabled="{value|not|or:@disabled}" type="date" value="{data|dot:@typeSpec}" change="{onChange|assignFirstArgKeyValue:key:@typeSpec}" />\n    </div>\n  </FieldItem>\n</component>\n\n<component id="DateTimeField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <input class="form-input" disabled="{disabled}" type="datetime-local" placeholder="{placeholder}" value="{value|dateFormat:yyyy-mm-ddTt}" change="{onChange}" />\n  </FieldItem>\n</component>\n\n<component id="TimeField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <input class="form-input" disabled="{disabled}" type="text" placeholder="{placeholder}" value="{value|dateFormat:t}" change="{onChange}" />\n  </FieldItem>\n</component>\n\n<component id="NumberField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <input class="form-input" disabled="{disabled}" type="number" placeholder="{placeholder}" value="{value}" change="{onChange}" />\n  </FieldItem>\n</component>\n\n<component id="TextareaField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <textarea class="form-input" style="min-height: 15vw" disabled="{disabled}" placeholder="{placeholder}" rows="3" change="{onChange}" value="{value}"></textarea>\n  </FieldItem>\n</component>\n\n<component id="BooleanField">\n  <div class="form-group">\n    <div class="col-sm-12 d-flex">\n      <label class="form-switch">\n        <span>{caption}</span>\n        <input type="checkbox" toggle="{onChange}" checked="{value|truthy}" />\n        <i class="form-icon"></i>\n      </label>\n      <div class="border-1 centroid text-secondary s-circle m-1 px-2" style="height:1.3rem; width:1.3rem;" data-value="{showHint|not}" click="->showHint|dot:value" ui:if="{hint}">\n        <span>?</span>\n      </div>\n    </div>\n    <div class="col-12" ui:if="{showHint}">\n      <p class="form-input-hint mb-1">{hint}</p>\n    </div>\n  </div>\n</component>\n\n<component id="EnumField">\n  <FieldItem caption="{caption}" class={class} error="{error}" required="{required}" hint="{hint}">\n    <Select class="form-select" change="{onChange}" value="{value|or:@defaultValue}" options="{options}" emptyCaption="{emptyCaption}" disabled="{disabled}" />\n  </FieldItem>\n</component>\n\n<component id="SelectField">\n  <FieldItem caption="{caption}" class="{class}" error="{error}" required="{required}" hint="{hint}">\n    <Select class="form-select" change="{onChange}" value="{value|or:@defaultValue}" options="{options}" emptyCaption="{emptyCaption}" disabled="{disabled}" />\n  </FieldItem>\n</component>\n\n<component id="ChoiceField">\n  <FieldItem caption="{caption}" class="{class}" error="{error}" required="{required}" hint="{hint}">\n    <div class="btn-group btn-group-block">\n      <Btn title="{option.name}" class="option-{value}{option.id|equals:@value|then::-other}" mode="{option.id|equals:@value|then:primary}" data="{option.id|pack:value}" action="{onChange}" ui:for="option of options"/>\n    </div>\n  </FieldItem>\n</component>\n\n<component id="RadioField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <RadioGroup change="{onChange}" value="{value}" data="{data}" options=":enums.{typeSpec}" disabled="{disabled}" />\n  </FieldItem>\n</component>\n'},function(e,n,r){"use strict";r.r(n),n.default='<component id="SuggestionInput">\n  <div class="form-autocomplete">\n    <div class="has-icon-right">\n      <input class="form-input" type="text" disabled="{disabled}" placeholder="{placeholder}" focus="{open|fnBindArgs:true}" blur2="{open|fnBindArgs:false|fnTick:200}" keypress="{change}" value="{value}" />\n      <i class="form-icon icon icon-{value|then:cross:arrow-down} c-hand" style="margin-right:{options.length|then:1.5:0.25}rem;" click="{reset}" ui:if="disabled|not|and:@value"></i>\n      <ui:fragment ui:if="options|and:@options.length">\n        <i class="form-icon icon icon-arrow-up c-hand" click="{open|fnBindArgs:false}" ui:if="opened"></i>\n        <i class="form-icon icon icon-arrow-down c-hand" click="{open|fnBindArgs:true}" ui:if="opened|not"></i>\n      </ui:fragment>\n    </div>\n    <ul class="menu" style="position2: relative; min-width: 180px;max-height:7rem;overflow-y:auto;" ui:if="{options|and:@options.length|and:@opened}">\n      <li class="menu-item" ui:for="item of options" data-value="{item.id}" click="{change}">\n        <a>\n          <div class="tile tile-centered">\n            <div class="tile-content">{item.name|or:@item.id}</div>\n          </div>\n        </a>\n      </li>\n    </ul>\n  </div>\n</component>\n\n<component id="SuggestionField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <SuggestionController ui:ref="ctrl" options="{options}" value="{value}" change="{onChange}"/>\n    <SuggestionInput options="<-ctrl.actualOptions" value="{value}" opened="<- ctrl.opened" open="-> ctrl.open" disabled="{disabled}" change="->ctrl.change" append="->ctrl.change" reset="->ctrl.reset"/>\n  </FieldItem>\n</component>\n'},function(e,n,r){"use strict";r.r(n),n.default='<component id="Smartarea">\n  <div class="form-autocomplete" ui:if="options">\n\n    <ui:fragment ui:if="disabled">\n      <ui:then>\n        <div class="form-input" style="height: auto;min-height:1.5rem;">{value}</div>\n      </ui:then>\n      <ui:else>\n        <div class="has-icon-right" click="{open|fnBindArgs:true}">\n          <div class="form-input text-{value|then::gray}" style="height: auto;min-height:1.5rem;">{value|or:@placeholder}</div>\n          <i class="form-icon icon icon-edit c-hand"></i>\n        </div>\n      </ui:else>\n    </ui:fragment>\n\n    <Modal open="{opened}" mode="sm" ui:if="{opened}" close="{open|fnBindArgs:false}">\n      <Modal:header>\n        <h6>{caption}</h6>\n      </Modal:header>\n\n      <div class="form-autocomplete">\n        <div class="has-icon-right">\n          <textarea class="form-input" style="padding-right: 3rem;height:6rem;" keypress="{change}" value="{value}" />\n          <i class="form-icon icon icon-{value|then:cross:arrow-down} c-hand" click="{reset}" ui:if="value"></i>\n        </div>\n        <div style="overflow-y: auto;height:15rem;margin:0.5rem 0;">\n          <ul class="menu2" style="min-width: 180px;list-style: none;">\n            <li class="menu-item" ui:for="item of options" data-value="{item.id}" click="{append}">\n              <a>\n                <div class="tile tile-centered">\n                  <div class="tile-content">🏷️ {item.name|or:@item.id}</div>\n                </div>\n              </a>\n            </li>\n          </ul>\n        </div>\n      </div>\n\n      <Modal:footer>\n        <Btn class="float-right" mode="primary" title="OK" action="{open|fnBindArgs:false}"/>\n      </Modal:footer>\n    </Modal>\n  </div>\n</component>\n\n<component id="SmartareaField">\n  <FieldItem caption="{caption}" error="{error}" required="{required}" hint="{hint}">\n    <SuggestionController ui:ref="ctrl" options="{options}" value="{value}" change="{onChange}"/>\n    <Smartarea caption="{caption}" disabled="{disabled}" options="<-ctrl.smartOptions" value="{value}" disabled="{disabled}" opened="{opened}" open="->opened" placeholder="{placeholder}" change="->ctrl.change" append="->ctrl.append" reset="->ctrl.cutLast"/>\n  </FieldItem>\n</component>'},function(e,n,r){"use strict";r.r(n),n.default='<component id="FieldItem">\n  <div class="form-group {error|then:has-error} {class}">\n    <div class="col-4 col-sm-12">\n      <label class="form-label d-flex" for="input-example-1" ui:if="{caption}">\n        <div class="text-ellipsis" title="{caption}">{caption}</div>\n        <div ui:if="{required}" class="text-error text-tiny ml-1">✱</div>\n        <div class="border-1 text-secondary s-circle centroid mx-1 px-2" style="height:1.3rem;width:1.3rem;" data-value="{showHint|not}" click="->showHint|dot:value" ui:if="{hint}">\n          <span>?</span>\n        </div>\n      </label>\n    </div>\n    <div class="col-8 col-sm-12">\n      <ui:slot />\n    </div>\n    <div class="col-12">\n      <p class="form-input-hint mb-1" ui:if="{showHint}">{hint}</p>\n      <p class="form-input-hint mb-1" ui:if="{error}">{error}</p>\n    </div>\n  </div>\n</component>\n'},function(e,n,r){"use strict";r.r(n),n.default='<component id="MultiEnumAppender">\n  <div class="form-autocomplete" ui:if="options">\n    <div class="has-icon-right" click="{toggle}">\n      <div class="form-input text-gray">{placeholder}</div>\n      <i class="form-icon icon icon-{opened|then:arrow-up:plus} c-hand"></i>\n    </div>\n    <Modal open="{opened}" mode="sm" close="{toggle}">\n      <Modal:header>\n        <h6>{caption}</h6>\n      </Modal:header>\n      <div style="overflow-y: auto;height:15rem;margin:0;">\n        <ul class="menu2" style="min-width: 180px;list-style: none;">\n          <li class="menu-item" ui:for="option of options" click="-> ctrl.insert|assignKeyValue:value:@option.id">\n            <a>\n              <div class="tile tile-centered">\n                <div class="tile-content">🔸 {option.name|or:@option.id}</div>\n              </div>\n            </a>\n          </li>\n        </ul>\n      </div>\n      \x3c!-- <Modal:footer>\n        <Btn class="float-right" mode="primary" title="OK" action="{toggle}"/>\n      </Modal:footer> --\x3e\n    </Modal>\n  </div>\n</component>\n\n<component id="MultiEnumField">\n  <FieldItem caption="{caption}" class={class} error="{error}" required="{required}" hint="{hint}">\n\n    <MultivalueController ui:ref="ctrl" value="{value}" options="{options}" change="{onChange}"/>\n\n    <div class="mb-1 has-icon-right" ui:for="item of <-ctrl.items">\n      <div class="form-input" style="height: auto; min-height: 1.5rem;">\n        <div class="">{item.name}</div>\n        <i class="form-icon icon icon-cross p-2 c-hand" click="-> ctrl.delete|assignKeyValue:value:@item.id" ui:if="disabled|not"></i>\n      </div>\n    </div>\n\n    <MultiEnumAppender caption="➕ {caption}" placeholder="{placeholder}" options="<-ctrl.availableOptions" opened="<-ctrl.opened" toggle="->ctrl.toggleOpened" ui:if="disabled|not"/>\n\n  </FieldItem>\n</component>\n'},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0});var i={userTemplates:!0};n.userTemplates=void 0;var a=o(r(117)),u=r(118);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in n&&n[e]===u[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return u[e]}}))}));var l=r(119);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in n&&n[e]===l[e]||Object.defineProperty(n,e,{enumerable:!0,get:function get(){return l[e]}}))}));var c=a.default;n.userTemplates=c},function(e,n,r){"use strict";r.r(n),n.default='<component id="UserBar">\n  <div class="float-right" style="width: 1.5rem;">\n    <NoUserPanel ui:if="<-auth.isSignedIn|not">\n      <ui:else>\n        <UserLoading ui:if="<-user.isLoading">\n          <ui:else>\n            <UserPanel ui:props="<-user.info" defaultImage="assets/person1.png"/>\n          </ui:else>\n        </UserLoading>\n      </ui:else>\n    </NoUserPanel>\n  </div>\n</component>\n\n<component id="UserLoading">\n  <div class="tile tile-centered">\n    <div class="tile-action">\n      <div class="dropdown dropdown-right">\n        <a class="btn btn-link dropdown-toggle" tabindex="0">\n          <div class="mx-2 loading"></div>\n        </a>\n      </div>\n    </div>\n  </div>\n</component>\n\n<component id="UserPanel">\n  <div class="tile tile-centered">\n    <div class="tile-action">\n      <div class="dropdown dropdown-right">\n        <a class="btn btn-link dropdown-toggle p-0" tabindex="0">\n          <figure class="avatar">\n            <img src="{image|or:@defaultImage}" alt="{name}" />\n          </figure>\n        </a>\n        <ul class="menu">\n          <li class="menu-item">\n            <a click="-> user.showProfile|truthy">Profile</a>\n          </li>\n          <li class="menu-item" ui:if="<- auth.canSignOut">\n            <a click="-> auth.signOut">Exit</a>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</component>\n\n<component id="NoUserPanel">\n  <div class="tile tile-centered">\n    <div class="tile-action">\n      <a class="btn btn-link dropdown-toggle" click="-> auth.signIn">\n        <Icon type="people"/>\n      </a>\n      <div class="dropdown dropdown-right">\n        <ul class="menu">\n          <li class="menu-item">\n            <a>▶️Vxod</a>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</component>\n'},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.AuthService=void 0;var i=o(r(3)),a=o(r(16)),u=o(r(1)),l=o(r(2)),c=o(r(5)),s=o(r(6)),f=o(r(4)),p=r(7),h=r(15),v=["error"],m=["error"];function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=(0,f.default)(e);if(n){var i=(0,f.default)(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(0,s.default)(this,r)}}var y=function(e){(0,c.default)(AuthService,e);var n=_createSuper(AuthService);function AuthService(){var e;(0,u.default)(this,AuthService);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).authUrl="",e.persistence="transient",e}return(0,l.default)(AuthService,[{key:"init",value:function init(){return this.local=new h.Storage(this.persistence),this.initialToken?{token:this.initialToken}:null}},{key:"token",get:function get(){var e;return this.initialToken||(null==(e=this.local)?void 0:e.get("$auth_token"))},set:function set(e){var n;null==(n=this.local)||n.set("$auth_token",e)}},{key:"isSignedIn",get:function get(){return!!this.token}},{key:"canSignOut",get:function get(){return!this.initialToken}},{key:"signOut",value:function signOut(){return new h.Storage("local").clear(),new h.Storage("session").clear(),this.initialToken=null,this.token=null,window.location.reload(),null}},{key:"signIn",value:function signIn(e){var n=e||{},r=n.username,o=n.password;return fetch(this.authUrl+"?action=signin",{method:"POST",mode:"cors",redirect:"follow",body:JSON.stringify({creds:r+":"+o})}).then((function(e){return e.json()})).then((function(e){var n=e.error,r=(0,a.default)(e,v);if(n)throw new Error("Invalid credentials");return r}))}},{key:"signUp",value:function signUp(e){return fetch(this.authUrl+"?action=signup",{method:"POST",mode:"cors",redirect:"follow",body:JSON.stringify({data:e})}).then((function(e){return e.json()})).then((function(e){var n=e.error,r=(0,a.default)(e,m);if(n)throw n;return r}))}},{key:"onInvalidateToken",value:function onInvalidateToken(){return this.signOut()}},{key:"onSignIn",value:function onSignIn(e){var n=this;return{busy:!0,"*":this.signIn(e).catch((function(e){return n.toast("error: "+e.message),null})).then((function(e){return(0,i.default)({busy:!1},e)}))}}},{key:"onSignUp",value:function onSignUp(e){var n=this;return{busy:!0,"*":this.signUp(e).catch((function(e){return n.toast("error: "+e.message),null})).then((function(e){return(0,i.default)({busy:!1},e)}))}}},{key:"onSignOut",value:function onSignOut(){var e;this.signOut(),null==(e=this.afterSignedOut)||e.call(this)}}]),AuthService}(p.Service);n.AuthService=y},function(e,n,r){var o=r(0);Object.defineProperty(n,"__esModule",{value:!0}),n.UserService=void 0;var i=o(r(3)),a=o(r(1)),u=o(r(2)),l=o(r(5)),c=o(r(6)),s=o(r(4)),f=r(7),p=r(15);function _createSuper(e){var n=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var r,o=(0,s.default)(e);if(n){var i=(0,s.default)(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return(0,c.default)(this,r)}}var h=function(e){(0,l.default)(UserService,e);var n=_createSuper(UserService);function UserService(){var e;(0,a.default)(this,UserService);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))).url="",e.kind="$user",e.persistence="transient",e}return(0,u.default)(UserService,[{key:"info",get:function get(){var e;return null==(e=this.local)?void 0:e.get(this.kind)},set:function set(e){var n;null==(n=this.local)||n.set(this.kind,e)}},{key:"init",value:function init(){return this.local=new p.Storage(this.persistence),this.sync()}},{key:"submit",value:function submit(e){throw new Error("Method not implemented.")}},{key:"sync",value:function sync(e){var n=this,r=this.submit({path:"?action=user",body:{delta:e}}).then((function(e){var r=e.user;return n.log("sync "+n.kind,r),{isLoading:!1,info:r}})).catch((function(e){var r=(null==e?void 0:e.message)||e||"unknown";return n.toast({id:r,mode:"error",message:"Ошибка: "+r}),{isLoading:!1,error:r}}));return{isLoading:!0,info:(0,i.default)({},this.info,e),error:null,"*":r}}},{key:"onSave",value:function onSave(e){return this.sync(e)}},{key:"onShowProfile",value:function onShowProfile(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{showProfile:e}}}]),UserService}(f.Service);n.UserService=h},function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function showCounts(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"⭕",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"⭕",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"…";if(!e)return o;var i=e.total,a=e.actual;return i?a?a===i?i:a+" / "+i:r:n};n.default=function _default(e){return{showCounts:r,sandbox:function sandbox(n){return function(){try{e("<div>"+n+"</div>",{rootElement:this.$element})}catch(e){}}}}}}])}));